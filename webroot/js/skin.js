(function(a,i,e){var d=[];a(e).ready(function(){if(navigator.appName=="Microsoft Internet Explorer"){obj=e.getElementsByTagName("TEXTAREA");for(var a,c=0,c=0;c<obj.length;c++)a=obj[c],d[c]=a.value.length,a.onmouseup=function(){a=e.activeElement;for(var c=0;c<obj.length;c++)if(obj[c]==a)break;a.focus();var f=e.selection.createRange(),j=a.createTextRange(),g=j.duplicate();j.moveToBookmark(f.getBookmark());g.setEndPoint("EndToStart",j);d[c]=g.text.length},a.onkeyup=function(){a=e.activeElement;for(var c=
0;c<obj.length;c++)if(obj[c]==a)break;a.focus();var f=e.selection.createRange(),j=a.createTextRange(),g=j.duplicate();j.moveToBookmark(f.getBookmark());g.setEndPoint("EndToStart",j);d[c]=g.text.length}}});jQuery.fn.extend({getSelection:function(){var a=this.jquery?this[0]:this,c,h,f,j=0;a.onmousedown=function(){e.selection&&typeof a.selectionStart!="number"?e.selection.empty():i.getSelection().removeAllRanges()};if(e.selection){var g=e.selection.createRange(),l=0,m=0,n=0;c=e.getElementsByTagName("TEXTAREA");
for(h=0;h<c.length;h++)if(c[h]==a)break;if(a.value.match(/\n/g)!=null)j=a.value.match(/\n/g).length;if(g.text){f=g.text;if(typeof a.selectionStart=="number"){if(c=a.selectionStart,h=a.selectionEnd,c==h)return{start:c,end:h,text:g.text,length:h-c}}else{c=a.createTextRange();f=c.duplicate();firstRe=c.text;c.moveToBookmark(g.getBookmark());secondRe=c.text;f.setEndPoint("EndToStart",c);if(firstRe==secondRe&&firstRe!=g.text||f.text.length>firstRe.length)return{start:d[h],end:d[h],text:"",length:0};c=f.text.length;
h=f.text.length+g.text.length}if(j>0)for(f=0;f<=j;f++){var k=a.value.indexOf("\n",m);k!=-1&&k<c?(m=k+1,l++,n=l):k!=-1&&k>=c&&k<=h?k==c+1?(l--,n--,m=k+1):(m=k+1,n++):f=j}g.text.indexOf("\n",0)==1&&(n+=2);c-=l;h-=n;return{start:c,end:h,text:g.text,length:h-c}}a.focus();typeof a.selectionStart=="number"?c=a.selectionStart:(g=e.selection.createRange(),c=a.createTextRange(),f=c.duplicate(),c.moveToBookmark(g.getBookmark()),f.setEndPoint("EndToStart",c),c=f.text.length);if(j>0)for(f=0;f<=j;f++)k=a.value.indexOf("\n",
m),k!=-1&&k<c?(m=k+1,l++):f=j;c-=l;c==0&&typeof a.selectionStart!="number"&&(c=d[h],h=d[h]);return{start:c,end:c,text:g.text,length:0}}else return typeof a.selectionStart=="number"?(c=a.selectionStart,h=a.selectionEnd,f=a.value.substring(a.selectionStart,a.selectionEnd),{start:c,end:h,text:f,length:h-c}):{start:void 0,end:void 0,text:void 0,length:void 0}},replaceSelection:function(a){var c=this.jquery?this[0]:this,h,f;f=0;var j,g,l=0,m=0,n=c.scrollTop==void 0?0:c.scrollTop;h=e.getElementsByTagName("TEXTAREA");
for(var k=0;k<h.length;k++)if(h[k]==c)break;if(e.selection&&typeof c.selectionStart!="number"){n=e.selection.createRange();if(typeof c.selectionStart!="number"){var q;g=c.createTextRange();j=g.duplicate();h=g.text;g.moveToBookmark(n.getBookmark());q=g.text;try{j.setEndPoint("EndToStart",g)}catch(p){return this}if(h==q&&h!=n.text||j.text.length>h.length)return this}if(n.text){part=n.text;if(c.value.match(/\n/g)!=null)l=c.value.match(/\n/g).length;h=j.text.length;if(l>0)for(q=0;q<=l;q++){var i=c.value.indexOf("\n",
f);i!=-1&&i<h?(f=i+1,m++):q=l}n.text=a;d[k]=j.text.length+a.length;g.move("character",d[k]);e.selection.empty();c.blur()}}else if(typeof c.selectionStart=="number"&&c.selectionStart!=c.selectionEnd)h=c.selectionStart,f=c.selectionEnd,c.value=c.value.substr(0,h)+a+c.value.substr(f),f=h+a.length,c.setSelectionRange(f,f),c.scrollTop=n;return this},setSelection:function(a,d){var a=parseInt(a),d=parseInt(d),h=this.jquery?this[0]:this;h.focus();typeof h.selectionStart!="number"&&(re=h.createTextRange(),
re.text.length<d&&(d=re.text.length+1));if(d<a)return this;if(e.selection){var f=0,j=0,g=0,l=0;if(typeof h.selectionStart!="number")re.collapse(!0),re.moveEnd("character",d),re.moveStart("character",a),re.select();else{if(typeof h.selectionStart=="number"){if(h.value.match(/\n/g)!=null)f=h.value.match(/\n/g).length;if(f>0)for(var m=0;m<=f;m++){var n=h.value.indexOf("\n",g);n!=-1&&n<a?(g=n+1,j++,l=j):n!=-1&&n>=a&&n<=d?n==a+1?(j--,l--,g=n+1):(g=n+1,l++):m=f}a+=j;d+=l;h.selectionStart=a;h.selectionEnd=
d}h.focus()}return this}else if(h.selectionStart||h.selectionStart==0)return h.focus(),i.getSelection().removeAllRanges(),h.selectionStart=a,h.selectionEnd=d,h.focus(),this},insertAtCaretPos:function(a){var c=this.jquery?this[0]:this,h,f,j,g,l,m,n;h=f=0;var k=c.scrollTop==void 0?0:c.scrollTop;n=e.getElementsByTagName("TEXTAREA");for(var q=0;q<n.length;q++)if(n[q]==c)break;c.focus();if(e.selection&&typeof c.selectionStart!="number"){if(c.value.match(/\n/g)!=null)h=c.value.match(/\n/g).length;n=parseInt(d[q]);
if(h>0)for(var p=0;p<=h;p++){var i=c.value.indexOf("\n",j);i!=-1&&i<=n&&(j=i+1,n-=1,f++)}}d[q]=parseInt(d[q]);c.onkeyup=function(){if(e.selection&&typeof c.selectionStart!="number")c.focus(),g=e.selection.createRange(),l=c.createTextRange(),m=l.duplicate(),l.moveToBookmark(g.getBookmark()),m.setEndPoint("EndToStart",l),d[q]=m.text.length};c.onmouseup=function(){if(e.selection&&typeof c.selectionStart!="number")c.focus(),g=e.selection.createRange(),l=c.createTextRange(),m=l.duplicate(),l.moveToBookmark(g.getBookmark()),
m.setEndPoint("EndToStart",l),d[q]=m.text.length};if(e.selection&&typeof c.selectionStart!="number"){g=e.selection.createRange();if(g.text.length!=0)return this;l=c.createTextRange();textLength=l.text.length;m=l.duplicate();l.moveToBookmark(g.getBookmark());m.setEndPoint("EndToStart",l);h=m.text.length;d[q]>0&&h==0?(f=d[q]-f,l.move("character",f),l.select(),g=e.selection.createRange(),d[q]+=a.length):!(d[q]>=0)&&textLength==0?(g=e.selection.createRange(),d[q]=a.length+textLength):!(d[q]>=0)&&h==0?
(l.move("character",textLength),l.select(),g=e.selection.createRange(),d[q]=a.length+textLength):!(d[q]>=0)&&h>0?(l.move("character",0),e.selection.empty(),l.select(),g=e.selection.createRange(),d[q]=h+a.length):d[q]>=0&&d[q]==textLength?(textLength!=0?(l.move("character",textLength),l.select()):l.move("character",0),g=e.selection.createRange(),d[q]=a.length+textLength):(d[q]>=0&&h!=0&&d[q]>=h?(f=d[q]-h,l.move("character",f)):d[q]>=0&&h!=0&&d[q]<h&&l.move("character",0),e.selection.empty(),l.select(),
g=e.selection.createRange(),d[q]+=a.length);g.text=a;c.focus()}else if(typeof c.selectionStart=="number"&&c.selectionStart==c.selectionEnd)j=c.selectionStart+a.length,h=c.selectionStart,f=c.selectionEnd,c.value=c.value.substr(0,h)+a+c.value.substr(f),c.setSelectionRange(j,j),c.scrollTop=k;return this},setCaretPos:function(a){var c=this.jquery?this[0]:this,h,f=0,j=0,g;g=e.getElementsByTagName("TEXTAREA");for(var l=0;l<g.length;l++)if(g[l]==c)break;c.focus();if(parseInt(a)==0)return this;if(parseInt(a)>
0){if(a=parseInt(a)-1,e.selection&&typeof c.selectionStart=="number"&&c.selectionStart==c.selectionEnd){if(c.value.match(/\n/g)!=null)f=c.value.match(/\n/g).length;if(f>0)for(var m=0;m<=f;m++)g=c.value.indexOf("\n",h),g!=-1&&g<=a&&(h=g+1,a=parseInt(a)+1)}}else if(parseInt(a)<0)if(a=parseInt(a)+1,e.selection&&typeof c.selectionStart!="number"){a=c.value.length+parseInt(a);if(c.value.match(/\n/g)!=null)f=c.value.match(/\n/g).length;if(f>0){for(m=0;m<=f;m++)g=c.value.indexOf("\n",h),g!=-1&&g<=a&&(h=
g+1,a=parseInt(a)-1,j+=1);a=a+j-f}}else if(e.selection&&typeof c.selectionStart=="number"){a=c.value.length+parseInt(a);if(c.value.match(/\n/g)!=null)f=c.value.match(/\n/g).length;if(f>0){a=parseInt(a)-f;for(m=0;m<=f;m++)g=c.value.indexOf("\n",h),g!=-1&&g<=a&&(h=g+1,a=parseInt(a)+1,j+=1)}}else a=c.value.length+parseInt(a);else return this;if(e.selection&&typeof c.selectionStart!="number"){h=e.selection.createRange();if(h.text!=0)return this;c=c.createTextRange();c.collapse(!0);c.moveEnd("character",
a);c.moveStart("character",a);c.select();d[l]=a}else typeof c.selectionStart=="number"&&c.selectionStart==c.selectionEnd&&c.setSelectionRange(a,a);return this},countCharacters:function(){var a=this.jquery?this[0]:this;return a.value.match(/\r/g)!=null?a.value.length-a.value.match(/\r/g).length:a.value.length},setMaxLength:function(a,d){this.each(function(){var h=this.jquery?this[0]:this,f=h.type,j,g;parseInt(a)<0&&(a=1E8);if(f=="text")h.maxLength=a;if(f=="textarea"||f=="text")h.onkeypress=function(l){var f=
h.value.match(/\r/g);g=a;f!=null&&(g=parseInt(g)+f.length);l=l||event;f=l.keyCode;j=e.selection?e.selection.createRange().text.length>0:h.selectionStart!=h.selectionEnd;if(h.value.length>=g&&(f>47||f==32||f==0||f==13)&&!l.ctrlKey&&!l.altKey&&!j)return h.value=h.value.substring(0,g),typeof d=="function"&&d(),!1},h.onkeyup=function(){var j=h.value.match(/\r/g),f=0,e=0;g=a;if(j!=null){for(var k=0;k<=j.length;k++)h.value.indexOf("\n",e)<=parseInt(a)&&(f++,e=h.value.indexOf("\n",e)+1);g=parseInt(a)+f}if(h.value.length>
g)return h.value=h.value.substring(0,g),typeof d=="function"&&d(),this};else return this});return this}})})(jQuery,this,this.document);
(function(a,i,e){a.beautyOfCode={settings:{autoLoad:!0,baseUrl:"http://alexgorbatchev.com.s3.amazonaws.com/pub/sh/2.1.382/",scripts:"scripts/",styles:"styles/",theme:"Default",brushes:["Plain"],target:".sh",config:{debug:!1},defaults:{},ready:function(){a.beautyOfCode.beautifyAll()}},init:function(d){d=a.extend({},a.beautyOfCode.settings,d);if(!d.config.clipboardSwf)d.config.clipboardSwf=d.baseUrl+d.scripts+"clipboard.swf";a(e).ready(function(){if(d.autoLoad){a.beautyOfCode.utils.loadCss(d.baseUrl+
d.styles+"shCore.css");a.beautyOfCode.utils.loadCss(d.baseUrl+d.styles+"shTheme"+d.theme+".css","shTheme");var b=[];d.debug==!0?b.push(d.baseUrl+"src/shCore.js"):b.push(d.baseUrl+d.scripts+"shCore.js");a.each(d.brushes,function(a,h){b.push(d.baseUrl+d.scripts+"shBrush"+h+".js")});a.beautyOfCode.utils.loadAllScripts(b,function(){d&&d.config&&a.extend(SyntaxHighlighter.config,d.config);d&&d.defaults&&a.extend(SyntaxHighlighter.defaults,d.defaults);d.ready()})}else d.ready()})},beautifyAll:function(d){var d=
a.extend({},a.beautyOfCode.settings,d),b=this;a(d.target).each(function(){var c=a(this);b.dom_cache.push(c);c=b.utils.getBrush(c.data().brush);a.inArray(c,d.brushes)===-1&&d.brushes.push(c)});d.ready=function(){for(var a=0;a<=b.dom_cache.length-1;a++){var d=b.dom_cache[a];d.beautifyCode(d.data().brush)}};a.beautyOfCode.init(d)},dom_cache:[],utils:{loaded:[],loadScript:function(d,b){var c=this;a.inArray(d,this.loaded)===-1?a.ajax({url:d,complete:function(){b();c.loaded.push(d)},type:"GET",dataType:"script",
cache:!0}):b()},loadAllScripts:function(d,b){!d||d.length==0?b():a.beautyOfCode.utils.loadScript(d[0],function(){a.beautyOfCode.utils.loadAllScripts(d.slice(1,d.length),b)})},loadCss:function(d,b){var c=a("head")[0];if(d&&c){var h=e.createElement("link");h.setAttribute("rel","stylesheet");h.setAttribute("href",d);if(b)h.id=b;c.appendChild(h)}},addCss:function(d,b){var c=a("head")[0];if(d&&c){var h=e.createElement("style");h.setAttribute("type","text/css");if(b)h.id=b;h.styleSheet?h.styleSheet.cssText=
d:a(h).text(d);c.appendChild(h)}},addCssForBrush:function(d,b){if(!d.isCssInitialized)a.beautyOfCode.utils.addCss(b.Style),d.isCssInitialized=!0},getBrush:function(a){var b={AppleScript:["applescript"],AS3:["actionscript3","as3","as"],Bash:["bash","shell"],ColdFusion:["coldfusion","cf"],Cpp:["cpp","c","h","hpp"],CSharp:["c#","c-sharp","csharp","cs"],Css:["css"],Delphi:["delphi","pascal","pas"],Diff:["diff","patch"],Erlang:["erl","erlang"],Groovy:["groovy"],Java:["java"],JavaFX:["jfx","javafx"],JScript:["js",
"jscript","javascript","json"],Perl:["perl","pl"],Php:["php"],Plain:["text","plain"],Python:["py","python"],Ruby:["ruby","rails","ror","rb"],Sass:["sass","scss"],Scala:["scala"],Sql:["sql"],Vb:["vb","vbnet"],Xml:["xml","xhtml","xslt","html"]},c;for(c in b)for(var h=0;h<=b[c].length-1;h++)if(b[c][h]==a)return c;return"Plain"}}};a.fn.beautifyCode=function(d,b){this.each(function(d,h){var f=a(h),j=f.data(),g={"class-name":j.className,"first-line":j.firstLine,"tab-size":j.tabSize,"smart-tabs":j.smartTabs,
ruler:j.ruler,gutter:j.gutter,highlight:j.highlight,toolbar:j.toolbar,collapse:j.collapse,"auto-links":j.autoLinks,light:j.light,"wrap-lines":j.warpLines,"html-script":j.htmlScript},j=j.brush?j.brush:"plain",l=f.text();a.browser.msie&&a.browser.version>9&&(l=l.replace(/\x0D\x0A|\x0D|\x0A/g,"\n\r"));g=a.extend({},SyntaxHighlighter.defaults,b,g);if(g["html-script"]==!0)highlighter=new SyntaxHighlighter.HtmlScript(j);else if(j=SyntaxHighlighter.utils.findBrush(j))highlighter=new j;else return;a.beautyOfCode.utils.addCssForBrush(j,
highlighter);highlighter.highlight(l,g);highlighter.source=h;f.replaceWith(highlighter.div)})}})(jQuery,this,this.document);
(function(a,i,e){function d(d,g,b){b=i.createElement("div");if(d)b.id=n+d;b.style.cssText=g||"";return a(b)}function b(a,d){return Math.round((/%/.test(a)?(d==="x"?B.width():B.height())/100:1)*parseInt(a,10))}function c(a){return o.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(a)}function h(d){o=a.extend({},a.data(C,m));for(d in o)a.isFunction(o[d])&&d.substring(0,2)!=="on"&&(o[d]=o[d].call(C));o.rel=o.rel||C.rel||"nofollow";o.href=o.href||a(C).attr("href");o.title=o.title||C.title;
if(typeof o.href==="string")o.href=a.trim(o.href)}function f(d,g){g&&g.call(C);a.event.trigger(d)}function j(){var a,d=n+"Slideshow_",g="click."+n,b,c;o.slideshow&&w[1]?(b=function(){M.text(o.slideshowStop).unbind(g).bind(s,function(){if(x<w.length-1||o.loop)a=setTimeout(u.next,o.slideshowSpeed)}).bind(p,function(){clearTimeout(a)}).one(g+" "+r,c);z.removeClass(d+"off").addClass(d+"on");a=setTimeout(u.next,o.slideshowSpeed)},c=function(){clearTimeout(a);M.text(o.slideshowStart).unbind([s,p,r,g].join(" ")).one(g,
b);z.removeClass(d+"on").addClass(d+"off")},o.slideshowAuto?b():c()):z.removeClass(d+"off "+d+"on")}function g(d){if(!T){C=d;h();w=a(C);x=0;o.rel!=="nofollow"&&(w=a("."+k).filter(function(){return(a.data(this,m).rel||this.rel)===o.rel}),x=w.index(C),x===-1&&(w=w.add(C),x=w.length-1));if(!F){F=N=!0;z.show();if(o.returnFocus)try{C.blur(),a(C).one(t,function(){try{this.focus()}catch(a){}})}catch(g){}I.css({opacity:+o.opacity,cursor:o.overlayClose?"pointer":"auto"}).show();o.w=b(o.initialWidth,"x");o.h=
b(o.initialHeight,"y");u.position();O&&B.bind("resize."+U+" scroll."+U,function(){I.css({width:B.width(),height:B.height(),top:B.scrollTop(),left:B.scrollLeft()})}).trigger("resize."+U);f(q,o.onOpen);V.add(W).hide();X.html(o.close).show()}u.load(!0)}}var l={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,
opacity:0.9,preloading:!0,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:!1,returnFocus:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:!1},m="colorbox",n="cbox",k=n+"Element",q=n+"_open",p=n+"_load",s=n+"_complete",r=n+"_cleanup",t=n+"_closed",
v=n+"_purge",D=a.browser.msie&&!a.support.opacity,O=D&&a.browser.version<7,U=n+"_IE6",I,z,L,E,Y,Z,$,aa,w,B,A,P,Q,W,ba,M,R,S,X,V,o,J,K,G,H,C,x,y,F,N,T,ca,da,u;u=a.fn[m]=a[m]=function(d,b){var c=this,d=d||{};if(!c[0]){if(c.selector)return c;c=a("<a/>");d.open=!0}if(b)d.onComplete=b;c.each(function(){a.data(this,m,a.extend({},a.data(this,m)||l,d));a(this).addClass(k)});(a.isFunction(d.open)&&d.open.call(c)||d.open)&&g(c[0]);return c};u.init=function(){B=a(e);z=d().attr({id:m,"class":D?n+(O?"IE6":"IE"):
""});I=d("Overlay",O?"position:absolute":"").hide();L=d("Wrapper");E=d("Content").append(A=d("LoadedContent","width:0; height:0; overflow:hidden"),Q=d("LoadingOverlay").add(d("LoadingGraphic")),W=d("Title"),ba=d("Current"),R=d("Next"),S=d("Previous"),M=d("Slideshow").bind(q,j),X=d("Close"));L.append(d().append(d("TopLeft"),Y=d("TopCenter"),d("TopRight")),d(!1,"clear:left").append(Z=d("MiddleLeft"),E,$=d("MiddleRight")),d(!1,"clear:left").append(d("BottomLeft"),aa=d("BottomCenter"),d("BottomRight"))).children().children().css({"float":"left"});
P=d(!1,"position:absolute; width:9999px; visibility:hidden; display:none");a("body").prepend(I,z.append(L,P));E.children().hover(function(){a(this).addClass("hover")},function(){a(this).removeClass("hover")}).addClass("hover");J=Y.height()+aa.height()+E.outerHeight(!0)-E.height();K=Z.width()+$.width()+E.outerWidth(!0)-E.width();G=A.outerHeight(!0);H=A.outerWidth(!0);z.css({"padding-bottom":J,"padding-right":K}).hide();R.click(function(){u.next()});S.click(function(){u.prev()});X.click(function(){u.close()});
V=R.add(S).add(ba).add(M);E.children().removeClass("hover");I.click(function(){o.overlayClose&&u.close()});a(i).bind("keydown."+n,function(a){var d=a.keyCode;F&&o.escKey&&d===27&&(a.preventDefault(),u.close());F&&o.arrowKey&&w[1]&&(d===37?(a.preventDefault(),S.click()):d===39&&(a.preventDefault(),R.click()))})};u.remove=function(){z.add(I).remove();a("."+k).removeData(m).removeClass(k)};u.position=function(a,d){function g(a){Y[0].style.width=aa[0].style.width=E[0].style.width=a.style.width;Q[0].style.height=
Q[1].style.height=E[0].style.height=Z[0].style.height=$[0].style.height=a.style.height}var c=0,j=0;B.unbind("resize."+n);z.hide();o.fixed&&!O?z.css({position:"fixed"}):(c=B.scrollTop(),j=B.scrollLeft(),z.css({position:"absolute"}));j+=o.right!==!1?Math.max(B.width()-o.w-H-K-b(o.right,"x"),0):o.left!==!1?b(o.left,"x"):Math.round(Math.max(B.width()-o.w-H-K,0)/2);c+=o.bottom!==!1?Math.max(i.documentElement.clientHeight-o.h-G-J-b(o.bottom,"y"),0):o.top!==!1?b(o.top,"y"):Math.round(Math.max(i.documentElement.clientHeight-
o.h-G-J,0)/2);z.show();a=z.width()===o.w+H&&z.height()===o.h+G?0:a||0;L[0].style.width=L[0].style.height="9999px";z.dequeue().animate({width:o.w+H,height:o.h+G,top:c,left:j},{duration:a,complete:function(){g(this);N=!1;L[0].style.width=o.w+H+K+"px";L[0].style.height=o.h+G+J+"px";d&&d();setTimeout(function(){B.bind("resize."+n,u.position)},1)},step:function(){g(this)}})};u.resize=function(a){if(F){a=a||{};if(a.width)o.w=b(a.width,"x")-H-K;if(a.innerWidth)o.w=b(a.innerWidth,"x");A.css({width:o.w});
if(a.height)o.h=b(a.height,"y")-G-J;if(a.innerHeight)o.h=b(a.innerHeight,"y");if(!a.innerHeight&&!a.height)a=A.wrapInner("<div style='overflow:auto'></div>").children(),o.h=a.height(),a.replaceWith(a.children());A.css({height:o.h});u.position(o.transition==="none"?0:o.speed)}};u.prep=function(g){if(F){var b,j=o.transition==="none"?0:o.speed;A.remove();A=d("LoadedContent").append(g);A.hide().appendTo(P.show()).css({width:function(){o.w=o.w||A.width();o.w=o.mw&&o.mw<o.w?o.mw:o.w;return o.w}(),overflow:o.scrolling?
"auto":"hidden"}).css({height:function(){o.h=o.h||A.height();o.h=o.mh&&o.mh<o.h?o.mh:o.h;return o.h}()}).prependTo(E);P.hide();a(y).css({"float":"none"});if(O)a("select").not(z.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(r,function(){this.style.visibility="inherit"});b=function(){function d(){D&&z[0].style.removeAttribute("filter")}var g,b,l,h;b=w.length;var k,e;if(F){e=function(){clearTimeout(da);Q.hide();f(s,o.onComplete)};D&&y&&A.fadeIn(100);
W.html(o.title).add(A).show();if(b>1){if(typeof o.current==="string"&&ba.html(o.current.replace("{current}",x+1).replace("{total}",b)).show(),R[o.loop||x<b-1?"show":"hide"]().html(o.next),S[o.loop||x?"show":"hide"]().html(o.previous),g=x?w[x-1]:w[b-1],l=x<b-1?w[x+1]:w[0],o.slideshow&&M.show(),o.preloading){h=a.data(l,m).href||l.href;b=a.data(g,m).href||g.href;h=a.isFunction(h)?h.call(l):h;b=a.isFunction(b)?b.call(g):b;if(c(h))a("<img/>")[0].src=h;if(c(b))a("<img/>")[0].src=b}}else V.hide();if(o.iframe){k=
a("<iframe/>").addClass(n+"Iframe")[0];if(o.fastIframe)e();else a(k).one("load",e);k.name=n+ +new Date;k.src=o.href;if(!o.scrolling)k.scrolling="no";if(D)k.frameBorder=0,k.allowTransparency="true";a(k).appendTo(A).one(v,function(){k.src="//about:blank"})}else e();o.transition==="fade"?z.fadeTo(j,1,d):d()}};o.transition==="fade"?z.fadeTo(j,0,function(){u.position(0,b)}):u.position(j,b)}};u.load=function(g){var j,l,k=u.prep;N=!0;y=!1;C=w[x];g||h();f(v);f(p,o.onLoad);o.h=o.height?b(o.height,"y")-G-J:
o.innerHeight&&b(o.innerHeight,"y");o.w=o.width?b(o.width,"x")-H-K:o.innerWidth&&b(o.innerWidth,"x");o.mw=o.w;o.mh=o.h;if(o.maxWidth)o.mw=b(o.maxWidth,"x")-H-K,o.mw=o.w&&o.w<o.mw?o.w:o.mw;if(o.maxHeight)o.mh=b(o.maxHeight,"y")-G-J,o.mh=o.h&&o.h<o.mh?o.h:o.mh;j=o.href;da=setTimeout(function(){Q.show()},100);o.inline?(d().hide().insertBefore(a(j)[0]).one(v,function(){a(this).replaceWith(A.children())}),k(a(j))):o.iframe?k(" "):o.html?k(o.html):c(j)?(a(y=new Image).addClass(n+"Photo").error(function(){o.title=
!1;k(d("Error").text("This image could not be loaded"))}).load(function(){var a;y.onload=null;o.scalePhotos&&(l=function(){y.height-=y.height*a;y.width-=y.width*a},o.mw&&y.width>o.mw&&(a=(y.width-o.mw)/y.width,l()),o.mh&&y.height>o.mh&&(a=(y.height-o.mh)/y.height,l()));if(o.h)y.style.marginTop=Math.max(o.h-y.height,0)/2+"px";if(w[1]&&(x<w.length-1||o.loop))y.style.cursor="pointer",y.onclick=function(){u.next()};if(D)y.style.msInterpolationMode="bicubic";setTimeout(function(){k(y)},1)}),setTimeout(function(){y.src=
j},1)):j&&P.load(j,o.data,function(g,b,c){k(b==="error"?d("Error").text("Request unsuccessful: "+c.statusText):a(this).contents())})};u.next=function(){if(!N&&w[1]&&(x<w.length-1||o.loop))x=x<w.length-1?x+1:0,u.load()};u.prev=function(){if(!N&&w[1]&&(x||o.loop))x=x?x-1:w.length-1,u.load()};u.close=function(){F&&!T&&(T=!0,F=!1,f(r,o.onCleanup),B.unbind("."+n+" ."+U),I.fadeTo(200,0),z.stop().fadeTo(300,0,function(){z.add(I).css({opacity:1,cursor:"auto"}).hide();f(v);A.remove();setTimeout(function(){T=
!1;f(t,o.onClosed)},1)}))};u.element=function(){return a(C)};u.settings=l;ca=function(a){a.button!==0&&typeof a.button!=="undefined"||a.ctrlKey||a.shiftKey||a.altKey||(a.preventDefault(),g(this))};a.fn.delegate?a(i).delegate("."+k,"click",ca):a("."+k).live("click",ca);a(u.init)})(jQuery,document,this);
jQuery.cookie=function(a,i,e){if(arguments.length>1&&String(i)!=="[object Object]"){e=jQuery.extend({},e);if(i===null||i===void 0)e.expires=-1;if(typeof e.expires==="number"){var d=e.expires,b=e.expires=new Date;b.setDate(b.getDate()+d)}i=String(i);return document.cookie=[encodeURIComponent(a),"=",e.raw?i:encodeURIComponent(i),e.expires?"; expires="+e.expires.toUTCString():"",e.path?"; path="+e.path:"",e.domain?"; domain="+e.domain:"",e.secure?"; secure":""].join("")}e=i||{};b=e.raw?function(a){return a}:
decodeURIComponent;return(d=RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?b(d[1]):null};
(function(a){a._i18n={trans:{},"default":"en",language:"en"};a.i18n=function(){var i=function(d,b){var c=!1;a._i18n.trans[a._i18n.language]&&a._i18n.trans[a._i18n.language][d]&&a._i18n.trans[a._i18n.language][d][b]?c=a._i18n.trans[a._i18n.language][d][b]:a._i18n.trans[a._i18n["default"]]&&a._i18n.trans[a._i18n["default"]][d]&&a._i18n.trans[a._i18n["default"]][d][b]&&(c=a._i18n.trans[a._i18n["default"]][d][b]);return c||b};if(arguments.length<2)return a._i18n.language=arguments[0],a._i18n.language;
else if(typeof arguments[1]=="string")return i=i(arguments[0],arguments[1]),arguments[2]&&typeof arguments[2]=="object"?a.format(i,arguments[2]):i;else{var e=arguments[0].split("."),i=e[0],e=e[1]||"jQuery";a._i18n.trans[i]||(a._i18n.trans[i]={});a._i18n.trans[i][e]?a.extend(a._i18n.trans[i][e],arguments[1]):a._i18n.trans[i][e]=arguments[1]}}})(jQuery);
(function(a){function i(e,d){var b=function(d){d=a[e][d]||[];return typeof d=="string"?d.split(/,?\s+/):d}("getter");return a.inArray(d,b)!=-1}a.fn.jPlayer=function(e){var d=typeof e=="string",b=Array.prototype.slice.call(arguments,1);if(d&&e.substring(0,1)=="_")return this;if(d&&i("jPlayer",e,b)){var c=a.data(this[0],"jPlayer");return c?c[e].apply(c,b):void 0}return this.each(function(){var c=a.data(this,"jPlayer");!c&&!d&&a.data(this,"jPlayer",new a.jPlayer(this,e))._init();c&&d&&a.isFunction(c[e])&&
c[e].apply(c,b)})};a.jPlayer=function(e,d){this.options=a.extend({},d);this.element=a(e)};a.jPlayer.getter="jPlayerOnProgressChange jPlayerOnSoundComplete jPlayerVolume jPlayerReady getData jPlayerController";a.jPlayer.defaults={cssPrefix:"jqjp",swfPath:"js",volume:80,oggSupport:!1,nativeSupport:!0,preload:"none",customCssIds:!1,graphicsFix:!0,errorAlerts:!1,warningAlerts:!1,position:"absolute",width:"0",height:"0",top:"0",left:"0",quality:"high",bgcolor:"#ffffff"};a.jPlayer._config={version:"1.2.0",
swfVersionRequired:"1.2.0",swfVersion:"unknown",jPlayerControllerId:void 0,delayedCommandId:void 0,isWaitingForPlay:!1,isFileSet:!1};a.jPlayer._diag={isPlaying:!1,src:"",loadPercent:0,playedPercentRelative:0,playedPercentAbsolute:0,playedTime:0,totalTime:0};a.jPlayer._cssId={play:"jplayer_play",pause:"jplayer_pause",stop:"jplayer_stop",loadBar:"jplayer_load_bar",playBar:"jplayer_play_bar",volumeMin:"jplayer_volume_min",volumeMax:"jplayer_volume_max",volumeBar:"jplayer_volume_bar",volumeBarValue:"jplayer_volume_bar_value"};
a.jPlayer.count=0;a.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};a.jPlayer.convertTime=function(e){var d=new Date(e),b=d.getUTCHours(),e=d.getUTCMinutes(),d=d.getUTCSeconds(),b=a.jPlayer.timeFormat.padHour&&b<10?"0"+b:b,e=a.jPlayer.timeFormat.padMin&&e<10?"0"+e:e,d=a.jPlayer.timeFormat.padSec&&d<10?"0"+d:d;return(a.jPlayer.timeFormat.showHour?b+a.jPlayer.timeFormat.sepHour:"")+(a.jPlayer.timeFormat.showMin?e+a.jPlayer.timeFormat.sepMin:
"")+(a.jPlayer.timeFormat.showSec?d+a.jPlayer.timeFormat.sepSec:"")};a.jPlayer.prototype={_init:function(){var e=this,d=this.element;this.config=a.extend({},a.jPlayer.defaults,this.options,a.jPlayer._config);this.config.diag=a.extend({},a.jPlayer._diag);this.config.cssId={};this.config.cssSelector={};this.config.cssDisplay={};this.config.clickHandler={};this.element.data("jPlayer.config",this.config);a.extend(this.config,{id:this.element.attr("id"),swf:this.config.swfPath+(this.config.swfPath!=""&&
this.config.swfPath.slice(-1)!="/"?"/":"")+"Jplayer.swf",fid:this.config.cssPrefix+"_flash_"+a.jPlayer.count,aid:this.config.cssPrefix+"_audio_"+a.jPlayer.count,hid:this.config.cssPrefix+"_force_"+a.jPlayer.count,i:a.jPlayer.count,volume:this._limitValue(this.config.volume,0,100),autobuffer:this.config.preload!="none"});a.jPlayer.count++;if(this.config.ready!=void 0)a.isFunction(this.config.ready)?this.jPlayerReadyCustom=this.config.ready:this._warning("Constructor's ready option is not a function.");
this.config.audio=document.createElement("audio");this.config.audio.id=this.config.aid;a.extend(this.config,{canPlayMP3:!(!this.config.audio.canPlayType||!(""!=this.config.audio.canPlayType("audio/mpeg")&&"no"!=this.config.audio.canPlayType("audio/mpeg"))),canPlayOGG:!(!this.config.audio.canPlayType||!(""!=this.config.audio.canPlayType("audio/ogg")&&"no"!=this.config.audio.canPlayType("audio/ogg"))),aSel:a("#"+this.config.aid)});a.extend(this.config,{html5:!!(this.config.oggSupport?this.config.canPlayOGG||
this.config.canPlayMP3:this.config.canPlayMP3)});a.extend(this.config,{usingFlash:!(this.config.html5&&this.config.nativeSupport),usingMP3:!(this.config.oggSupport&&this.config.canPlayOGG&&this.config.nativeSupport)});var b={setButtons:function(a,d){e.config.diag.isPlaying=d;e.config.cssId.play!=void 0&&e.config.cssId.pause!=void 0&&(d?(e.config.cssSelector.play.css("display","none"),e.config.cssSelector.pause.css("display",e.config.cssDisplay.pause)):(e.config.cssSelector.play.css("display",e.config.cssDisplay.play),
e.config.cssSelector.pause.css("display","none")));if(d)e.config.isWaitingForPlay=!1}},c={setFile:function(a,g){try{e._getMovie().fl_setFile_mp3(g),e.config.autobuffer&&d.trigger("jPlayer.load"),e.config.diag.src=g,e.config.isFileSet=!0,d.trigger("jPlayer.setButtons",!1)}catch(b){e._flashError(b)}},clearFile:function(){try{d.trigger("jPlayer.setButtons",!1),e._getMovie().fl_clearFile_mp3(),e.config.diag.src="",e.config.isFileSet=!1}catch(a){e._flashError(a)}},load:function(){try{e._getMovie().fl_load_mp3()}catch(a){e._flashError(a)}},
play:function(){try{e._getMovie().fl_play_mp3()&&d.trigger("jPlayer.setButtons",!0)}catch(a){e._flashError(a)}},pause:function(){try{e._getMovie().fl_pause_mp3()&&d.trigger("jPlayer.setButtons",!1)}catch(a){e._flashError(a)}},stop:function(){try{e._getMovie().fl_stop_mp3()&&d.trigger("jPlayer.setButtons",!1)}catch(a){e._flashError(a)}},playHead:function(a,g){try{e._getMovie().fl_play_head_mp3(g)&&d.trigger("jPlayer.setButtons",!0)}catch(b){e._flashError(b)}},playHeadTime:function(a,g){try{e._getMovie().fl_play_head_time_mp3(g)&&
d.trigger("jPlayer.setButtons",!0)}catch(b){e._flashError(b)}},volume:function(a,d){e.config.volume=d;try{e._getMovie().fl_volume_mp3(d)}catch(b){e._flashError(b)}}},h={setFile:function(a,g,b){e.config.diag.src=e.config.usingMP3?g:b;e.config.isFileSet&&!e.config.isWaitingForPlay&&d.trigger("jPlayer.pause");e.config.audio.autobuffer=e.config.autobuffer;e.config.audio.preload=e.config.preload;e.config.autobuffer?(e.config.audio.src=e.config.diag.src,e.config.audio.load()):e.config.isWaitingForPlay=
!0;e.config.isFileSet=!0;e.jPlayerOnProgressChange(0,0,0,0,0);clearInterval(e.config.jPlayerControllerId);if(e.config.autobuffer)e.config.jPlayerControllerId=window.setInterval(function(){e.jPlayerController(!1)},100);clearInterval(e.config.delayedCommandId)},clearFile:function(){e.setFile("","");e.config.isWaitingForPlay=!1;e.config.isFileSet=!1},load:function(){if(e.config.isFileSet&&e.config.isWaitingForPlay)e.config.audio.autobuffer=!0,e.config.audio.preload="auto",e.config.audio.src=e.config.diag.src,
e.config.audio.load(),e.config.isWaitingForPlay=!1,clearInterval(e.config.jPlayerControllerId),e.config.jPlayerControllerId=window.setInterval(function(){e.jPlayerController(!1)},100)},play:function(){if(e.config.isFileSet){if(e.config.isWaitingForPlay)e.config.audio.src=e.config.diag.src,e.config.audio.load();e.config.audio.play();d.trigger("jPlayer.setButtons",!0);clearInterval(e.config.jPlayerControllerId);e.config.jPlayerControllerId=window.setInterval(function(){e.jPlayerController(!1)},100);
clearInterval(e.config.delayedCommandId)}},pause:function(){e.config.isFileSet&&(e.config.audio.pause(),d.trigger("jPlayer.setButtons",!1),clearInterval(e.config.delayedCommandId))},stop:function(){if(e.config.isFileSet)try{d.trigger("jPlayer.pause"),e.config.audio.currentTime=0,clearInterval(e.config.jPlayerControllerId),e.config.jPlayerControllerId=window.setInterval(function(){e.jPlayerController(!0)},100)}catch(a){clearInterval(e.config.delayedCommandId),e.config.delayedCommandId=window.setTimeout(function(){e.stop()},
100)}},playHead:function(a,g){if(e.config.isFileSet)try{d.trigger("jPlayer.load");if(typeof e.config.audio.buffered=="object"&&e.config.audio.buffered.length>0)e.config.audio.currentTime=g*e.config.audio.buffered.end(e.config.audio.buffered.length-1)/100;else if(e.config.audio.duration>0&&!isNaN(e.config.audio.duration))e.config.audio.currentTime=g*e.config.audio.duration/100;else throw"e";d.trigger("jPlayer.play")}catch(b){d.trigger("jPlayer.play"),d.trigger("jPlayer.pause"),e.config.delayedCommandId=
window.setTimeout(function(){e.playHead(g)},100)}},playHeadTime:function(a,g){if(e.config.isFileSet)try{d.trigger("jPlayer.load"),e.config.audio.currentTime=g/1E3,d.trigger("jPlayer.play")}catch(b){d.trigger("jPlayer.play"),d.trigger("jPlayer.pause"),e.config.delayedCommandId=window.setTimeout(function(){e.playHeadTime(g)},100)}},volume:function(a,d){e.config.volume=d;e.config.audio.volume=d/100;e.jPlayerVolume(d)}};this.config.usingFlash?a.extend(b,c):a.extend(b,h);for(var f in b)c="jPlayer."+f,
this.element.unbind(c),this.element.bind(c,b[f]);if(this.config.usingFlash)if(this._checkForFlash(8))if(a.browser.msie){f='<object id="'+this.config.fid+'"';f+=' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"';f+=' codebase="'+document.URL.substring(0,document.URL.indexOf(":"))+'://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"';f+=' type="application/x-shockwave-flash"';f+=' width="'+this.config.width+'" height="'+this.config.height+'">';f+="</object>";b=[];b[0]='<param name="movie" value="'+
this.config.swf+'" />';b[1]='<param name="quality" value="high" />';b[2]='<param name="FlashVars" value="id='+escape(this.config.id)+"&fid="+escape(this.config.fid)+"&vol="+this.config.volume+'" />';b[3]='<param name="allowScriptAccess" value="always" />';b[4]='<param name="bgcolor" value="'+this.config.bgcolor+'" />';f=document.createElement(f);for(c=0;c<b.length;c++)f.appendChild(document.createElement(b[c]));this.element.html(f)}else b='<embed name="'+this.config.fid+'" id="'+this.config.fid+'" src="'+
this.config.swf+'"',b+=' width="'+this.config.width+'" height="'+this.config.height+'" bgcolor="'+this.config.bgcolor+'"',b+=' quality="high" FlashVars="id='+escape(this.config.id)+"&fid="+escape(this.config.fid)+"&vol="+this.config.volume+'"',b+=' allowScriptAccess="always"',b+=' type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />',this.element.html(b);else this.element.html("<p>Flash 8 or above is not installed. <a href='http://get.adobe.com/flashplayer'>Get Flash!</a></p>");
else this.config.audio.autobuffer=this.config.autobuffer,this.config.audio.preload=this.config.preload,this.config.audio.addEventListener("canplay",function(){var a=0.1*Math.random();e.config.audio.volume=(e.config.volume+(e.config.volume<50?a:-a))/100},!1),this.config.audio.addEventListener("ended",function(){clearInterval(e.config.jPlayerControllerId);e.jPlayerOnSoundComplete()},!1),this.element.append(this.config.audio);this.element.css({position:this.config.position,top:this.config.top,left:this.config.left});
this.config.graphicsFix&&(this.element.append('<div id="'+this.config.hid+'"></div>'),a.extend(this.config,{hSel:a("#"+this.config.hid)}),this.config.hSel.css({"text-indent":"-9999px"}));this.config.customCssIds||a.each(a.jPlayer._cssId,function(a,d){e.cssId(a,d)});this.config.usingFlash||(this.element.css({left:"-9999px"}),window.setTimeout(function(){e.volume(e.config.volume);e.jPlayerReady()},100))},jPlayerReady:function(a){this.config.usingFlash?(this.config.swfVersion=a,this.config.swfVersionRequired!=
this.config.swfVersion&&this._error("jPlayer's JavaScript / SWF version mismatch!\n\nJavaScript requires SWF : "+this.config.swfVersionRequired+"\nThe Jplayer.swf used is : "+this.config.swfVersion)):this.config.swfVersion="n/a";this.jPlayerReadyCustom()},jPlayerReadyCustom:function(){},setFile:function(a,d){this.element.trigger("jPlayer.setFile",[a,d])},clearFile:function(){this.element.trigger("jPlayer.clearFile")},load:function(){this.element.trigger("jPlayer.load")},play:function(){this.element.trigger("jPlayer.play")},
pause:function(){this.element.trigger("jPlayer.pause")},stop:function(){this.element.trigger("jPlayer.stop")},playHead:function(a){this.element.trigger("jPlayer.playHead",[a])},playHeadTime:function(a){this.element.trigger("jPlayer.playHeadTime",[a])},volume:function(a){a=this._limitValue(a,0,100);this.element.trigger("jPlayer.volume",[a])},cssId:function(e,d){var b=this;if(typeof d=="string")if(a.jPlayer._cssId[e]){this.config.cssId[e]!=void 0&&this.config.cssSelector[e].unbind("click",this.config.clickHandler[e]);
this.config.cssId[e]=d;this.config.cssSelector[e]=a("#"+d);this.config.clickHandler[e]=function(d){b[e](d);a(this).blur();return!1};this.config.cssSelector[e].click(this.config.clickHandler[e]);var c=this.config.cssSelector[e].css("display");e=="play"&&(this.config.cssDisplay.pause=c);e=="pause"&&c=="none"||(this.config.cssDisplay[e]=c,e=="pause"&&this.config.cssSelector[e].css("display","none"))}else this._warning("Unknown/Illegal function in cssId\n\njPlayer('cssId', '"+e+"', '"+d+"')");else this._warning("cssId CSS Id must be a string\n\njPlayer('cssId', '"+
e+"', "+d+")")},loadBar:function(a){if(this.config.cssId.loadBar!=void 0){var d=this.config.cssSelector.loadBar.offset(),a=a.pageX-d.left,d=this.config.cssSelector.loadBar.width();this.playHead(100*a/d)}},playBar:function(a){this.loadBar(a)},onProgressChange:function(e){a.isFunction(e)?this.onProgressChangeCustom=e:this._warning("onProgressChange parameter is not a function.")},onProgressChangeCustom:function(){},jPlayerOnProgressChange:function(a,d,b,c,h){this.config.diag.loadPercent=a;this.config.diag.playedPercentRelative=
d;this.config.diag.playedPercentAbsolute=b;this.config.diag.playedTime=c;this.config.diag.totalTime=h;this.config.cssId.loadBar!=void 0&&this.config.cssSelector.loadBar.width(a+"%");this.config.cssId.playBar!=void 0&&this.config.cssSelector.playBar.width(d+"%");this.onProgressChangeCustom(a,d,b,c,h);this._forceUpdate()},jPlayerController:function(a){var d=0,b=0,c=0,h=0,f=0;this.config.audio.readyState>=1&&(d=this.config.audio.currentTime*1E3,b=this.config.audio.duration*1E3,b=isNaN(b)?0:b,c=b>0?100*
d/b:0,typeof this.config.audio.buffered=="object"&&this.config.audio.buffered.length>0?(h=100*this.config.audio.buffered.end(this.config.audio.buffered.length-1)/this.config.audio.duration,f=100*this.config.audio.currentTime/this.config.audio.buffered.end(this.config.audio.buffered.length-1)):(h=100,f=c));!this.config.diag.isPlaying&&h>=100&&clearInterval(this.config.jPlayerControllerId);a?this.jPlayerOnProgressChange(h,0,0,0,b):this.jPlayerOnProgressChange(h,f,c,d,b)},volumeMin:function(){this.volume(0)},
volumeMax:function(){this.volume(100)},volumeBar:function(a){if(this.config.cssId.volumeBar!=void 0){var d=this.config.cssSelector.volumeBar.offset(),a=a.pageX-d.left,d=this.config.cssSelector.volumeBar.width();this.volume(100*a/d)}},volumeBarValue:function(a){this.volumeBar(a)},jPlayerVolume:function(a){this.config.cssId.volumeBarValue!=null&&(this.config.cssSelector.volumeBarValue.width(a+"%"),this._forceUpdate())},onSoundComplete:function(e){a.isFunction(e)?this.onSoundCompleteCustom=e:this._warning("onSoundComplete parameter is not a function.")},
onSoundCompleteCustom:function(){},jPlayerOnSoundComplete:function(){this.element.trigger("jPlayer.setButtons",!1);this.onSoundCompleteCustom()},getData:function(a){for(var d=a.split("."),b=this.config,c=0;c<d.length;c++)if(b[d[c]]!=void 0)b=b[d[c]];else{this._warning("Undefined data requested.\n\njPlayer('getData', '"+a+"')");return}return b},_getMovie:function(){return document[this.config.fid]},_checkForFlash:function(a){var d=!1,b;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+
a),d=!0}catch(c){}else navigator.plugins&&navigator.mimeTypes.length>0&&(b=navigator.plugins["Shockwave Flash"])&&navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")>=a&&(d=!0);return d},_forceUpdate:function(){this.config.graphicsFix&&this.config.hSel.text(""+Math.random())},_limitValue:function(a,d,b){return a<d?d:a>b?b:a},_flashError:function(a){this._error("Problem with Flash component.\n\nCheck the swfPath points at the Jplayer.swf path.\n\nswfPath = "+this.config.swfPath+
"\nurl: "+this.config.swf+"\n\nError: "+a.message)},_error:function(a){this.config.errorAlerts&&this._alert("Error!\n\n"+a)},_warning:function(a){this.config.warningAlerts&&this._alert("Warning!\n\n"+a)},_alert:function(a){alert("jPlayer "+this.config.version+" : id='"+this.config.id+"' : "+a)}}})(jQuery);
(function(){if(!jQuery||!jQuery.jstree){var a=!1,i=!1,e=!1;(function(d){d.vakata={};d.vakata.css={get_css:function(a,d,b){var a=a.toLowerCase(),c=b.cssRules||b.rules,f=0;do{if(c.length&&f>c.length+5)break;if(c[f].selectorText&&c[f].selectorText.toLowerCase()==a)return d===!0?(b.removeRule&&b.removeRule(f),b.deleteRule&&b.deleteRule(f),!0):c[f]}while(c[++f]);return!1},add_css:function(a,b){if(d.jstree.css.get_css(a,!1,b))return!1;b.insertRule?b.insertRule(a+" { }",0):b.addRule(a,null,0);return d.vakata.css.get_css(a)},
remove_css:function(a,b){return d.vakata.css.get_css(a,!0,b)},add_sheet:function(a){var b=!1,c=!0;if(a.str)return a.title&&(b=d("style[id='"+a.title+"-stylesheet']")[0]),b?c=!1:(b=document.createElement("style"),b.setAttribute("type","text/css"),a.title&&b.setAttribute("id",a.title+"-stylesheet")),b.styleSheet?c?(document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet.cssText=a.str):b.styleSheet.cssText=b.styleSheet.cssText+" "+a.str:(b.appendChild(document.createTextNode(a.str)),document.getElementsByTagName("head")[0].appendChild(b)),
b.sheet||b.styleSheet;if(a.url)if(document.createStyleSheet)try{document.createStyleSheet(a.url)}catch(f){}else return b=document.createElement("link"),b.rel="stylesheet",b.type="text/css",b.media="all",b.href=a.url,document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet}};var b=[],c=-1,h={},f={};d.fn.jstree=function(a){var g=typeof a=="string",c=Array.prototype.slice.call(arguments,1),f=this;if(g){if(a.substring(0,1)=="_")return f;this.each(function(){var g=b[d.data(this,"jstree_instance_id")],
g=g&&d.isFunction(g[a])?g[a].apply(g,c):g;if(typeof g!=="undefined"&&(a.indexOf("is_")===0||g!==!0&&g!==!1))return f=g,!1})}else this.each(function(){var g=d.data(this,"jstree_instance_id"),f=[],e=a?d.extend({},!0,a):{},m=d(this),i=!1,r=[],f=f.concat(c);m.data("jstree")&&f.push(m.data("jstree"));e=f.length?d.extend.apply(null,[!0,e].concat(f)):e;typeof g!=="undefined"&&b[g]&&b[g].destroy();g=parseInt(b.push({}),10)-1;d.data(this,"jstree_instance_id",g);e.plugins=d.isArray(e.plugins)?e.plugins:d.jstree.defaults.plugins.slice();
e.plugins.unshift("core");e.plugins=e.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");i=d.extend(!0,{},d.jstree.defaults,e);i.plugins=e.plugins;d.each(h,function(a){d.inArray(a,i.plugins)===-1?(i[a]=null,delete i[a]):r.push(a)});i.plugins=r;b[g]=new d.jstree._instance(g,d(this).addClass("jstree jstree-"+g),i);d.each(b[g]._get_settings().plugins,function(a,d){b[g].data[d]={}});d.each(b[g]._get_settings().plugins,function(a,d){h[d]&&
h[d].__init.apply(b[g])});setTimeout(function(){b[g]&&b[g].init()},0)});return f};d.jstree={defaults:{plugins:[]},_focused:function(){return b[c]||null},_reference:function(a){if(b[a])return b[a];var g=d(a);!g.length&&typeof a==="string"&&(g=d("#"+a));return!g.length?null:b[g.closest(".jstree").data("jstree_instance_id")]||null},_instance:function(a,b,c){this.data={core:{}};this.get_settings=function(){return d.extend(!0,{},c)};this._get_settings=function(){return c};this.get_index=function(){return a};
this.get_container=function(){return b};this.get_container_ul=function(){return b.children("ul:eq(0)")};this._set_settings=function(a){c=d.extend(!0,{},c,a)}},_fn:{},plugin:function(a,b){b=d.extend({},{__init:d.noop,__destroy:d.noop,_fn:{},defaults:!1},b);h[a]=b;d.jstree.defaults[a]=b.defaults;d.each(b._fn,function(b,g){g.plugin=a;g.old=d.jstree._fn[b];d.jstree._fn[b]=function(){var a,c=g,f=Array.prototype.slice.call(arguments);a=new d.Event("before.jstree");var j=!1;if(!(this.data.core.locked===
!0&&b!=="unlock"&&b!=="is_locked")){do{if(c&&c.plugin&&d.inArray(c.plugin,this._get_settings().plugins)!==-1)break;c=c.old}while(c);if(c){if(b.indexOf("_")===0)a=c.apply(this,f);else{a=this.get_container().triggerHandler(a,{func:b,inst:this,args:f,plugin:c.plugin});if(a===!1)return;typeof a!=="undefined"&&(f=a);a=c.apply(d.extend({},this,{__callback:function(a){this.get_container().triggerHandler(b+".jstree",{inst:this,args:f,rslt:a,rlbk:j})},__rollback:function(){return j=this.get_rollback()},__call_old:function(a){return c.old.apply(this,
a?Array.prototype.slice.call(arguments,1):f)}}),f)}return a}}};d.jstree._fn[b].old=g.old;d.jstree._fn[b].plugin=a})},rollback:function(a){a&&(d.isArray(a)||(a=[a]),d.each(a,function(a,d){b[d.i].set_rollback(d.h,d.d)}))}};d.jstree._fn=d.jstree._instance.prototype={};d(function(){var b=navigator.userAgent.toLowerCase(),g=(b.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],c=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(b)&&parseInt(g,10)==6){a=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(f){}c+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(b)&&
parseInt(g,10)==7&&(i=!0,c+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(b)&&/mozilla/.test(b)&&parseFloat(g,10)<1.9&&(e=!0,c+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");d.vakata.css.add_sheet({str:c,title:"jstree"})});d.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",d.proxy(function(a){this.toggle_node(d(a.target))},this)).bind("mousedown.jstree",d.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(){var a;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection();
try{a.removeAllRanges(),a.collapse()}catch(d){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",d.proxy(function(a,b){var c=this._get_node(b.rslt.obj),f=this;c===-1&&(c=this.get_container_ul());c.length&&c.find("li").each(function(){var a=d(this);a.data("jstree")&&d.each(a.data("jstree"),function(b,g){f.data[b]&&d.isFunction(f["_"+b+"_notify"])&&f["_"+b+"_notify"].call(f,a,g)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
d.proxy(function(a,b){var c=this._get_node(b.rslt.obj),f=this;c===-1&&(c=this.get_container_ul());c.length&&c.find("li.jstree-open:not(:has(ul))").each(function(){f.load_node(this,d.noop,d.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var a,g=this.get_index(),f=this._get_settings(),e=this;d.each(f.plugins,function(a,d){try{h[d].__destroy.apply(e)}catch(b){}});this.__callback();if(this.is_focused())for(a in b)if(b.hasOwnProperty(a)&&
a!=g){b[a].set_focus();break}g===c&&(c=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});d(document).unbind(".jstree-"+g).undelegate(".jstree-"+g);b[g]=null;delete b[g]},_core_notify:function(a,d){d.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var b=this,c=!0,f=[],h=[];if(!a&&(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=d.map(d.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=d.map(d.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length))this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open);if(this.data.core.to_load.length&&(d.each(this.data.core.to_load,function(a,b){if(b=="#")return!0;d(b).length?f.push(b):h.push(b)}),f.length))this.data.core.to_load=h,d.each(f,function(a,d){b._is_loaded(d)||(b.load_node(d,function(){b.reload_nodes(!0)},function(){b.reload_nodes(!0)}),
c=!1)});this.data.core.to_open.length&&d.each(this.data.core.to_open,function(a,d){b.open_node(d,!1,!0)});if(c)this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){b.__callback({},b)},50),this.data.core.refreshing=!1,this.reopen()},reopen:function(){var a=this;this.data.core.to_open.length&&d.each(this.data.core.to_open,function(d,b){a.open_node(b,!1,!0)});this.__callback({})},refresh:function(a){var d=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);a!==-1?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){d.__callback({obj:a});d.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=d.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");c=this.get_index();this.__callback()}},is_focused:function(){return c==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),c=
-1);this.__callback()},_get_node:function(a){var b=d(a,this.get_container());if(b.is(".jstree")||a==-1)return-1;b=b.closest("li",this.get_container());return b.length?b:!1},_get_next:function(a,d){a=this._get_node(a);return a===-1?this.get_container().find("> ul > li:first-child"):!a.length?!1:d?a.nextAll("li").size()>0?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):a.nextAll("li").size()>0?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0)},_get_prev:function(a,
d){a=this._get_node(a);if(a===-1)return this.get_container().find("> ul > li:last-child");if(!a.length)return!1;if(d)return a.prevAll("li").length>0?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}else{var b=a.parentsUntil(".jstree","li:eq(0)");return b.length?b:!1}},_get_parent:function(a){a=this._get_node(a);if(a==-1||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?
a:-1},_get_children:function(a){a=this._get_node(a);return a===-1?this.get_container().children("ul:eq(0)").children("li"):!a.length?!1:a.children("ul:eq(0)").children("li")},get_path:function(a,d){var b=[],c=this,a=this._get_node(a);if(a===-1||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){b.push(d?this.id:c.get_text(this))});b.reverse();b.push(d?a.attr("id"):this.get_text(a));return b},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=
this._get_node(a))&&a!==-1&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&a!==-1&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&a!==-1&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||a===-1)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(d,b,c){d=this._get_node(d);if(!d.length)return!1;if(!d.hasClass("jstree-closed"))return b&&
b.call(),!1;var f=c||a?0:this._get_settings().core.animation,h=this;this._is_loaded(d)?(this._get_settings().core.open_parents&&d.parentsUntil(".jstree",".jstree-closed").each(function(){h.open_node(this,!1,!0)}),f&&d.children("ul").css("display","none"),d.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),f?d.children("ul").stop(!0,!0).slideDown(f,function(){this.style.display="";h.after_open(d)}):h.after_open(d),this.__callback({obj:d}),b&&b.call()):
(d.children("a").addClass("jstree-loading"),this.load_node(d,function(){h.open_node(d,b,c)},b))},after_open:function(a){this.__callback({obj:a})},close_node:function(d,b){var d=this._get_node(d),c=b||a?0:this._get_settings().core.animation,f=this;if(!d.length||!d.hasClass("jstree-open"))return!1;c&&d.children("ul").attr("style","display:block !important");d.removeClass("jstree-open").addClass("jstree-closed");c?d.children("ul").stop(!0,!0).slideUp(c,function(){this.style.display="";f.after_close(d)}):
f.after_close(d);this.__callback({obj:d})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,d,b){a=a?this._get_node(a):-1;if(!a||a===-1)a=this.get_container_ul();b?a=a.find("li.jstree-closed"):(b=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").andSelf():a.find("li.jstree-closed"));var c=this;a.each(function(){var a=this;
c._is_loaded(this)?c.open_node(this,!1,!d):c.open_node(this,function(){c.open_all(a,d,b)},!d)});b.find("li.jstree-closed").length===0&&this.__callback({obj:b})},close_all:function(a,d){var b=this,a=a?this._get_node(a):this.get_container();if(!a||a===-1)a=this.get_container_ul();a.find("li.jstree-open").andSelf().each(function(){b.close_node(this,!d)});this.__callback({obj:a})},clean_node:function(a){a=a&&a!=-1?d(a):this.get_container_ul();a=a.is("li")?a.find("li").andSelf():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,d){this.get_container().empty().append(a);this.data=d;this.__callback()},load_node:function(a){this.__callback({obj:a})},_is_loaded:function(){return!0},create_node:function(a,b,c,f,h){var a=this._get_node(a),b=typeof b==="undefined"?"last":
b,k=d("<li />"),e=this._get_settings().core,p;if(a!==-1&&!a.length)return!1;if(!h&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,b,c,f,!0)}),!1;this.__rollback();typeof c==="string"&&(c={data:c});c||(c={});c.attr&&k.attr(c.attr);c.metadata&&k.data(c.metadata);c.state&&k.addClass("jstree-"+c.state);if(!c.data)c.data=this._get_string("new_node");if(!d.isArray(c.data))p=c.data,c.data=[],c.data.push(p);d.each(c.data,function(a,b){p=d("<a />");d.isFunction(b)&&(b=b.call(this,
c));if(typeof b=="string")p.attr("href","#")[e.html_titles?"html":"text"](b);else{if(!b.attr)b.attr={};if(!b.attr.href)b.attr.href="#";p.attr(b.attr)[e.html_titles?"html":"text"](b.title);b.language&&p.addClass(b.language)}p.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!b.icon&&c.icon)b.icon=c.icon;b.icon&&(b.icon.indexOf("/")===-1?p.children("ins").addClass(b.icon):p.children("ins").css("background","url('"+b.icon+"') center center no-repeat"));k.append(p)});k.prepend("<ins class='jstree-icon'>&#160;</ins>");
a===-1&&(a=this.get_container(),b==="before"&&(b="first"),b==="after"&&(b="last"));switch(b){case "before":a.before(k);p=this._get_parent(a);break;case "after":a.after(k);p=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("<ul />");a.children("ul").prepend(k);p=a;break;case "last":a.children("ul").length||a.append("<ul />");a.children("ul").append(k);p=a;break;default:a.children("ul").length||a.append("<ul />"),b||(b=0),p=a.children("ul").children("li").eq(b),
p.length?p.before(k):a.children("ul").append(k),p=a}if(p===-1||p.get(0)===this.get_container().get(0))p=-1;this.clean_node(p);this.__callback({obj:k,parent:p});f&&f.call(this,k);return k},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var d=this._get_settings().core.html_titles,a=a.children("a:eq(0)");return d?(a=a.clone(),a.children("INS").remove(),a.html()):(a=a.contents().filter(function(){return this.nodeType==3})[0],a.nodeValue)},set_text:function(a,d){a=this._get_node(a);if(!a.length)return!1;
a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var b=a.children("INS").clone();a.html(d).prepend(b);this.__callback({obj:a,name:d});return!0}else return a=a.contents().filter(function(){return this.nodeType==3})[0],this.__callback({obj:a,name:d}),a.nodeValue=d},rename_node:function(a,d){a=this._get_node(a);this.__rollback();a&&a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:a,name:d})},delete_node:function(a){a=this._get_node(a);if(!a.length)return!1;
this.__rollback();var b=this._get_parent(a),c=d([]),f=this;a.each(function(){c=c.add(f._get_prev(this))});a=a.detach();b!==-1&&b.find("> ul > li").length===0&&b.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(b);this.__callback({obj:a,prev:c,parent:b});return a},prepare_move:function(a,b,c,h,e){var k={};k.ot=d.jstree._reference(a)||this;k.o=k.ot._get_node(a);k.r=b===-1?-1:this._get_node(b);k.p=typeof c==="undefined"||c===!1?"last":c;if(e||!f.o||!(f.o[0]===k.o[0]&&
f.r[0]===k.r[0]&&f.p===k.p)){k.ot=d.jstree._reference(k.o)||this;k.rt=d.jstree._reference(k.r)||this;if(k.r===-1||!k.r)switch(k.cr=-1,k.p){case "first":case "before":case "inside":k.cp=0;break;case "after":case "last":k.cp=k.rt.get_container().find(" > ul > li").length;break;default:k.cp=k.p}else{if(!/^(before|after)$/.test(k.p)&&!this._is_loaded(k.r))return this.load_node(k.r,function(){this.prepare_move(a,b,c,h,!0)});switch(k.p){case "before":k.cp=k.r.index();k.cr=k.rt._get_parent(k.r);break;case "after":k.cp=
k.r.index()+1;k.cr=k.rt._get_parent(k.r);break;case "inside":case "first":k.cp=0;k.cr=k.r;break;case "last":k.cp=k.r.find(" > ul > li").length;k.cr=k.r;break;default:k.cp=k.p,k.cr=k.r}}k.np=k.cr==-1?k.rt.get_container():k.cr;k.op=k.ot._get_parent(k.o);k.cop=k.o.index();if(k.op===-1)k.op=k.ot?k.ot.get_container():this.get_container();!/^(before|after)$/.test(k.p)&&k.op&&k.np&&k.op[0]===k.np[0]&&k.o.index()<k.cp&&k.cp++;k.or=k.np.find(" > ul > li:nth-child("+(k.cp+1)+")");f=k}this.__callback(f);h&&
h.call(this,f)},check_move:function(){var a=f,d=!0,b=a.r===-1?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0])return!1;if(a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(b.parentsUntil(".jstree","li").andSelf().index(this)!==-1)return d=!1});return d},move_node:function(a,b,c,h,e,k){if(!e)return this.prepare_move(a,b,c,function(a){this.move_node(a,!1,!1,h,!0,k)});if(h)f.cy=!0;if(!k&&!this.check_move())return!1;this.__rollback();b=!1;h?(b=a.o.clone(!0),b.find("*[id]").andSelf().each(function(){if(this.id)this.id=
"copy_"+this.id})):b=a.o;a.or.length?a.or.before(b):(a.np.children("ul").length||d("<ul />").appendTo(a.np),a.np.children("ul:eq(0)").append(b));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("> ul > li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(q){}if(h)f.cy=!0,f.oc=b;this.__callback(f);return f},_get_move:function(){return f}}})})(jQuery);(function(a){var b,c,h;a(function(){/msie/.test(navigator.userAgent.toLowerCase())?
(c=a('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),h=a('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),b=c.width()-h.width(),c.add(h).remove()):(c=a("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),b=100-c.width(),c.parent().remove())});a.jstree.plugin("ui",
{__init:function(){this.data.ui.selected=a();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",a.proxy(function(b){b.preventDefault();b.currentTarget.blur();a(b.currentTarget).hasClass("jstree-loading")||this.select_node(b.currentTarget,!0,b)},this)).delegate("a","mouseenter.jstree",a.proxy(function(b){a(b.currentTarget).hasClass("jstree-loading")||this.hover_node(b.target)},this)).delegate("a",
"mouseleave.jstree",a.proxy(function(b){a(b.currentTarget).hasClass("jstree-loading")||this.dehover_node(b.target)},this)).bind("reopen.jstree",a.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",a.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",a.proxy(function(){this.reselect()},this)).bind("close_node.jstree",a.proxy(function(b,c){var g=this._get_settings().ui,h=this._get_node(c.rslt.obj),e=h&&h.length?h.children("ul").find("a.jstree-clicked"):
a(),n=this;g.selected_parent_close!==!1&&e.length&&e.each(function(){n.deselect_node(this);g.selected_parent_close==="select_parent"&&n.select_node(h)})},this)).bind("delete_node.jstree",a.proxy(function(a,d){var b=this._get_settings().ui.select_prev_on_delete,c=this._get_node(d.rslt.obj),c=c&&c.length?c.find("a.jstree-clicked"):[],h=this;c.each(function(){h.deselect_node(this)});b&&c.length&&d.rslt.prev.each(function(){if(this.parentNode)return h.select_node(this),!1})},this)).bind("move_node.jstree",
a.proxy(function(a,d){d.rslt.cy&&d.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(b,c){if(typeof b==="undefined"||b===null)return c?this.data.ui.selected:this.data.ui.last_selected;var g=a(b,this.get_container());if(g.is(".jstree")||
b==-1)return-1;g=g.closest("li",this.get_container());return g.length?g:!1},_ui_notify:function(a,d){d.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},reselect:function(){var b=this,c=this.data.ui.to_select,
c=a.map(a.makeArray(c),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});a.each(c,function(a,d){d&&d!=="#"&&b.select_node(d)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);if(!a.length)return!1;a.hasClass("jstree-hovered")||
this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered;if(!a||!a.length)return!1;if(this.data.ui.hovered[0]===a.children("a").removeClass("jstree-hovered").parent()[0])this.data.ui.hovered=null;this.__callback({obj:a})},select_node:function(a,d,b){a=this._get_node(a);if(a==-1||!a||!a.length)return!1;var c=this._get_settings().ui,h=c.select_multiple_modifier=="on"||
c.select_multiple_modifier!==!1&&b&&b[c.select_multiple_modifier+"Key"],e=c.select_range_modifier!==!1&&b&&b[c.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],k=this.is_selected(a),q=!0,p=this;if(d){if(c.disable_selecting_children&&h&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;q=!1;switch(!0){case e:this.data.ui.last_selected.addClass("jstree-last-selected");
a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();c.select_limit==-1||a.length<c.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==p.data.ui.last_selected[0]&&p.deselect_node(this)}),k=!1,q=!0):q=!1;break;case k&&!h:this.deselect_all();k=!1;q=!0;break;case !k&&!h:if(c.select_limit==-1||c.select_limit>0)this.deselect_all(),q=!0;break;case k&&h:this.deselect_node(a);break;
case !k&&h:if(c.select_limit==-1||this.data.ui.selected.length+1<=c.select_limit)q=!0}}if(q&&!k){if(!e)this.data.ui.last_selected=a;a.children("a").addClass("jstree-clicked");c.selected_parent_open&&a.parents(".jstree-closed").each(function(){p.open_node(this,!1,!0)});this.data.ui.selected=this.data.ui.selected.add(a);this._fix_scroll(a.eq(0));this.__callback({obj:a,e:b})}},_fix_scroll:function(a){var d=this.get_container()[0];if(d.scrollHeight>d.offsetHeight&&(a=this._get_node(a))&&!(a===-1||!a.length||
!a.is(":visible"))){a=a.offset().top-this.get_container().offset().top;if(a<0)d.scrollTop=d.scrollTop+a-1;if(a+this.data.core.li_height+(d.scrollWidth>d.offsetWidth?b:0)>d.offsetHeight)d.scrollTop+=a-d.offsetHeight+this.data.core.li_height+1+(d.scrollWidth>d.offsetWidth?b:0)}},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;if(this.is_selected(a)){a.children("a").removeClass("jstree-clicked");this.data.ui.selected=this.data.ui.selected.not(a);if(this.data.ui.last_selected.get(0)===
a.get(0))this.data.ui.last_selected=this.data.ui.selected.eq(0);this.__callback({obj:a})}},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return this.data.ui.selected.index(this._get_node(a))>=0},get_selected:function(b){return b?a(b).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(b){b=b?a(b).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();
b.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=a([]);this.data.ui.last_selected=!1;this.__callback({obj:b})}}});a.jstree.defaults.plugins.push("ui")})(jQuery);(function(a){a.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",a.proxy(function(a,d){if(this._get_settings().crrm.move.open_onmove){var h=this;d.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){h.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,
move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(){return!0}}},_fn:{_show_input:function(b,c){var b=this._get_node(b),h=this._get_settings().core.rtl,f=this._get_settings().crrm.input_width_limit,e=b.children("ins").width(),g=b.find("> a:visible > ins").width()*b.find("> a:visible > ins").length,l=this.get_text(b),m=a("<div />",{css:{position:"absolute",top:"-200px",left:h?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),n=b.css("position","relative").append(a("<input />",
{value:l,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:h?"auto":e+g+4+"px",right:h?e+g+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:a.proxy(function(){var a=b.children(".jstree-rename-input"),d=a.val();d===""&&(d=l);m.remove();a.remove();this.set_text(b,l);this.rename_node(b,d);c.call(this,b,d,l);b.css("position","")},this),keyup:function(a){a=a.keyCode||a.which;a==
27?(this.value=l,this.blur()):a==13?this.blur():n.width(Math.min(m.text("pW"+this.value).width(),f))},keypress:function(a){if((a.keyCode||a.which)==13)return!1}})).children(".jstree-rename-input");this.set_text(b,"");m.css({fontFamily:n.css("fontFamily")||"",fontSize:n.css("fontSize")||"",fontWeight:n.css("fontWeight")||"",fontStyle:n.css("fontStyle")||"",fontStretch:n.css("fontStretch")||"",fontVariant:n.css("fontVariant")||"",letterSpacing:n.css("letterSpacing")||"",wordSpacing:n.css("wordSpacing")||
""});n.width(Math.min(m.text("pW"+n[0].value).width(),f))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var d=this.__callback;this._show_input(a,function(a,b,e){d.call(this,{obj:a,new_name:b,old_name:e})})},create:function(b,c,h,f,e){var g=this;(b=this._get_node(b))||(b=-1);this.__rollback();return this.create_node(b,c,h,function(b){var c=this._get_parent(b),h=a(b).index();f&&f.call(this,b);c.length&&c.hasClass("jstree-closed")&&this.open_node(c,!1,!0);e?g.__callback({obj:b,
name:this.get_text(b),parent:c,position:h}):this._show_input(b,function(a,d){g.__callback({obj:a,name:d,parent:c,position:h})})})},remove:function(a){var a=this._get_node(a,!0),d=this._get_parent(a),h=this._get_prev(a);this.__rollback();a=this.delete_node(a);a!==!1&&this.__callback({obj:a,prev:h,parent:d})},check_move:function(){return!this.__call_old()?!1:!this._get_settings().crrm.move.check_move.call(this,this._get_move())?!1:!0},move_node:function(a,d,h,f,e,g){var l=this._get_settings().crrm.move;
if(!e){if(typeof h==="undefined")h=l.default_position;if(h==="inside"&&!l.default_position.match(/^(before|after)$/))h=l.default_position;return this.__call_old(!0,a,d,h,f,!1,g)}if(l.always_copy===!0||l.always_copy==="multitree"&&a.rt.get_index()!==a.ot.get_index())f=!0;this.__call_old(!0,a,d,h,f,!0,g)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;
this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var d=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;if(this.data.crrm.ct_nodes)this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,nodes:d})}}})})(jQuery);(function(a){var b=
[];a.jstree._themes=!1;a.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",a.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",a.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(c,h){if(!c)return!1;
h||(h=a.jstree._themes+c+"/style.css");a.inArray(h,b)==-1&&(a.vakata.css.add_sheet({url:h}),b.push(h));if(this.data.themes.theme!=c)this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=c;this.get_container().addClass("jstree-"+c);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},
hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});
a(function(){a.jstree._themes===!1&&a("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return a.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});if(a.jstree._themes===!1)a.jstree._themes="themes/"});a.jstree.defaults.plugins.push("themes")})(jQuery);(function(a){var b=[];a.jstree.plugin("hotkeys",{__init:function(){if(typeof a.hotkeys==="undefined")throw"jsTree hotkeys: jQuery hotkeys plugin not included.";
if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";a.each(this._get_settings().hotkeys,function(c,h){h!==!1&&a.inArray(c,b)==-1&&(a(document).bind("keydown",c,function(b){var h;var g=a.jstree._focused(),l;g&&g.data&&g.data.hotkeys&&g.data.hotkeys.enabled&&(l=g._get_settings().hotkeys[c])&&(h=l.call(g,b));return h}),b.push(c))});this.get_container().bind("lock.jstree",a.proxy(function(){if(this.data.hotkeys.enabled)this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0},this)).bind("unlock.jstree",
a.proxy(function(){if(this.data.hotkeys.revert)this.data.hotkeys.enabled=!0},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;
a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;
a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);
return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})})(jQuery);(function(a){a.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&
this.get_container().bind("after_close.jstree",function(a,d){d.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,d,h){var f=this;this.load_node_json(a,function(){f.__callback({obj:f._get_node(a)});d.call(this)},h)},_is_loaded:function(b){var c=this._get_settings().json_data,b=this._get_node(b);return b==-1||!b||!c.ajax&&!c.progressive_render&&!a.isFunction(c.data)||b.is(".jstree-open, .jstree-leaf")||
b.children("ul").children("li").length>0},refresh:function(b){var b=this._get_node(b),c=this._get_settings().json_data;b&&b!==-1&&c.progressive_unload&&(a.isFunction(c.data)||c.ajax)&&b.removeData("jstree_children");return this.__call_old()},load_node_json:function(b,c,h){var f=this.get_settings().json_data,e,g=function(){};e=function(){};if((b=this._get_node(b))&&b!==-1&&(f.progressive_render||f.progressive_unload)&&!b.is(".jstree-open, .jstree-leaf")&&b.children("ul").children("li").length===0&&
b.data("jstree_children")){if(e=this._parse_json(b.data("jstree_children"),b))b.append(e),f.progressive_unload||b.removeData("jstree_children");this.clean_node(b);c&&c.call(this)}else{if(b&&b!==-1)if(b.data("jstree_is_loading"))return;else b.data("jstree_is_loading",!0);switch(!0){case !f.data&&!f.ajax:throw"Neither data nor ajax settings supplied.";case a.isFunction(f.data):f.data.call(this,b,a.proxy(function(a){(a=this._parse_json(a,b))?(b===-1||!b?this.get_container().children("ul").empty().append(a.children()):
(b.append(a).children("a.jstree-loading").removeClass("jstree-loading"),b.removeData("jstree_is_loading")),this.clean_node(b),c&&c.call(this)):(b===-1||!b?f.correct_state&&this.get_container().children("ul").empty():(b.children("a.jstree-loading").removeClass("jstree-loading"),b.removeData("jstree_is_loading"),f.correct_state&&this.correct_state(b)),h&&h.call(this))},this));break;case !!f.data&&!f.ajax||!!f.data&&!!f.ajax&&(!b||b===-1):if(!b||b==-1)(e=this._parse_json(f.data,b))?(this.get_container().children("ul").empty().append(e.children()),
this.clean_node()):f.correct_state&&this.get_container().children("ul").empty();c&&c.call(this);break;case !f.data&&!!f.ajax||!!f.data&&!!f.ajax&&b&&b!==-1:g=function(a,d,c){var g=this.get_settings().json_data.ajax.error;g&&g.call(this,a,d,c);b!=-1&&b.length?(b.children("a.jstree-loading").removeClass("jstree-loading"),b.removeData("jstree_is_loading"),d==="success"&&f.correct_state&&this.correct_state(b)):d==="success"&&f.correct_state&&this.get_container().children("ul").empty();h&&h.call(this)};
f.ajax.context=this;f.ajax.error=g;f.ajax.success=function(h,e,n){var k=this.get_settings().json_data.ajax.success;k&&(h=k.call(this,h,e,n)||h);if(h===""||h&&h.toString&&h.toString().replace(/^[\s\n]+$/,"")===""||!a.isArray(h)&&!a.isPlainObject(h))return g.call(this,n,e,"");(h=this._parse_json(h,b))?(b===-1||!b?this.get_container().children("ul").empty().append(h.children()):(b.append(h).children("a.jstree-loading").removeClass("jstree-loading"),b.removeData("jstree_is_loading")),this.clean_node(b),
c&&c.call(this)):b===-1||!b?f.correct_state&&(this.get_container().children("ul").empty(),c&&c.call(this)):(b.children("a.jstree-loading").removeClass("jstree-loading"),b.removeData("jstree_is_loading"),f.correct_state&&(this.correct_state(b),c&&c.call(this)))};if(!f.ajax.dataType)f.ajax.dataType="json";if(a.isFunction(f.ajax.url))f.ajax.url=f.ajax.url.call(this,b);if(a.isFunction(f.ajax.data))f.ajax.data=f.ajax.data.call(this,b);a.ajax(f.ajax)}}},_parse_json:function(b,c,h){var f=!1,e=this._get_settings(),
g=e.json_data,l=e.core.html_titles,m;if(!b)return f;g.progressive_unload&&c&&c!==-1&&c.data("jstree_children",f);if(a.isArray(b)){f=a();if(!b.length)return!1;for(e=0,g=b.length;e<g;e++)m=this._parse_json(b[e],c,!0),m.length&&(f=f.add(m))}else{typeof b=="string"&&(b={data:b});if(!b.data&&b.data!=="")return f;f=a("<li />");b.attr&&f.attr(b.attr);b.metadata&&f.data(b.metadata);b.state&&f.addClass("jstree-"+b.state);if(!a.isArray(b.data))m=b.data,b.data=[],b.data.push(m);a.each(b.data,function(c,g){m=
a("<a />");a.isFunction(g)&&(g=g.call(this,b));if(typeof g=="string")m.attr("href","#")[l?"html":"text"](g);else{if(!g.attr)g.attr={};if(!g.attr.href)g.attr.href="#";m.attr(g.attr)[l?"html":"text"](g.title);g.language&&m.addClass(g.language)}m.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!g.icon&&b.icon)g.icon=b.icon;g.icon&&(g.icon.indexOf("/")===-1?m.children("ins").addClass(g.icon):m.children("ins").css("background","url('"+g.icon+"') center center no-repeat"));f.append(m)});f.prepend("<ins class='jstree-icon'>&#160;</ins>");
b.children&&(g.progressive_render&&b.state!=="open"?f.addClass("jstree-closed").data("jstree_children",b.children):(g.progressive_unload&&f.data("jstree_children",b.children),a.isArray(b.children)&&b.children.length&&(m=this._parse_json(b.children,c,!0),m.length&&(c=a("<ul />"),c.append(m),f.append(c)))))}h||(h=a("<ul />"),h.append(f),f=h);return f},get_json:function(b,c,h,f){var e=[],g=this._get_settings(),l=this,m,n,k,q,p,i,b=this._get_node(b);if(!b||b===-1)b=this.get_container().find("> ul > li");
c=a.isArray(c)?c:["id","class"];!f&&this.data.types&&c.push(g.types.type_attr);h=a.isArray(h)?h:[];b.each(function(){k=a(this);m={data:[]};if(c.length)m.attr={};a.each(c,function(a,d){(n=k.attr(d))&&n.length&&n.replace(/jstree[^ ]*/ig,"").length&&(m.attr[d]=(" "+n).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))});if(k.hasClass("jstree-open"))m.state="open";if(k.hasClass("jstree-closed"))m.state="closed";if(k.data())m.metadata=k.data();q=k.children("a");q.each(function(){p=
a(this);if(h.length||a.inArray("languages",g.plugins)!==-1||p.children("ins").get(0).style.backgroundImage.length||p.children("ins").get(0).className&&p.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length){i=!1;a.inArray("languages",g.plugins)!==-1&&a.isArray(g.languages)&&g.languages.length&&a.each(g.languages,function(a,d){if(p.hasClass(d))return i=d,!1});n={attr:{},title:l.get_text(p,i)};a.each(h,function(a,d){n.attr[d]=(" "+(p.attr(d)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,"")});a.inArray("languages",g.plugins)!==-1&&a.isArray(g.languages)&&g.languages.length&&a.each(g.languages,function(a,d){if(p.hasClass(d))return n.language=d,!0});if(p.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length)n.icon=p.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"");if(p.children("ins").get(0).style.backgroundImage.length)n.icon=p.children("ins").get(0).style.backgroundImage.replace("url(",
"").replace(")","")}else n=l.get_text(p);q.length>1?m.data.push(n):m.data=n});k=k.find("> ul > li");if(k.length)m.children=l.get_json(k,c,h,!0);e.push(m)});return e}}})})(jQuery);(function(a){a.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(b){var c=this._get_settings().languages,h=!1,f=".jstree-"+this.get_index()+" a";if(!a.isArray(c)||c.length===0)return!1;if(a.inArray(b,c)==-1)if(c[b])b=c[b];else return!1;if(b==this.data.languages.current_language)return!0;
h=a.vakata.css.get_css(f+"."+this.data.languages.current_language,!1,this.data.languages.language_css);if(h!==!1)h.style.display="none";h=a.vakata.css.get_css(f+"."+b,!1,this.data.languages.language_css);if(h!==!1)h.style.display="";this.data.languages.current_language=b;this.__callback(b);return!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(b,c){var h=this._get_settings().languages,f=this._get_settings().core.strings;a.isArray(h)&&h.length&&(c=c&&a.inArray(c,
h)!=-1?c:this.data.languages.current_language);return f[c]&&f[c][b]?f[c][b]:f[b]?f[b]:b},get_text:function(b,c){b=this._get_node(b)||this.data.ui.last_selected;if(!b.size())return!1;var h=this._get_settings().languages,f=this._get_settings().core.html_titles;a.isArray(h)&&h.length?(c=c&&a.inArray(c,h)!=-1?c:this.data.languages.current_language,b=b.children("a."+c)):b=b.children("a:eq(0)");return f?(b=b.clone(),b.children("INS").remove(),b.html()):(b=b.contents().filter(function(){return this.nodeType==
3})[0],b.nodeValue)},set_text:function(b,c,h){b=this._get_node(b)||this.data.ui.last_selected;if(!b.size())return!1;var f=this._get_settings().languages,e=this._get_settings().core.html_titles;a.isArray(f)&&f.length?(h=h&&a.inArray(h,f)!=-1?h:this.data.languages.current_language,b=b.children("a."+h)):b=b.children("a:eq(0)");return e?(f=b.children("INS").clone(),b.html(c).prepend(f),this.__callback({obj:b,name:c,lang:h}),!0):(b=b.contents().filter(function(){return this.nodeType==3})[0],this.__callback({obj:b,
name:c,lang:h}),b.nodeValue=c)},_load_css:function(){var b=this._get_settings().languages,c="/* languages css */",h=".jstree-"+this.get_index()+" a",f;if(a.isArray(b)&&b.length){this.data.languages.current_language=b[0];for(f=0;f<b.length;f++)c+=h+"."+b[f]+" {",b[f]!=this.data.languages.current_language&&(c+=" display:none; "),c+=" } ";this.data.languages.language_css=a.vakata.css.add_sheet({str:c,title:"jstree-languages"})}},create_node:function(b,c,h,f){return this.__call_old(!0,b,c,h,function(b){var c=
this._get_settings().languages,h=b.children("a"),e;if(a.isArray(c)&&c.length){for(e=0;e<c.length;e++)h.is("."+c[e])||b.append(h.eq(0).clone().removeClass(c.join(" ")).addClass(c[e]));h.not("."+c.join(", .")).remove()}f&&f.call(this,b)})}}})})(jQuery);(function(a){a.jstree.plugin("cookies",{__init:function(){if(typeof a.cookie==="undefined")throw"jsTree cookie: jQuery cookie plugin not included.";var b=this._get_settings().cookies,c;if(b.save_loaded&&(c=a.cookie(b.save_loaded))&&c.length)this.data.core.to_load=
c.split(",");if(b.save_opened&&(c=a.cookie(b.save_opened))&&c.length)this.data.core.to_open=c.split(",");if(b.save_selected&&(c=a.cookie(b.save_selected))&&c.length&&this.data.ui)this.data.ui.to_select=c.split(",");this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",a.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",a.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+
a.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(b){if(!this.data.core.refreshing){var c=this._get_settings().cookies;if(b)switch(b){case "open_node":case "close_node":c.save_opened&&(this.save_opened(),a.cookie(c.save_opened,this.data.core.to_open.join(","),c.cookie_options));c.save_loaded&&(this.save_loaded(),a.cookie(c.save_loaded,this.data.core.to_load.join(","),
c.cookie_options));break;case "select_node":case "deselect_node":c.save_selected&&this.data.ui&&(this.save_selected(),a.cookie(c.save_selected,this.data.ui.to_select.join(","),c.cookie_options))}else c.save_loaded&&(this.save_loaded(),a.cookie(c.save_loaded,this.data.core.to_load.join(","),c.cookie_options)),c.save_opened&&(this.save_opened(),a.cookie(c.save_opened,this.data.core.to_open.join(","),c.cookie_options)),c.save_selected&&this.data.ui&&(this.save_selected(),a.cookie(c.save_selected,this.data.ui.to_select.join(","),
c.cookie_options))}}}})})(jQuery);(function(a){a.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",a.proxy(function(a,d){var h=this._get_node(d.rslt.obj),h=h===-1?this.get_container().children("ul"):h.children("ul");this.sort(h)},this)).bind("rename_node.jstree create_node.jstree create.jstree",a.proxy(function(a,d){this.sort(d.rslt.obj.parent())},this)).bind("move_node.jstree",a.proxy(function(a,d){this.sort((d.rslt.np==-1?this.get_container():d.rslt.np).children("ul"))},
this))},defaults:function(a,d){return this.get_text(a)>this.get_text(d)?1:-1},_fn:{sort:function(b){var c=this._get_settings().sort,h=this;b.append(a.makeArray(b.children("li")).sort(a.proxy(c,h)));b.find("> li > ul").each(function(){h.sort(a(this))});this.clean_node(b)}}})})(jQuery);(function(a){var b=!1,c=!1,h=!1,f=!1,e=!1,g=!1,l=!1,m=!1,n=!1;a.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(b,c,
g){a.vakata.dnd.is_drag&&a.vakata.drag_stop({});try{if(b.currentTarget.unselectable="on",b.currentTarget.onselectstart=function(){return!1},b.currentTarget.style)b.currentTarget.style.MozUserSelect="none"}catch(h){}a.vakata.dnd.init_x=b.pageX;a.vakata.dnd.init_y=b.pageY;a.vakata.dnd.user_data=c;a.vakata.dnd.is_down=!0;a.vakata.dnd.helper=a("<div id='vakata-dragged' />").html(g);a(document).bind("mousemove",a.vakata.dnd.drag);a(document).bind("mouseup",a.vakata.dnd.drag_stop);return!1},drag:function(b){if(a.vakata.dnd.is_down){if(!a.vakata.dnd.is_drag)if(Math.abs(b.pageX-
a.vakata.dnd.init_x)>5||Math.abs(b.pageY-a.vakata.dnd.init_y)>5)a.vakata.dnd.helper.appendTo("body"),a.vakata.dnd.is_drag=!0,a(document).triggerHandler("drag_start.vakata",{event:b,data:a.vakata.dnd.user_data});else return;if(b.type==="mousemove"){var c=a(document),h=c.scrollTop(),c=c.scrollLeft();b.pageY-h<20?(g&&l==="down"&&(clearInterval(g),g=!1),g||(l="up",g=setInterval(function(){a(document).scrollTop(a(document).scrollTop()-a.vakata.dnd.scroll_spd)},150))):g&&l==="up"&&(clearInterval(g),g=!1);
a(window).height()-(b.pageY-h)<20?(g&&l==="up"&&(clearInterval(g),g=!1),g||(l="down",g=setInterval(function(){a(document).scrollTop(a(document).scrollTop()+a.vakata.dnd.scroll_spd)},150))):g&&l==="down"&&(clearInterval(g),g=!1);b.pageX-c<20?(e&&m==="right"&&(clearInterval(e),e=!1),e||(m="left",e=setInterval(function(){a(document).scrollLeft(a(document).scrollLeft()-a.vakata.dnd.scroll_spd)},150))):e&&m==="left"&&(clearInterval(e),e=!1);a(window).width()-(b.pageX-c)<20?(e&&m==="left"&&(clearInterval(e),
e=!1),e||(m="right",e=setInterval(function(){a(document).scrollLeft(a(document).scrollLeft()+a.vakata.dnd.scroll_spd)},150))):e&&m==="right"&&(clearInterval(e),e=!1)}a.vakata.dnd.helper.css({left:b.pageX+a.vakata.dnd.helper_left+"px",top:b.pageY+a.vakata.dnd.helper_top+"px"});a(document).triggerHandler("drag.vakata",{event:b,data:a.vakata.dnd.user_data})}},drag_stop:function(b){e&&clearInterval(e);g&&clearInterval(g);a(document).unbind("mousemove",a.vakata.dnd.drag);a(document).unbind("mouseup",a.vakata.dnd.drag_stop);
a(document).triggerHandler("drag_stop.vakata",{event:b,data:a.vakata.dnd.user_data});a.vakata.dnd.helper.remove();a.vakata.dnd.init_x=0;a.vakata.dnd.init_y=0;a.vakata.dnd.user_data={};a.vakata.dnd.is_down=!1;a.vakata.dnd.is_drag=!1}};a(function(){a.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",title:"vakata"})});a.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,
after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",a.proxy(function(c){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&(this.data.themes&&(h.attr("class","jstree-"+this.data.themes.theme),f&&f.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),c.currentTarget===c.target&&a.vakata.dnd.user_data.obj&&a(a.vakata.dnd.user_data.obj).length&&
a(a.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==c.target&&(c=a.jstree._reference(c.target),c.data.dnd.foreign?(c=c._get_settings().dnd.drag_check.call(this,{o:b,r:c.get_container(),is_root:!0}),(c===!0||c.inside===!0||c.before===!0||c.after===!0)&&a.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(c.prepare_move(b,c.get_container(),"last"),c.check_move()&&a.vakata.dnd.helper.children("ins").attr("class","jstree-ok"))))},this)).bind("mouseup.jstree",a.proxy(function(c){if(a.vakata.dnd.is_drag&&
a.vakata.dnd.user_data.jstree&&c.currentTarget===c.target&&a.vakata.dnd.user_data.obj&&a(a.vakata.dnd.user_data.obj).length&&a(a.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==c.target){var g=a.jstree._reference(c.currentTarget);g.data.dnd.foreign?(c=g._get_settings().dnd.drag_check.call(this,{o:b,r:g.get_container(),is_root:!0}),(c===!0||c.inside===!0||c.before===!0||c.after===!0)&&g._get_settings().dnd.drag_finish.call(this,{o:b,r:g.get_container(),is_root:!0})):g.move_node(b,g.get_container(),
"last",c[g._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",a.proxy(function(b){if(b.relatedTarget&&b.relatedTarget.id&&b.relatedTarget.id==="jstree-marker-line")return!1;a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),a.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&
a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",a.proxy(function(b){if(a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree){var c=this.get_container()[0];b.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(a.proxy(function(){this.scrollLeft+=a.vakata.dnd.scroll_spd},c),100)):b.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=
setInterval(a.proxy(function(){this.scrollLeft-=a.vakata.dnd.scroll_spd},c),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);b.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(a.proxy(function(){this.scrollTop+=a.vakata.dnd.scroll_spd},c),100)):b.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(a.proxy(function(){this.scrollTop-=a.vakata.dnd.scroll_spd},
c),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",a.proxy(function(){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&h&&f&&(h.hide(),f.hide())},this)).delegate("a","mousedown.jstree",a.proxy(function(a){if(a.which===1)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",a.proxy(function(b){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&this.dnd_enter(b.currentTarget)},this)).delegate("a","mousemove.jstree",a.proxy(function(b){if(a.vakata.dnd.is_drag&&
a.vakata.dnd.user_data.jstree){(!c||!c.length||c.children("a")[0]!==b.currentTarget)&&this.dnd_enter(b.currentTarget);if(typeof this.data.dnd.off.top==="undefined")this.data.dnd.off=a(b.target).offset();this.data.dnd.w=(b.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height;this.data.dnd.w<0&&(this.data.dnd.w+=this.data.core.li_height);this.dnd_show()}},this)).delegate("a","mouseleave.jstree",a.proxy(function(b){if(a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree){if(b.relatedTarget&&b.relatedTarget.id&&
b.relatedTarget.id==="jstree-marker-line")return!1;h&&h.hide();f&&f.hide();this.data.dnd.mto=setTimeout(function(a){return function(){a.dnd_leave(b)}}(this),0)}},this)).delegate("a","mouseup.jstree",a.proxy(function(b){a.vakata.dnd.is_drag&&a.vakata.dnd.user_data.jstree&&this.dnd_finish(b)},this));a(document).bind("drag_stop.vakata",a.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);this.data.dnd.i1&&clearInterval(this.data.dnd.i1);
this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;h&&h.css({top:"-2000px"});f&&f.css({top:"-2000px"})},this)).bind("drag_start.vakata",a.proxy(function(b,c){if(c.data.jstree){var g=a(c.event.target);g.closest(".jstree").hasClass("jstree-"+
this.get_index())&&this.dnd_enter(g)}},this));var g=this._get_settings().dnd;g.drag_target&&a(document).delegate(g.drag_target,"mousedown.jstree-"+this.get_index(),a.proxy(function(c){b=c.target;a.vakata.dnd.drag_start(c,{jstree:!0,obj:c.target},"<ins class='jstree-icon'></ins>"+a(c.target).text());this.data.themes&&(h&&h.attr("class","jstree-"+this.data.themes.theme),f&&f.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));
a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var g=this.get_container();this.data.dnd.cof=g.offset();this.data.dnd.cw=parseInt(g.width(),10);this.data.dnd.ch=parseInt(g.height(),10);this.data.dnd.foreign=!0;c.preventDefault()},this));g.drop_target&&a(document).delegate(g.drop_target,"mouseenter.jstree-"+this.get_index(),a.proxy(function(c){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:b,r:a(c.target),e:c})&&a.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(g.drop_target,"mouseleave.jstree-"+this.get_index(),a.proxy(function(){this.data.dnd.active&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(g.drop_target,"mouseup.jstree-"+this.get_index(),a.proxy(function(c){this.data.dnd.active&&a.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:b,r:a(c.target),e:c})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(){return!0},drop_finish:a.noop,drag_target:".jstree-draggable",drag_finish:a.noop,drag_check:function(){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(c&&c.length){this.data.dnd.off=c.offset();if(this._get_settings().core.rtl)this.data.dnd.off.right=this.data.dnd.off.left+c.width();if(this.data.dnd.foreign){var a=this._get_settings().dnd.drag_check.call(this,{o:b,r:c});this.data.dnd.after=a.after;this.data.dnd.before=a.before;this.data.dnd.inside=
a.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(b,c,"before");this.data.dnd.before=this.check_move();this.prepare_move(b,c,"after");this.data.dnd.after=this.check_move();this._is_loaded(c)?(this.prepare_move(b,c,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var b=["before","inside","after"],c=!1,g=this._get_settings().core.rtl,b=this.data.dnd.w<
this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=this.data.core.li_height*2/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];a.each(b,a.proxy(function(b,g){if(this.data.dnd[g])return a.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),c=g,!1},this));c===!1&&a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");b=g?this.data.dnd.off.right-18:this.data.dnd.off.left+10;switch(c){case "before":h.css({left:b+
"px",top:this.data.dnd.off.top-6+"px"}).show();f&&f.css({left:b+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":h.css({left:b+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();f&&f.css({left:b+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":h.css({left:b+(g?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();f&&f.hide();break;default:h.hide(),f&&f.hide()}return n=c}},dnd_open:function(){this.data.dnd.to2=
!1;this.open_node(c,a.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(a){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:b,r:c,p:n}):(this.dnd_prepare(),this.move_node(b,c,n,a[this._get_settings().dnd.copy_modifier+"Key"]));c=b=!1;h.hide();f&&f.hide()},dnd_enter:function(b){if(this.data.dnd.mto)clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1;var g=this._get_settings().dnd;this.data.dnd.prepared=!1;
c=this._get_node(b);g.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(a.proxy(this.dnd_prepare,this),g.check_timeout)):this.dnd_prepare();if(g.open_timeout){if(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),c&&c.length&&c.hasClass("jstree-closed"))this.data.dnd.to2=setTimeout(a.proxy(this.dnd_open,this),g.open_timeout)}else c&&c.length&&c.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(b){this.data.dnd.after=!1;this.data.dnd.before=
!1;this.data.dnd.inside=!1;a.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");h.hide();f&&f.hide();if(c&&c[0]===b.target.parentNode){if(this.data.dnd.to1)clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1;if(this.data.dnd.to2)clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1}},start_drag:function(c,g){b=this._get_node(c);this.data.ui&&this.is_selected(b)&&(b=this._get_node(null,!0));var e=b.length>1?this._get_string("multiple_selection"):this.get_text(b),l=this.get_container();
this._get_settings().core.html_titles||(e=e.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));a.vakata.dnd.drag_start(g,{jstree:!0,obj:b},"<ins class='jstree-icon'></ins>"+e);this.data.themes&&(h&&h.attr("class","jstree-"+this.data.themes.theme),f&&f.attr("class","jstree-"+this.data.themes.theme),a.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=l.offset();this.data.dnd.cw=parseInt(l.width(),10);this.data.dnd.ch=parseInt(l.height(),10);this.data.dnd.active=
!0}}});a(function(){a.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});h=a("<div />").attr({id:"jstree-marker"}).hide().html("&#187;").bind("mouseleave mouseenter",function(a){h.hide();f.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");f=a("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(c&&c.length)return c.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(b){var g=a(b.relatedTarget);if((g.is(".jstree")||g.closest(".jstree").length===
0)&&c&&c.length)return c.children("a").trigger(b),h.hide(),f.hide(),b.preventDefault(),b.stopImmediatePropagation(),!1}).appendTo("body");a(document).bind("drag_start.vakata",function(a,b){b.data.jstree&&(h.show(),f&&f.show())});a(document).bind("drag_stop.vakata",function(a,b){b.data.jstree&&(h.hide(),f&&f.hide())})})})(jQuery);(function(a){a.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;if(this.data.ui&&this.data.checkbox.noui)this.select_node=
this.deselect_node=this.deselect_all=a.noop,this.get_selected=this.get_checked;this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",a.proxy(function(a,c){this._prepare_checkboxes(c.rslt.obj)},this)).bind("loaded.jstree",a.proxy(function(){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",a.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(Math.random()*1E4)),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,c){c.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(b){b=!b||b==-1?this.get_container().find("> ul > li"):this._get_node(b);if(b!==!1){var c,h=this,f,e=this._get_settings().checkbox.two_state,g=this._get_settings().checkbox.real_checkboxes,l=this._get_settings().checkbox.real_checkboxes_names;b.each(function(){f=a(this);c=f.is("li")&&(f.hasClass("jstree-checked")||g&&f.children(":checked").length)?"jstree-checked":"jstree-unchecked";f.find("li").andSelf().each(function(){var b=
a(this),f;b.children("a"+(h.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(e?"jstree-unchecked":c);g&&(b.children(":checkbox").length?b.children(":checkbox").addClass("jstree-real-checkbox"):(f=l.call(h,b),b.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+f[0]+"' name='"+f[0]+"' value='"+f[1]+"' />")));e?(b.hasClass("jstree-checked")||b.children(":checked").length)&&
b.addClass("jstree-checked").children(":checkbox").prop("checked",!0):(c==="jstree-checked"||b.hasClass("jstree-checked")||b.children(":checked").length)&&b.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});e||b.find(".jstree-checked").parent().parent().each(function(){h._repair_state(this)})}},change_state:function(b,c){var b=this._get_node(b),h=!1,f=this._get_settings().checkbox.real_checkboxes;if(!b||b===-1)return!1;c=c===!1||c===!0?c:b.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)c?(b.removeClass("jstree-checked").addClass("jstree-unchecked"),f&&b.children(":checkbox").prop("checked",!1)):(b.removeClass("jstree-unchecked").addClass("jstree-checked"),f&&b.children(":checkbox").prop("checked",!0));else{if(c){h=b.find("li").andSelf();if(!h.filter(".jstree-checked, .jstree-undetermined").length)return!1;h.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");f&&h.children(":checkbox").prop("checked",!1)}else{h=
b.find("li").andSelf();if(!h.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;h.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");f&&h.children(":checkbox").prop("checked",!0);if(this.data.ui)this.data.ui.last_selected=b;this.data.checkbox.last_selected=b}b.parentsUntil(".jstree","li").each(function(){var b=a(this);if(c)if(b.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return b.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
f&&b.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;else b.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),f&&b.children(":checkbox").prop("checked",!1);else if(b.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return b.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),f&&b.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",
!1),!1;else b.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),f&&b.children(":checkbox").prop("checked",!0)})}if(this.data.ui&&this.data.checkbox.noui)this.data.ui.selected=this.get_checked();this.__callback(b);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var c=this;a.parents(".jstree-closed").each(function(){c.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,c){a=!a||a===-1?this.get_container():this._get_node(a);return c||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,c){a=!a||a===-1?this.get_container():this._get_node(a);return c||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var c=this._get_settings().checkbox.real_checkboxes,
d=a.find("> ul > .jstree-checked").length,f=a.find("> ul > .jstree-undetermined").length,e=a.find("> ul > li").length;e===0?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):d===0&&f===0?this.change_state(a,!0):d===e?this.change_state(a,!1):(a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),c&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var b=
this,c=this.data.ui.to_select,c=a.map(a.makeArray(c),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();a.each(c,function(a,c){b.check_node(c)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});
a(function(){a.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(a){a.vakata.xslt=function(b,c,e){var g="",l;if(document.recalc)return l=document.createElement("xml"),g=document.createElement("xml"),l.innerHTML=b,g.innerHTML=c,a("body").append(l).append(g),setTimeout(function(b,c,g){return function(){g.call(null,b.transformNode(c.XMLDocument));setTimeout(function(b,c){return function(){a(b).remove();a(c).remove()}}(b,c),200)}}(l,g,
e),100),!0;typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor==="undefined"&&(b=(new DOMParser).parseFromString(b,"text/xml"),c=(new DOMParser).parseFromString(c,"text/xml"));if(typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor!=="undefined"){l=new XSLTProcessor;g=a.isFunction(l.transformDocument)?typeof window.XMLSerializer!=="undefined":!0;if(!g)return!1;b=(new DOMParser).parseFromString(b,
"text/xml");c=(new DOMParser).parseFromString(c,"text/xml");a.isFunction(l.transformDocument)?(g=document.implementation.createDocument("","",null),l.transformDocument(b,c,g,null),e.call(null,(new XMLSerializer).serializeToString(g))):(l.importStylesheet(c),g=l.transformToFragment(b,document),e.call(null,a("<div />").append(g).html()));return!0}return!1};var b={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
c=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};a.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,b,c){var d=this;this.load_node_xml(a,function(){d.__callback({obj:d._get_node(a)});b.call(this)},c)},_is_loaded:function(b){var c=this._get_settings().xml_data,b=this._get_node(b);return b==-1||
!b||!c.ajax&&!a.isFunction(c.data)||b.is(".jstree-open, .jstree-leaf")||b.children("ul").children("li").size()>0},load_node_xml:function(b,c,e){var g=this.get_settings().xml_data,l=function(){},m=function(){};if((b=this._get_node(b))&&b!==-1)if(b.data("jstree_is_loading"))return;else b.data("jstree_is_loading",!0);switch(!0){case !g.data&&!g.ajax:throw"Neither data nor ajax settings supplied.";case a.isFunction(g.data):g.data.call(this,b,a.proxy(function(e){this.parse_xml(e,a.proxy(function(e){e&&
(e=e.replace(/ ?xmlns="[^"]*"/ig,""),e.length>10?(e=a(e),b===-1||!b?this.get_container().children("ul").empty().append(e.children()):(b.children("a.jstree-loading").removeClass("jstree-loading"),b.append(e),b.removeData("jstree_is_loading")),g.clean_node&&this.clean_node(b),c&&c.call(this)):b&&b!==-1?(b.children("a.jstree-loading").removeClass("jstree-loading"),b.removeData("jstree_is_loading"),g.correct_state&&(this.correct_state(b),c&&c.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),
c&&c.call(this)))},this))},this));break;case !!g.data&&!g.ajax||!!g.data&&!!g.ajax&&(!b||b===-1):(!b||b==-1)&&this.parse_xml(g.data,a.proxy(function(e){e?(e=e.replace(/ ?xmlns="[^"]*"/ig,""),e.length>10&&(e=a(e),this.get_container().children("ul").empty().append(e.children()),g.clean_node&&this.clean_node(b),c&&c.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),c&&c.call(this))},this));break;case !g.data&&!!g.ajax||!!g.data&&!!g.ajax&&b&&b!==-1:l=function(a,c,d){var f=this.get_settings().xml_data.ajax.error;
f&&f.call(this,a,c,d);b!==-1&&b.length?(b.children("a.jstree-loading").removeClass("jstree-loading"),b.removeData("jstree_is_loading"),c==="success"&&g.correct_state&&this.correct_state(b)):c==="success"&&g.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)};g.ajax.context=this;g.ajax.error=l;g.ajax.success=function(e,k,m){var e=m.responseText,j=this.get_settings().xml_data.ajax.success;j&&(e=j.call(this,e,k,m)||e);if(e===""||e&&e.toString&&e.toString().replace(/^[\s\n]+$/,
"")==="")return l.call(this,m,k,"");this.parse_xml(e,a.proxy(function(e){e&&(e=e.replace(/ ?xmlns="[^"]*"/ig,""),e.length>10?(e=a(e),b===-1||!b?this.get_container().children("ul").empty().append(e.children()):(b.children("a.jstree-loading").removeClass("jstree-loading"),b.append(e),b.removeData("jstree_is_loading")),g.clean_node&&this.clean_node(b),c&&c.call(this)):b&&b!==-1?(b.children("a.jstree-loading").removeClass("jstree-loading"),b.removeData("jstree_is_loading"),g.correct_state&&(this.correct_state(b),
c&&c.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),c&&c.call(this)))},this))};if(!g.ajax.dataType)g.ajax.dataType="xml";if(a.isFunction(g.ajax.url))g.ajax.url=g.ajax.url.call(this,b);if(a.isFunction(g.ajax.data))g.ajax.data=g.ajax.data.call(this,b);a.ajax(g.ajax)}},parse_xml:function(c,e){var j=this._get_settings().xml_data;a.vakata.xslt(c,b[j.xsl],e)},get_xml:function(b,e,j,g,l){var m="",n=this._get_settings(),k=this,i,p,s,r,t;b||(b="flat");l||(l=0);e=this._get_node(e);
if(!e||e===-1)e=this.get_container().find("> ul > li");j=a.isArray(j)?j:["id","class"];!l&&this.data.types&&a.inArray(n.types.type_attr,j)===-1&&j.push(n.types.type_attr);g=a.isArray(g)?g:[];l||(n.xml_data.get_include_preamble&&(m+='<?xml version="1.0" encoding="UTF-8"?>'),m+="<root>");e.each(function(){m+="<item";s=a(this);a.each(j,function(a,b){var d=s.attr(b);if(!n.xml_data.get_skip_empty||typeof d!=="undefined")m+=" "+b+'="'+c((" "+(d||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,
"").replace(/ $/,""))+'"'});s.hasClass("jstree-open")&&(m+=' state="open"');s.hasClass("jstree-closed")&&(m+=' state="closed"');b==="flat"&&(m+=' parent_id="'+c(l)+'"');m+=">";m+="<content>";r=s.children("a");r.each(function(){i=a(this);t=!1;m+="<name";a.inArray("languages",n.plugins)!==-1&&a.each(n.languages,function(a,b){if(i.hasClass(b))return m+=' lang="'+c(b)+'"',t=b,!1});g.length&&a.each(g,function(a,b){var d=i.attr(b);if(!n.xml_data.get_skip_empty||typeof d!=="undefined")m+=" "+b+'="'+c((" "+
d||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'});i.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(m+=' icon="'+c(i.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');i.children("ins").get(0).style.backgroundImage.length&&(m+=' icon="'+c(i.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,
"").replace(/"/ig,""))+'"');m+=">";m+="<![CDATA["+k.get_text(i,t)+"]]\>";m+="</name>"});m+="</content>";p=s[0].id||!0;s=s.find("> ul > li");p=s.length?k.get_xml(b,s,j,g,p):"";b=="nest"&&(m+=p);m+="</item>";b=="flat"&&(m+=p)});l||(m+="</root>");return m}}})})(jQuery);(function(a){a.expr[":"].jstree_contains=function(a,c,d){return(a.textContent||a.innerText||"").toLowerCase().indexOf(d[3].toLowerCase())>=0};a.expr[":"].jstree_title_contains=function(a,c,d){return(a.getAttribute("title")||"").toLowerCase().indexOf(d[3].toLowerCase())>=
0};a.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=a();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(b,c){a(this).children("ul").find("li").hide().removeClass("jstree-last");c.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){a(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){a(this).children("ul").find("li").css("display",
"").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(b,c){if(a.trim(b)==="")this.clear_search();else{var e=this.get_settings().search,f=this,j=function(){},j=function(){};this.data.search.str=b;if(!c&&e.ajax!==!1&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0){this.search.supress_callback=!0;e.ajax.context=this;e.ajax.error=function(){};e.ajax.success=function(a,b,c){var d=this.get_settings().search.ajax.success;
d&&(a=d.call(this,a,b,c)||a);this.data.search.to_open=a;this._search_open()};if(a.isFunction(e.ajax.url))e.ajax.url=e.ajax.url.call(this,b);if(a.isFunction(e.ajax.data))e.ajax.data=e.ajax.data.call(this,b);if(!e.ajax.data)e.ajax.data={search_string:b};if(!e.ajax.dataType||/^json/.exec(e.ajax.dataType))e.ajax.dataType="json";a.ajax(e.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+
e.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){f.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,str:b})}},clear_search:function(){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=a()},_search_open:function(){var b=this,c=!0,e=[],f=[];if(this.data.search.to_open.length&&(a.each(this.data.search.to_open,function(b,
c){if(c=="#")return!0;a(c).length&&a(c).is(".jstree-closed")?e.push(c):f.push(c)}),e.length))this.data.search.to_open=f,a.each(e,function(a,c){b.open_node(c,function(){b._search_open(!0)})}),c=!1;c&&this.search(this.data.search.str,!0)}}})})(jQuery);(function(a){a.vakata.context={hide_on_mouseleave:!1,cnt:a("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(b,c,e,f,j,g,l){a.vakata.context.rtl=!!l;if(b=a.vakata.context.parse(b)){a.vakata.context.vis=!0;a.vakata.context.tgt=
c;a.vakata.context.par=g||c||null;a.vakata.context.data=j||null;a.vakata.context.cnt.html(b).css({visibility:"hidden",display:"block",left:0,top:0});if(a.vakata.context.hide_on_mouseleave)a.vakata.context.cnt.one("mouseleave",function(){a.vakata.context.hide()});j=a.vakata.context.cnt.height();g=a.vakata.context.cnt.width();e+g>a(document).width()&&(e=a(document).width()-(g+5),a.vakata.context.cnt.find("li > ul").addClass("right"));f+j>a(document).height()&&(f-=j+c[0].offsetHeight,a.vakata.context.cnt.find("li > ul").addClass("bottom"));
a.vakata.context.cnt.css({left:e,top:f}).find("li:has(ul)").bind("mouseenter",function(){var b=a(document).width(),c=a(document).height(),g=a(this).children("ul").show();b!==a(document).width()&&g.toggleClass("right");c!==a(document).height()&&g.toggleClass("bottom")}).bind("mouseleave",function(){a(this).children("ul").hide()}).end().css({visibility:"visible"}).show();a(document).triggerHandler("context_show.vakata")}},hide:function(){a.vakata.context.vis=!1;a.vakata.context.cnt.attr("class","").css({visibility:"hidden"});
a(document).triggerHandler("context_hide.vakata")},parse:function(b,c){if(!b)return!1;var e="",f=!1,j=!0;if(!c)a.vakata.context.func={};e+="<ul>";a.each(b,function(b,c){if(!c)return!0;a.vakata.context.func[b]=c.action;!j&&c.separator_before&&(e+="<li class='vakata-separator vakata-separator-before'></li>");j=!1;e+="<li class='"+(c._class||"")+(c._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";c.icon&&c.icon.indexOf("/")===-1&&(e+=" class='"+c.icon+"' ");c.icon&&c.icon.indexOf("/")!==-1&&(e+=
" style='background:url("+c.icon+") center center no-repeat;' ");e+=">&#160;</ins><a href='#' rel='"+b+"'>";c.submenu&&(e+="<span style='float:"+(a.vakata.context.rtl?"left":"right")+";'>&#187;</span>");e+=c.label+"</a>";c.submenu&&(f=a.vakata.context.parse(c.submenu,!0))&&(e+=f);e+="</li>";c.separator_after&&(e+="<li class='vakata-separator vakata-separator-after'></li>",j=!0)});e=e.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");e+="</ul>";a(document).triggerHandler("context_parse.vakata");
return e.length>10?e:!1},exec:function(b){return a.isFunction(a.vakata.context.func[b])?(a.vakata.context.func[b].call(a.vakata.context.data,a.vakata.context.par),!0):!1}};a(function(){a.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});a.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(){!a(this).parent().hasClass("jstree-contextmenu-disabled")&&a.vakata.context.exec(a(this).attr("rel"))?a.vakata.context.hide():a(this).blur()}).delegate("a","mouseover",function(){a.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");a(document).bind("mousedown",function(b){a.vakata.context.vis&&!a.contains(a.vakata.context.cnt[0],b.target)&&
a.vakata.context.hide()});typeof a.hotkeys!=="undefined"&&a(document).bind("keydown","up",function(b){if(a.vakata.context.vis){var c=a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();c.length||(c=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());c.addClass("vakata-hover");b.stopImmediatePropagation();b.preventDefault()}}).bind("keydown","down",function(b){if(a.vakata.context.vis){var c=
a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();c.length||(c=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());c.addClass("vakata-hover");b.stopImmediatePropagation();b.preventDefault()}}).bind("keydown","right",function(b){a.vakata.context.vis&&(a.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
b.stopImmediatePropagation(),b.preventDefault())}).bind("keydown","left",function(b){a.vakata.context.vis&&(a.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),b.stopImmediatePropagation(),b.preventDefault())}).bind("keydown","esc",function(b){a.vakata.context.hide();b.preventDefault()}).bind("keydown","space",function(b){a.vakata.context.cnt.find(".vakata-hover").last().children("a").click();b.preventDefault()})});a.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",a.proxy(function(b){b.preventDefault();a(b.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(b.currentTarget,b.pageX,b.pageY)},this)).delegate("a","click.jstree",a.proxy(function(){this.data.contextmenu&&a.vakata.context.hide()},this)).bind("destroy.jstree",a.proxy(function(){this.data.contextmenu&&a.vakata.context.hide()},this));a(document).bind("context_hide.vakata",a.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(b,c,e){var b=this._get_node(b),f=this.get_settings().contextmenu,j=b.children("a:visible:eq(0)"),g=!1,g=!1;f.select_node&&this.data.ui&&!this.is_selected(b)&&(this.deselect_all(),this.select_node(b,!0));
if(f.show_at_node||typeof c==="undefined"||typeof e==="undefined")g=j.offset(),c=g.left,e=g.top+this.data.core.li_height;g=b.data("jstree")&&b.data("jstree").contextmenu?b.data("jstree").contextmenu:f.items;a.isFunction(g)&&(g=g.call(this,b));this.data.contextmenu=!0;a.vakata.context.show(g,j,c,e,this,b,this._get_settings().core.rtl);this.data.themes&&a.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(d){d.jstree.plugin("types",{__init:function(){var b=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",d.proxy(function(){var a=b.type_attr,e="",f=this;d.each(b.types,function(b,g){d.each(g,function(a){/^(max_depth|max_children|icon|valid_children)$/.test(a)||f.data.types.attach_to.push(a)});if(!g.icon)return!0;if(g.icon.image||g.icon.position)e+=b=="default"?".jstree-"+f.get_index()+" a > .jstree-icon { ":".jstree-"+f.get_index()+" li["+a+'="'+b+'"] > a > .jstree-icon { ',g.icon.image&&(e+=" background-image:url("+
g.icon.image+"); "),e+=g.icon.position?" background-position:"+g.icon.position+"; ":" background-position:0 0; ",e+="} "});e!==""&&d.vakata.css.add_sheet({str:e,title:"jstree-types"})},this)).bind("before.jstree",d.proxy(function(a,b){var e,j;if((e=(e=this._get_settings().types.use_data?this._get_node(b.args[0]):!1)&&e!==-1&&e.length?e.data("jstree"):!1)&&e.types&&e.types[b.func]===!1)return a.stopImmediatePropagation(),!1;if(d.inArray(b.func,this.data.types.attach_to)!==-1&&b.args[0]&&(b.args[0].tagName||
b.args[0].jquery))if(e=this._get_settings().types.types,j=this._get_type(b.args[0]),(e[j]&&typeof e[j][b.func]!=="undefined"||e["default"]&&typeof e["default"][b.func]!=="undefined")&&this._check(b.func,b.args[0])===!1)return a.stopImmediatePropagation(),!1},this));a&&this.get_container().bind("load_node.jstree set_type.jstree",d.proxy(function(a,b){var e=b&&b.rslt&&b.rslt.obj&&b.rslt.obj!==-1?this._get_node(b.rslt.obj).parent():this.get_container_ul(),j=!1,g=this._get_settings().types;d.each(g.types,
function(a,b){if(b.icon&&(b.icon.image||b.icon.position))j=a==="default"?e.find("li > a > .jstree-icon"):e.find("li["+g.type_attr+"='"+a+"'] > a > .jstree-icon"),b.icon.image&&j.css("backgroundImage","url("+b.icon.image+")"),j.css("backgroundPosition",b.icon.position||"0 0")})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,c){c.type&&this._get_settings().types.use_data&&
this.set_type(c.type,a)},_get_type:function(a){a=this._get_node(a);return!a||!a.length?!1:a.attr(this._get_settings().types.type_attr)||"default"},set_type:function(a,c){var c=this._get_node(c),d=!c.length||!a?!1:c.attr(this._get_settings().types.type_attr,a);d&&this.__callback({obj:c,type:a});return d},_check:function(a,c,e){var c=this._get_node(c),f=!1,j=this._get_type(c),g=0,l=this,m=this._get_settings().types,n=!1;if(c===-1)if(m[a])f=m[a];else return;else{if(j===!1)return;(n=m.use_data?c.data("jstree"):
!1)&&n.types&&typeof n.types[a]!=="undefined"?f=n.types[a]:m.types[j]&&typeof m.types[j][a]!=="undefined"?f=m.types[j][a]:m.types["default"]&&typeof m.types["default"][a]!=="undefined"&&(f=m.types["default"][a])}d.isFunction(f)&&(f=f.call(this,c));a==="max_depth"&&c!==-1&&e!==!1&&m.max_depth!==-2&&f!==0&&c.children("a:eq(0)").parentsUntil(".jstree","li").each(function(c){if(m.max_depth!==-1&&m.max_depth-(c+1)<=0)return f=0,!1;g=c===0?f:l._check(a,this,!1);if(g!==-1&&g-(c+1)<=0)return f=0,!1;if(g>=
0&&(g-(c+1)<f||f<0))f=g-(c+1);if(m.max_depth>=0&&(m.max_depth-(c+1)<f||f<0))f=m.max_depth-(c+1)});return f},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),c=a.rt._get_settings().types,e=a.rt._check("max_children",a.cr),f=a.rt._check("max_depth",a.cr),j=a.rt._check("valid_children",a.cr),g=0,l=1;if(j==="none")return!1;if(d.isArray(j)&&a.ot&&a.ot._get_type&&(a.o.each(function(){if(d.inArray(a.ot._get_type(this),j)===-1)return l=!1}),l===!1))return!1;if(c.max_children!==
-2&&e!==-1&&(g=a.cr===-1?this.get_container().find("> ul > li").not(a.o).length:a.cr.find("> ul > li").not(a.o).length,g+a.o.length>e))return!1;if(c.max_depth!==-2&&f!==-1){l=0;if(f===0)return!1;if(typeof a.o.d==="undefined"){for(c=a.o;c.length>0;)c=c.find("> ul > li"),l++;a.o.d=l}if(f-a.o.d<0)return!1}return!0},create_node:function(a,c,e,f,j,g){if(!g&&(j||this._is_loaded(a))){var l=typeof c=="string"&&c.match(/^before|after$/i)&&a!==-1?this._get_parent(a):this._get_node(a),m=this._get_settings().types,
n=this._check("max_children",l),k=this._check("max_depth",l),i=this._check("valid_children",l);typeof e==="string"&&(e={data:e});e||(e={});if(i==="none")return!1;if(d.isArray(i))if(!e.attr||!e.attr[m.type_attr]){if(!e.attr)e.attr={};e.attr[m.type_attr]=i[0]}else if(d.inArray(e.attr[m.type_attr],i)===-1)return!1;if(m.max_children!==-2&&n!==-1&&(l=l===-1?this.get_container().find("> ul > li").length:l.find("> ul > li").length,l+1>n))return!1;if(m.max_depth!==-2&&k!==-1&&k-1<0)return!1}return this.__call_old(!0,
a,c,e,f,j,g)}}})})(jQuery);(function(a){a.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return this.nodeType==3}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,c,d){var e=this;this.load_node_html(a,function(){e.__callback({obj:e._get_node(a)});c.call(this)},d)},_is_loaded:function(b){b=
this._get_node(b);return b==-1||!b||!this._get_settings().html_data.ajax&&!a.isFunction(this._get_settings().html_data.data)||b.is(".jstree-open, .jstree-leaf")||b.children("ul").children("li").size()>0},load_node_html:function(b,c,e){var f,j=this.get_settings().html_data,g=function(){};f=function(){};if((b=this._get_node(b))&&b!==-1)if(b.data("jstree_is_loading"))return;else b.data("jstree_is_loading",!0);switch(!0){case a.isFunction(j.data):j.data.call(this,b,a.proxy(function(g){g&&g!==""&&g.toString&&
g.toString().replace(/^[\s\n]+$/,"")!==""?(g=a(g),g.is("ul")||(g=a("<ul />").append(g)),b==-1||!b?this.get_container().children("ul").empty().append(g.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"):(b.children("a.jstree-loading").removeClass("jstree-loading"),b.append(g).children("ul").find("li, a").filter(function(){return!this.firstChild||
!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),b.removeData("jstree_is_loading")),this.clean_node(b),c&&c.call(this)):b&&b!==-1?(b.children("a.jstree-loading").removeClass("jstree-loading"),b.removeData("jstree_is_loading"),j.correct_state&&(this.correct_state(b),c&&c.call(this))):j.correct_state&&(this.get_container().children("ul").empty(),c&&c.call(this))},
this));break;case !j.data&&!j.ajax:if(!b||b==-1)this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();c&&c.call(this);break;case !!j.data&&!j.ajax||!!j.data&&!!j.ajax&&(!b||b===-1):if(!b||
b==-1)f=a(j.data),f.is("ul")||(f=a("<ul />").append(f)),this.get_container().children("ul").empty().append(f.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();c&&c.call(this);break;case !j.data&&!!j.ajax||!!j.data&&!!j.ajax&&b&&b!==-1:b=this._get_node(b);g=function(a,
c,g){var d=this.get_settings().html_data.ajax.error;d&&d.call(this,a,c,g);b!=-1&&b.length?(b.children("a.jstree-loading").removeClass("jstree-loading"),b.removeData("jstree_is_loading"),c==="success"&&j.correct_state&&this.correct_state(b)):c==="success"&&j.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)};j.ajax.context=this;j.ajax.error=g;j.ajax.success=function(e,f,h){var k=this.get_settings().html_data.ajax.success;k&&(e=k.call(this,e,f,h)||e);if(e===""||e&&e.toString&&
e.toString().replace(/^[\s\n]+$/,"")==="")return g.call(this,h,f,"");e?(e=a(e),e.is("ul")||(e=a("<ul />").append(e)),b==-1||!b?this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"):(b.children("a.jstree-loading").removeClass("jstree-loading"),
b.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),b.removeData("jstree_is_loading")),this.clean_node(b),c&&c.call(this)):b&&b!==-1?(b.children("a.jstree-loading").removeClass("jstree-loading"),b.removeData("jstree_is_loading"),j.correct_state&&(this.correct_state(b),c&&
c.call(this))):j.correct_state&&(this.get_container().children("ul").empty(),c&&c.call(this))};if(!j.ajax.dataType)j.ajax.dataType="html";if(a.isFunction(j.ajax.url))j.ajax.url=j.ajax.url.call(this,b);if(a.isFunction(j.ajax.data))j.ajax.data=j.ajax.data.call(this,b);a.ajax(j.ajax)}}}});a.jstree.defaults.plugins.push("html_data")})(jQuery);(function(a){a.jstree.plugin("themeroller",{__init:function(){var b=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a",
"mouseenter.jstree",function(c){a(c.currentTarget).hasClass("jstree-loading")||a(this).addClass(b.item_h)}).delegate("a","mouseleave.jstree",function(){a(this).removeClass(b.item_h)}).bind("init.jstree",a.proxy(function(a,b){b.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(b.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",a.proxy(function(a,b){this._themeroller(b.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",
a.proxy(function(){this._themeroller()},this)).bind("close_node.jstree",a.proxy(function(a,b){this._themeroller(b.rslt.obj)},this)).bind("delete_node.jstree",a.proxy(function(a,b){this._themeroller(b.rslt.parent)},this)).bind("correct_state.jstree",a.proxy(function(a,d){d.rslt.obj.children("ins.jstree-icon").removeClass(b.opened+" "+b.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,
"").indexOf("ui-icon-")===-1}).removeClass(b.item_open+" "+b.item_clsd).addClass(b.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",a.proxy(function(a,d){d.rslt.obj.children("a").addClass(b.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",a.proxy(function(){this.get_container().find("a."+b.item_a).removeClass(b.item_a).end().find("a.jstree-clicked").addClass(b.item_a)},this)).bind("dehover_node.jstree",a.proxy(function(a,d){d.rslt.obj.children("a").removeClass(b.item_h)},
this)).bind("hover_node.jstree",a.proxy(function(a,d){this.get_container().find("a."+b.item_h).not(d.rslt.obj).removeClass(b.item_h);d.rslt.obj.children("a").addClass(b.item_h)},this)).bind("move_node.jstree",a.proxy(function(a,b){this._themeroller(b.rslt.o);this._themeroller(b.rslt.op)},this))},__destroy:function(){var b=this._get_settings().themeroller,c=["ui-icon"];a.each(b,function(a,b){b=b.split(" ");b.length&&(c=c.concat(b))});this.get_container().removeClass("ui-widget-content").find("."+c.join(", .")).removeClass(c.join(" "))},
_fn:{_themeroller:function(a){var c=this._get_settings().themeroller,a=!a||a==-1?this.get_container_ul():this._get_node(a).parent();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(c.opened).addClass("ui-icon "+c.closed).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(c.item_leaf+" "+
c.item_open).addClass(c.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(c.closed).addClass("ui-icon "+c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(c.item_leaf+" "+c.item_clsd).addClass(c.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(c.closed+
" ui-icon "+c.opened).end().children("a").addClass(c.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(c.item_clsd,"").replace(c.item_open,"").replace(c.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(c.item_clsd+" "+c.item_open).addClass(c.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",
item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});a(function(){a.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(jQuery);(function(a){a.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",a.proxy(function(b,c){var e=[],f=!0,j;c.func=="move_node"&&c.args[4]===!0&&c.args[0].o&&c.args[0].o.length&&(c.args[0].o.children("a").each(function(){e.push(a(this).text().replace(/^\s+/g,
""))}),f=this._check_unique(e,c.args[0].np.find("> ul > li").not(c.args[0].o),"move_node"));if(c.func=="create_node"&&(c.args[4]||this._is_loaded(c.args[0]))){f=this._get_node(c.args[0]);if(c.args[1]&&(c.args[1]==="before"||c.args[1]==="after"))if(f=this._get_parent(c.args[0]),!f||f===-1)f=this.get_container();typeof c.args[2]==="string"?e.push(c.args[2]):!c.args[2]||!c.args[2].data?e.push(this._get_string("new_node")):e.push(c.args[2].data);f=this._check_unique(e,f.find("> ul > li"),"create_node")}if(c.func==
"rename_node"){e.push(c.args[1]);j=this._get_node(c.args[0]);f=this._get_parent(j);if(!f||f===-1)f=this.get_container();f=this._check_unique(e,f.find("> ul > li").not(j),"rename_node")}if(!f)return b.stopPropagation(),!1},this))},defaults:{error_callback:a.noop},_fn:{_check_unique:function(b,c,e){var f=[];c.children("a").each(function(){f.push(a(this).text().replace(/^\s+/g,""))});if(!f.length||!b.length)return!0;f=f.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,
"").split(",");return f.length+b.length!=f.concat(b).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length?(this._get_settings().unique.error_callback.call(null,b,c,e),!1):!0},check_move:function(){if(!this.__call_old())return!1;var b=this._get_move(),c=[];return b.o&&b.o.length?(b.o.children("a").each(function(){c.push(a(this).text().replace(/^\s+/g,""))}),this._check_unique(c,b.np.find("> ul > li").not(b.o),"check_move")):!0}}})})(jQuery);
(function(d){d.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",d.proxy(function(){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",d.proxy(function(a,c){this._prepare_wholerow_span(c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",
d.proxy(function(a,c){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,b){return function(){a._prepare_wholerow_ul(b)}}(this,c&&c.rslt&&c.rslt.obj?c.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",d.proxy(function(){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",d.proxy(function(a,c){c.rslt.obj.each(function(){c.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((d(this).offset().top-c.inst.get_container().offset().top+c.inst.get_container()[0].scrollTop)/c.inst.data.core.li_height,10)+")").children("a").attr("class",c.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",d.proxy(function(a,c){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));a.type==="hover_node"&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((c.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",c.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(a){var c=d(a.currentTarget);a.target.tagName==="A"||a.target.tagName==="INS"&&c.closest("li").is(".jstree-open, .jstree-closed")||(c.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li",
"mouseover.jstree",d.proxy(function(a){a.stopImmediatePropagation();if(d(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",d.proxy(function(a){d(a.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(a.currentTarget)},this));(i||a)&&d.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();
this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(a){a=!a||a==-1?this.get_container().find("> ul > li"):this._get_node(a);a!==!1&&a.each(function(){d(this).find("li").andSelf().each(function(){var a=d(this);if(a.children(".jstree-wholerow-span").length)return!0;a.prepend("<span class='jstree-wholerow-span' style='width:"+a.parentsUntil(".jstree","li").length*18+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),
c=a.html();a.addClass("jstree-wholerow-real");if(this.data.wholerow.last_html!==c)this.data.wholerow.last_html=c,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",(a.height()+(i?5:0))*-1).find("li[id]").each(function(){this.removeAttribute("id")}).end())}}});d(function(){var b=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
e&&(b+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(i||a)b+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";d.vakata.css.add_sheet({str:b,title:"jstree"})})})(jQuery);(function(a){var b=
["getChildren","getChildrenCount","getAttr","getName","getProps"],c=function(b,c){var e=!0,b=b||{},c=[].concat(c);a.each(c,function(c,f){if(!a.isFunction(b[f]))return e=!1});return e};a.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(e,f){var j=e==-1?this._get_settings().model.object:e.data("jstree_model");if(!c(j,b))return f.call(null,!1);this._get_settings().model.async?j.getChildren(a.proxy(function(a){this.model_done(a,
f)},this)):this.model_done(j.getChildren(),f)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(b,c){var e=[],g=this._get_settings(),l=this;a.isArray(b)||(b=[b]);a.each(b,function(b,c){var f=c.getProps()||{};f.attr=c.getAttr()||{};if(c.getChildrenCount())f.state="closed";f.data=c.getName();if(!a.isArray(f.data))f.data=[f.data];l.data.types&&a.isFunction(c.getType)&&(f.attr[g.types.type_attr]=c.getType());if(f.attr.id&&g.model.id_prefix)f.attr.id=g.model.id_prefix+f.attr.id;if(!f.metadata)f.metadata=
{};f.metadata.jstree_model=c;e.push(f)});c.call(null,e)}}})})(jQuery)}})();
(function(a,i,e){a.fn.lazyload=function(d){var b=function(b){b=a(b).offset();/; CPU.*OS (?:3_2|4_0)/i.test(navigator.userAgent)&&"getBoundingClientRect"in e.documentElement&&(b.top-=i.scrollY,b.left-=i.scrollX);return b},c=this,h={threshold:0,container:i,effect:"show",namespace:".lazyload"};d&&a.extend(h,d);var f=a(h.container),j=h.namespace,g="appear"+j,d="resize"+j,l="scroll"+j,m=function(c){c=a(c);if(!c.length)return!1;var g=h.threshold,d;if(f[0]===i)var e=f.height()+f.scrollTop(),l=f.scrollLeft(),
m=f.width()+f.scrollLeft(),j=f.scrollTop();else d=b(f),e=d.top+f.height(),l=d.left,m=d.left+f.width(),j=d.top;d=b(c);var v=d.top+c.height(),D=d.left,c=d.left+c.width();return d.top+g<=e&&D+g<=m&&v-g>=j&&c-g>l};c.each(function(){var b=this,c=a(this);if(m(c)&&!c.attr("original"))b.loaded=!0;else if(!(b.offsetWidth==0||b.offsetHeight==0||c.attr("href","src")=="")){c.data("original",c.attr("original")||c.attr("src"));if(!c.attr("src")||h.placeholder===c.attr("src")||!m(c))h.placeholder?c.attr("src",h.placeholder):
c.removeAttr("src"),b.loaded=!1;c.one(g,function(){this.loaded||a("<img />").load(function(){c.hide().attr("src",c.data("original"))[h.effect](h.effectSpeed).removeData("original");b.loaded=!0}).attr("src",c.data("original"))})}});f.bind(l+" "+d,function(){c.each(function(){m(this)&&!this.loaded&&$e.trigger(g)});c=a(a.grep(c,function(a){return!a.loaded}));c.length||f.unbind(j)}).trigger(l);return this}})(jQuery,window,document);
new function(a){var i=a.separator||"&",e=a.spaces===!1?!1:!0,d=a.prefix!==!1?a.hash===!0?"#":"?":"",b=a.numbers===!1?!1:!0;jQuery.query=new function(){var a=function(a,b){return a!=void 0&&a!==null&&(b?a.constructor==b:!0)},h=function(a){for(var b=/\[([^[]*)\]/g,c=/^([^[]+)(\[.*\])?$/.exec(a),d=c[1],e=[];a=b.exec(c[2]);)e.push(a[1]);return[d,e]},f=function(b,d,e){var h=d.shift();typeof b!="object"&&(b=null);if(h==="")if(b||(b=[]),a(b,Array))b.push(d.length==0?e:f(null,d.slice(0),e));else if(a(b,Object)){for(h=
0;b[h++]!=null;);b[--h]=d.length==0?e:f(b[h],d.slice(0),e)}else b=[],b.push(d.length==0?e:f(null,d.slice(0),e));else if(h&&h.match(/^\s*[0-9]+\s*$/)){var k=parseInt(h,10);b||(b=[]);b[k]=d.length==0?e:f(b[k],d.slice(0),e)}else if(h){k=h.replace(/^\s*|\s*$/g,"");b||(b={});if(a(b,Array)){for(var j={},h=0;h<b.length;++h)j[h]=b[h];b=j}b[k]=d.length==0?e:f(b[k],d.slice(0),e)}else return e;return b},j=function(a){var c=this;c.keys={};a.queryObject?jQuery.each(a.get(),function(a,b){c.SET(a,b)}):jQuery.each(arguments,
function(){var a;a=(""+this).replace(/^[?#]/,"");a=a.replace(/[;&]$/,"");e&&(a=a.replace(/[+]/g," "));jQuery.each(a.split(/[&;]/),function(){var a=decodeURIComponent(this.split("=")[0]||""),g=decodeURIComponent(this.split("=")[1]||"");a&&(b&&(/^[+-]?[0-9]+\.[0-9]*$/.test(g)?g=parseFloat(g):/^[+-]?[0-9]+$/.test(g)&&(g=parseInt(g,10))),c.SET(a,!g&&g!==0?!0:g))})});return c};j.prototype={queryObject:!0,has:function(b,d){var e=this.get(b);return a(e,d)},GET:function(b){if(!a(b))return this.keys;for(var d=
h(b),b=d[1],d=this.keys[d[0]];d!=null&&b.length!=0;)d=d[b.shift()];return typeof d=="number"?d:d||""},get:function(b){b=this.GET(b);if(a(b,Object))return jQuery.extend(!0,{},b);else if(a(b,Array))return b.slice(0);return b},SET:function(b,d){var e=!a(d)?null:d,n=h(b),k=n[0];this.keys[k]=f(this.keys[k],n[1].slice(0),e);return this},set:function(a,b){return this.copy().SET(a,b)},REMOVE:function(a){return this.SET(a,null).COMPACT()},remove:function(a){return this.copy().REMOVE(a)},EMPTY:function(){var a=
this;jQuery.each(a.keys,function(b){delete a.keys[b]});return a},load:function(a){var b=a.replace(/^.*?[#](.+?)(?:\?.+)?$/,"$1"),c=a.replace(/^.*?[?](.+?)(?:#.+)?$/,"$1");return new j(a.length==c.length?"":c,a.length==b.length?"":b)},empty:function(){return this.copy().EMPTY()},copy:function(){return new j(this)},COMPACT:function(){function b(d){var e=typeof d=="object"?a(d,Array)?[]:{}:d;typeof d=="object"&&jQuery.each(d,function(d,f){if(!a(f))return!0;var h=b(f);a(e,Array)?e.push(h):e[d]=h});return e}
this.keys=b(this.keys);return this},compact:function(){return this.copy().COMPACT()},toString:function(){var b=[],f=[],h=function(a){a+="";a=encodeURIComponent(a);e&&(a=a.replace(/%20/g,"+"));return a},n=function(b,d){var g=function(a){return!d||d==""?""+a:[d,"[",a,"]"].join("")};jQuery.each(b,function(b,d){if(typeof d=="object")n(d,g(b));else{var e=g(b);a(d)&&d!==!1&&(e=[h(e)],d!==!0&&(e.push("="),e.push(h(d))),f.push(e.join("")))}})};n(this.keys);f.length>0&&b.push(d);b.push(f.join(i));return b.join("")}};
return new j(location.search,location.hash)}}(jQuery.query||{});
(function(a){function i(a){return typeof a=="object"?a:{top:a,left:a}}var e=a.scrollTo=function(d,b,c){a(window).scrollTo(d,b,c)};e.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1};e.window=function(){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"])==-1)return this;var d=(this.contentWindow||this).document||this.ownerDocument||this;return a.browser.safari||
d.compatMode=="BackCompat"?d.body:d.documentElement})};a.fn.scrollTo=function(d,b,c){typeof b=="object"&&(c=b,b=0);typeof c=="function"&&(c={onAfter:c});d=="max"&&(d=9E9);c=a.extend({},e.defaults,c);b=b||c.speed||c.duration;c.queue=c.queue&&c.axis.length>1;c.queue&&(b/=2);c.offset=i(c.offset);c.over=i(c.over);return this._scrollable().each(function(){function h(a){j.animate(m,b,c.easing,a&&function(){a.call(this,d,c)})}var f=this,j=a(f),g=d,l,m={},n=j.is("html,body");switch(typeof g){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(g)){g=
i(g);break}g=a(g,this);case "object":if(g.is||g.style)l=(g=a(g)).offset()}a.each(c.axis.split(""),function(a,b){var d=b=="x"?"Left":"Top",i=d.toLowerCase(),r="scroll"+d,t=f[r],v=e.max(f,b);l?(m[r]=l[i]+(n?0:t-j.offset()[i]),c.margin&&(m[r]-=parseInt(g.css("margin"+d))||0,m[r]-=parseInt(g.css("border"+d+"Width"))||0),m[r]+=c.offset[i]||0,c.over[i]&&(m[r]+=g[b=="x"?"width":"height"]()*c.over[i])):(d=g[i],m[r]=d.slice&&d.slice(-1)=="%"?parseFloat(d)/100*v:d);/^\d+$/.test(m[r])&&(m[r]=m[r]<=0?0:Math.min(m[r],
v));!a&&c.queue&&(t!=m[r]&&h(c.onAfterFirst),delete m[r])});h(c.onAfter)}).end()};e.max=function(d,b){var c=b=="x"?"Width":"Height",e="scroll"+c;if(!a(d).is("html,body"))return d[e]-a(d)[c.toLowerCase()]();var c="client"+c,f=d.ownerDocument.documentElement,i=d.ownerDocument.body;return Math.max(f[e],i[e])-Math.min(f[c],i[c])}})(jQuery);
(function(a){a.fn.superfish=function(e){var d=a.fn.superfish,b=d.c,c=a(['<span class="',b.arrowClass,'"> &#187;</span>'].join("")),h=function(){var b=a(this),c=i(b);clearTimeout(c.sfTimer);b.showSuperfishUl().siblings().hideSuperfishUl()},f=function(){var b=a(this),c=i(b),e=d.op;clearTimeout(c.sfTimer);c.sfTimer=setTimeout(function(){e.retainPath=a.inArray(b[0],e.$path)>-1;b.hideSuperfishUl();e.$path.length&&b.parents(["li.",e.hoverClass].join("")).length<1&&h.call(e.$path)},e.delay)},i=function(a){a=
a.parents(["ul.",b.menuClass,":first"].join(""))[0];d.op=d.o[a.serial];return a};return this.each(function(){var g=this.serial=d.o.length,l=a.extend({},d.defaults,e);l.$path=a("li."+l.pathClass,this).slice(0,l.pathLevels).each(function(){a(this).addClass([l.hoverClass,b.bcClass].join(" ")).filter("li:has(ul)").removeClass(l.pathClass)});d.o[g]=d.op=l;a("li:has(ul)",this)[a.fn.hoverIntent&&!l.disableHI?"hoverIntent":"hover"](h,f).each(function(){l.autoArrows&&a(">a:first-child",this).addClass(b.anchorClass).append(c.clone())}).not("."+
b.bcClass).hideSuperfishUl();var m=a("a",this);m.each(function(a){var b=m.eq(a).parents("li");m.eq(a).focus(function(){h.call(b)}).blur(function(){f.call(b)})});l.onInit.call(this)}).each(function(){var c=[b.menuClass];d.op.dropShadows&&!(a.browser.msie&&a.browser.version<7)&&c.push(b.shadowClass);a(this).addClass(c.join(" "))})};var i=a.fn.superfish;i.o=[];i.op={};i.IE7fix=function(){var e=i.op;a.browser.msie&&a.browser.version>6&&e.dropShadows&&e.animation.opacity!=void 0&&this.toggleClass(i.c.shadowClass+
"-off")};i.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"};i.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:!0,dropShadows:!0,disableHI:!1,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};a.fn.extend({hideSuperfishUl:function(){var e=i.op,d=e.retainPath===!0?e.$path:"";e.retainPath=!1;d=a(["li.",
e.hoverClass].join(""),this).add(this).not(d).removeClass(e.hoverClass).find(">ul").hide().css("visibility","hidden");e.onHide.call(d);return this},showSuperfishUl:function(){var a=i.op,d=this.addClass(a.hoverClass).find(">ul:hidden").css("visibility","visible");i.IE7fix.call(d);a.onBeforeShow.call(d);d.animate(a.animation,a.speed,function(){i.IE7fix.call(d);a.onShow.call(d)});return this}})})(jQuery);
(function(a){var i="swfupload_loaded_handler,file_queued_handler,file_queue_error_handler,file_dialog_start_handler,file_dialog_complete_handler,upload_start_handler,upload_progress_handler,upload_error_handler,upload_success_handler,upload_complete_handler,queue_complete_handler".split(","),e=[];a.fn.swfupload=function(){var d=a.makeArray(arguments);return this.each(function(){var b;if(d.length==1&&typeof d[0]=="object"){if(b=a(this).data("__swfu"),!b){var c=d[0],h=a(this);b=[];a.merge(b,i);a.merge(b,
e);a.each(b,function(b,d){var e=d.replace(/_handler$/,"").replace(/_([a-z])/g,function(a,b){return b.toUpperCase()});c[d]=function(){var b=a.Event(e);h.trigger(b,a.makeArray(arguments));return!b.isDefaultPrevented()}});a(this).data("__swfu",new SWFUpload(c))}}else if(d.length>0&&typeof d[0]=="string"){var f=d.shift();(b=a(this).data("__swfu"))&&b[f]&&b[f].apply(b,d)}})};a.swfupload={additionalHandlers:function(){if(arguments.length===0)return e.slice();else a(arguments).each(function(d,b){a.merge(e,
a.makeArray(b))})},defaultHandlers:function(){return i.slice()},getInstance:function(d){return a(d).data("__swfu")}}})(jQuery);
(function(a,i,e){a.fn.tabby=function(d){var b=a.extend({},a.fn.tabby.defaults,d),c=a.fn.tabby.pressed;return this.each(function(){$this=a(this);var d=a.meta?a.extend({},b,$this.data()):b;$this.bind("keydown",function(b){var i=a.fn.tabby.catch_kc(b);if(16==i)c.shft=!0;if(17==i)c.ctrl=!0,setTimeout("$.fn.tabby.pressed.ctrl = false;",1E3);if(18==i)c.alt=!0,setTimeout("$.fn.tabby.pressed.alt = false;",1E3);if(9==i&&!c.ctrl&&!c.alt){c.last=i;setTimeout("$.fn.tabby.pressed.last = null;",0);var b=a(b.target).get(0),
g=c.shft,i=b.scrollTop;if(b.setSelectionRange){var l=b.selectionStart,m=b.selectionEnd;if(l==m)if(g)if("\t"==b.value.substring(l-d.tabString.length,l))b.value=b.value.substring(0,l-d.tabString.length)+b.value.substring(l),b.focus(),b.setSelectionRange(l-d.tabString.length,l-d.tabString.length);else{if("\t"==b.value.substring(l,l+d.tabString.length))b.value=b.value.substring(0,l)+b.value.substring(l+d.tabString.length),b.focus(),b.setSelectionRange(l,l)}else b.value=b.value.substring(0,l)+d.tabString+
b.value.substring(l),b.focus(),b.setSelectionRange(l+d.tabString.length,l+d.tabString.length);else{var n=b.value.split("\n"),k=[],q=0,p=0,s;for(s in n)p=q+n[s].length,k.push({start:q,end:p,selected:q<=l&&p>l||p>=m&&q<m||q>l&&p<m}),q=p+1;n=0;for(s in k)if(k[s].selected)if(q=k[s].start+n,g&&d.tabString==b.value.substring(q,q+d.tabString.length))b.value=b.value.substring(0,q)+b.value.substring(q+d.tabString.length),n-=d.tabString.length;else if(!g)b.value=b.value.substring(0,q)+d.tabString+b.value.substring(q),
n+=d.tabString.length;b.focus();b.setSelectionRange(l+(n>0?d.tabString.length:n<0?-d.tabString.length:0),m+n)}}else if(e.selection&&(s=e.selection.createRange(),b==s.parentElement()))if(""==s.text){if(g){g=s.getBookmark();s.moveStart("character",-d.tabString.length);if(d.tabString==s.text)s.text="";else if(s.moveToBookmark(g),s.moveEnd("character",d.tabString.length),d.tabString==s.text)s.text="";s.collapse(!0)}else s.text=d.tabString,s.collapse(!1);s.select()}else{m=s.text;l=m.length;k=m.split("\r\n");
m=e.body.createTextRange();m.moveToElementText(b);m.setEndPoint("EndToStart",s);q=m.text;n=q.split("\r\n");q=q.length;p=e.body.createTextRange();p.moveToElementText(b);p.setEndPoint("StartToEnd",s);var p=p.text,r=e.body.createTextRange();r.moveToElementText(b);r.setEndPoint("StartToEnd",m);var t=r.text,r=a(b).html();a("#r3").text(q+" + "+l+" + "+p.length+" = "+r.length);q+t.length<r.length?(n.push(""),q+=2,g&&d.tabString==k[0].substring(0,d.tabString.length)?k[0]=k[0].substring(d.tabString.length):
g||(k[0]=d.tabString+k[0])):g&&d.tabString==n[n.length-1].substring(0,d.tabString.length)?n[n.length-1]=n[n.length-1].substring(d.tabString.length):g||(n[n.length-1]=d.tabString+n[n.length-1]);for(t=1;t<k.length;t++)g&&d.tabString==k[t].substring(0,d.tabString.length)?k[t]=k[t].substring(d.tabString.length):g||(k[t]=d.tabString+k[t]);1==n.length&&0==q&&(g&&d.tabString==k[0].substring(0,d.tabString.length)?k[0]=k[0].substring(d.tabString.length):g||(k[0]=d.tabString+k[0]));q+l+p.length<r.length&&k.push("");
m.text=n.join("\r\n");s.text=k.join("\r\n");g=e.body.createTextRange();g.moveToElementText(b);0<q?g.setEndPoint("StartToEnd",m):g.setEndPoint("StartToStart",m);g.setEndPoint("EndToEnd",s);g.select()}b.scrollTop=i;return!1}}).bind("keyup",function(b){if(16==a.fn.tabby.catch_kc(b))c.shft=!1}).bind("blur",function(b){9==c.last&&a(b.target).one("focus",function(){c.last=null}).get(0).focus()})})};a.fn.tabby.catch_kc=function(a){return a.keyCode?a.keyCode:a.charCode?a.charCode:a.which};a.fn.tabby.pressed=
{shft:!1,ctrl:!1,alt:!1,last:null};a.fn.tabby.defaults={tabString:String.fromCharCode(9)}})(jQuery,this,this.document);
(function(a){a.extend({tablesorter:new function(){function e(a,b){d(a+","+((new Date).getTime()-b.getTime())+"ms")}function d(a){typeof console!="undefined"&&typeof console.debug!="undefined"?console.log(a):alert(a)}function b(b,g){if(b.config.debug)var e="";var h=b.tBodies[0].rows;if(b.tBodies[0].rows[0])for(var l=[],h=h[0].cells,k=h.length,m=0;m<k;m++){var n=!1;a.metadata&&a(g[m]).metadata()&&a(g[m]).metadata().sorter?n=c(a(g[m]).metadata().sorter):b.config.headers[m]&&b.config.headers[m].sorter&&
(n=c(b.config.headers[m].sorter));if(!n)a:{for(var n=b,i=h[m],j=t.length,p=1;p<j;p++)if(t[p].is(a.trim(f(n.config,i)),n,i)){n=t[p];break a}n=t[0]}b.config.debug&&(e+="column:"+m+" parser:"+n.id+"\n");l.push(n)}b.config.debug&&d(e);return l}function c(a){for(var b=t.length,c=0;c<b;c++)if(t[c].id.toLowerCase()==a.toLowerCase())return t[c];return!1}function h(b){if(b.config.debug)var c=new Date;for(var d=b.tBodies[0]&&b.tBodies[0].rows.length||0,g=b.tBodies[0].rows[0]&&b.tBodies[0].rows[0].cells.length||
0,h=b.config.parsers,l={row:[],normalized:[]},k=0;k<d;++k){var m=a(b.tBodies[0].rows[k]),n=[];if(m.hasClass(b.config.cssChildRow))l.row[l.row.length-1]=l.row[l.row.length-1].add(m);else{l.row.push(m);for(var i=0;i<g;++i)n.push(h[i].format(f(b.config,m[0].cells[i]),b,m[0].cells[i]));n.push(l.normalized.length);l.normalized.push(n)}}b.config.debug&&e("Building cache for "+d+" rows:",c);return l}function f(b,c){if(!c)return"";var d="";return d=b.textExtraction=="simple"?c.childNodes[0]&&c.childNodes[0].hasChildNodes()?
c.childNodes[0].innerHTML:c.innerHTML:typeof b.textExtraction=="function"?b.textExtraction(c):a(c).text()}function i(b,c){if(b.config.debug)var d=new Date;for(var g=c.row,f=c.normalized,h=f.length,l=f[0].length-1,k=a(b.tBodies[0]),n=[],j=0;j<h;j++){var p=f[j][l];n.push(g[p]);if(!b.config.appender)for(var p=g[p],q=p.length,s=0;s<q;s++)k[0].appendChild(p[s])}b.config.appender&&b.config.appender(b,n);n=null;b.config.debug&&e("Rebuilt table:",d);m(b);setTimeout(function(){a(b).trigger("sortEnd")},0)}
function g(b){if(b.config.debug)var c=new Date;var g=b.config;$tableHeaders=a(g.selectorHeaders,b).each(function(c){this.column=c;this.count=this.order=typeof g.sortInitialOrder!="Number"?g.sortInitialOrder.toLowerCase()=="desc"?1:0:g.sortInitialOrder==1?1:0;var d;d=a.metadata&&a(this).metadata().sorter===!1?!0:!1;d||(d=b.config.headers[c]&&b.config.headers[c].sorter===!1?!0:!1);if(d)this.sortDisabled=!0;this.sortDisabled||(g.useUI?(a(this).prepend("<span></span>").children("span").addClass(g.cssUI.icon),
a(this).hover(function(){a(this).addClass(g.cssUI.hover)},function(){a(this).removeClass(g.cssUI.hover)})):g.onRenderHeader&&g.onRenderHeader.apply(this));g.headerList[c]=this});b.config.debug&&(e("Built headers:",c),d($tableHeaders));return $tableHeaders}function l(b,c){var d=b.config;return d.useUI?(a(b).parent("div:first").addClass(d.cssUI.widget),c.addClass(d.cssUI.header),[d.cssUI.iconDesc,d.cssUI.iconAsc,d.cssUI.iconBoth]):(c.addClass(d.cssHeader),[d.cssDesc,d.cssAsc])}function m(a){for(var b=
a.config.widgets,c=b.length,d=0;d<c;d++)n(b[d]).format(a)}function n(a){for(var b=v.length,c=0;c<b;c++)if(v[c].id.toLowerCase()==a.toLowerCase())return v[c]}function k(a,b){for(var c=b.length,d=0;d<c;d++)if(b[d][0]==a)return!0;return!1}function q(b,c,d,g){b=b.config;b.useUI?c.children("span").removeClass(g[0]).removeClass(g[1]).addClass(g[2]):c.removeClass(g[0]).removeClass(g[1]);var e=[];c.each(function(){this.sortDisabled||(e[this.column]=a(this))});for(var c=d.length,f=0;f<c;f++)b.useUI?e[d[f][0]].children("span").removeClass(g[2]).addClass(g[d[f][1]]):
e[d[f][0]].addClass(g[d[f][1]])}function p(b){if(b.config.widthFixed){var c=a("<colgroup>");a("tr:first td",b.tBodies[0]).each(function(){c.append(a("<col>").css("width",a(this).width()))});a(b).prepend(c)}}function s(a,b,c){if(a.config.debug)var d=new Date;for(var g="var sortWrapper = function(a,b) {",f=b.length,h=0;h<f;h++){var l=b[h][0],k=b[h][1],l=a.config.parsers[l].type=="text"?k==0?r("text","asc",l):r("text","desc",l):k==0?r("numeric","asc",l):r("numeric","desc",l),m="e"+h;g+="var "+m+" = "+
l;g+="if("+m+") { return "+m+"; } ";g+="else { "}h=c.normalized[0].length-1;g+="return a["+h+"]-b["+h+"];";for(h=0;h<f;h++)g+="}; ";g+="return 0; ";g+="}; ";a.config.debug&&e("Evaling expression:"+g,new Date);eval(g);c.normalized.sort(sortWrapper);a.config.debug&&e("Sorting on "+b.toString()+" and dir "+k+" time:",d);return c}function r(a,b,c){var d="a["+c+"]",c="b["+c+"]";if(a=="text"&&b=="asc")return"("+d+" == "+c+" ? 0 : ("+d+" === null ? Number.POSITIVE_INFINITY : ("+c+" === null ? Number.NEGATIVE_INFINITY : ("+
d+" < "+c+") ? -1 : 1 )));";else if(a=="text"&&b=="desc")return"("+d+" == "+c+" ? 0 : ("+d+" === null ? Number.POSITIVE_INFINITY : ("+c+" === null ? Number.NEGATIVE_INFINITY : ("+c+" < "+d+") ? -1 : 1 )));";else if(a=="numeric"&&b=="asc")return"("+d+" === null && "+c+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+c+" === null ? Number.NEGATIVE_INFINITY : "+d+" - "+c+"));";else if(a=="numeric"&&b=="desc")return"("+d+" === null && "+c+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+
c+" === null ? Number.NEGATIVE_INFINITY : "+c+" - "+d+"));"}var t=[],v=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",cssUI:{widget:"ui-widget ui-widget-content ui-corner-all",header:"ui-widget-header ui-corner-all",hover:"ui-state-hover",icon:"ui-icon",iconBoth:"ui-icon-arrowthick-2-n-s",iconDesc:"ui-icon-arrowthick-1-n",iconAsc:"ui-icon-arrowthick-1-s"},sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,
textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],locale:"us",format:{us:{decimal:".",date:"/"},en:{decimal:".",date:"/"},eu:{decimal:",",date:"."},de:{decimal:",",date:"."}},onRenderHeader:null,selectorHeaders:"thead th",useUI:!1,debug:!1};this.benchmark=e;this.construct=function(c){return this.each(function(){if(this.tHead&&this.tBodies){var d,e,t,r;this.config={};r=a.extend(this.config,a.tablesorter.defaults,
c);d=a(this);a.data(this,"tablesorter",r);e=g(this);this.config.parsers=b(this,e);t=h(this);var v=l(this,e);p(this);e.click(function(b){var c=d[0].tBodies[0]&&d[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&c>0){d.trigger("sortStart");a(this);c=this.column;this.order=this.count++%2;if(b[r.sortMultiSortKey])if(k(c,r.sortList))for(b=0;b<r.sortList.length;b++){var g=r.sortList[b],f=r.headerList[g[0]];if(g[0]==c)f.count=g[1],f.count++,g[1]=f.count%2}else r.sortList.push([c,this.order]);else{r.sortList=
[];if(r.sortForce!=null){g=r.sortForce;for(b=0;b<g.length;b++)g[b][0]!=c&&r.sortList.push(g[b])}r.sortList.push([c,this.order])}setTimeout(function(){q(d[0],e,r.sortList,v);i(d[0],s(d[0],r.sortList,t))},1);return!1}}).mousedown(function(){if(r.cancelSelection)return this.onselectstart=function(){return!1},!1});d.bind("update",function(){var a=this;setTimeout(function(){a.config.parsers=b(a,e);t=h(a)},1)}).bind("updateCell",function(a,b){var c=this.config,d=[b.parentNode.rowIndex-1,b.cellIndex];t.normalized[d[0]][d[1]]=
c.parsers[d[1]].format(f(c,b),b)}).bind("sorton",function(b,c){a(this).trigger("sortStart");r.sortList=c;for(var d=r.sortList,g=this.config,f=d.length,h=0;h<f;h++){var l=d[h],k=g.headerList[l[0]];k.count=l[1];k.count++}q(this,e,d,v);i(this,s(this,d,t))}).bind("appendCache",function(){i(this,t)}).bind("applyWidgetId",function(a,b){n(b).format(this)}).bind("applyWidgets",function(){m(this)});if(a.metadata&&a(this).metadata()&&a(this).metadata().sortlist)r.sortList=a(this).metadata().sortlist;r.sortList.length>
0?d.trigger("sorton",[r.sortList]):m(this)}})};this.addParser=function(a){for(var b=t.length,c=!0,d=0;d<b;d++)t[d].id.toLowerCase()==a.id.toLowerCase()&&(c=!1);c&&t.push(a)};this.addWidget=function(a){v.push(a)};this.formatDate=function(a,b){b.locale!="us"&&(a=a.replace(RegExp("[\\-\\"+b.format[b.locale].date+"]","g"),b.format.us.date));return a};this.formatDecimal=function(a,b){b.locale!="us"&&(a=a.replace(b.format[b.locale].decimal,b.format.us.decimal));return a};this.formatFloat=function(a){a=
parseFloat(a);return isNaN(a)?0:a};this.formatInt=function(a){a=parseInt(a);return isNaN(a)?0:a};this.isDigit=function(b,c){var d="\\"+c.format[c.locale].decimal;return RegExp("/(^[+]?0("+d+"0+)?$)|(^([-+]?[0-9]*)$)|(^([-+]?((0?[0-9]*)"+d+"(0*[0-9]*)))$)|(^[-+]?[0-9]*"+d+"0+$)/").test(a.trim(b))};this.clearTableBody=function(b){a.browser.msie?function(){for(;this.firstChild;)this.removeChild(this.firstChild)}.apply(b.tBodies[0]):b.tBodies[0].innerHTML=""}}});a.fn.extend({tablesorter:a.tablesorter.construct});
var i=a.tablesorter;i.addParser({id:"text",is:function(){return!0},format:function(e){return a.trim(e.toLowerCase())},type:"text"});i.addParser({id:"digit",is:function(e,d){return a.tablesorter.isDigit(e,d.config)},format:function(e,d){e=a.tablesorter.formatDecimal(e,d.config);return a.tablesorter.formatFloat(e)},type:"numeric"});i.addParser({id:"currency",is:function(a){return/^[\uff82\uff63$\u7ac4\uff6c?.,]/.test(a)},format:function(e,d){e=a.tablesorter.formatDecimal(e,d.config);return a.tablesorter.formatFloat(e.replace(RegExp(/[\uff82\uff63$\u7ac4\uff6c]/g),
""))},type:"numeric"});i.addParser({id:"ipAddress",is:function(a){return/^\d{2,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(a)},format:function(e){for(var e=e.split("."),d="",b=e.length,c=0;c<b;c++){var h=e[c];d+=h.length==2?"0"+h:h}return a.tablesorter.formatFloat(d)},type:"numeric"});i.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\/$/.test(a)},format:function(a){return jQuery.trim(a.replace(RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});i.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},
format:function(e){return a.tablesorter.formatFloat(e!=""?(new Date(e.replace(RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"});i.addParser({id:"percent",is:function(e){return/\%$/.test(a.trim(e))},format:function(e,d){e=a.tablesorter.formatDecimal(e,d.config);return a.tablesorter.formatFloat(e.replace(RegExp(/%/g),""))},type:"numeric"});i.addParser({id:"usLongDate",is:function(a){return a.match(RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},
format:function(e){return a.tablesorter.formatFloat((new Date(e)).getTime())},type:"numeric"});i.addParser({id:"mediumDate",is:function(a,d){var b=d.config,b="\\"+b.format[b.locale].date;return RegExp("\\d{1,2}[\\-"+b+"]\\d{1,2}[\\-"+b+"]\\d{4}").test(a)},format:function(e,d){var b=d.config,e=a.tablesorter.formatDate(e,b);if(b.locale=="us")e=e.replace(/(\d{1,2})[\/](\d{1,2})[\/](\d{4})/,"$3/$1/$2");else if(b.locale=="en"||b.locale=="de"||b.locale=="eu")e=e.replace(/(\d{1,2})[\/](\d{1,2})[\/](\d{4})/,
"$3/$2/$1");return a.tablesorter.formatFloat(e!=""?(new Date(e)).getTime():0)},type:"numeric"});i.addParser({id:"shortDate",is:function(a,d){var b=d.config,b="\\"+b.format[b.locale].date;return RegExp("\\d{1,2}[\\-"+b+"]\\d{1,2}[\\-"+b+"]\\d{2}").test(a)},format:function(e,d){var b=d.config,e=a.tablesorter.formatDate(e,b);if(b.locale=="us")e=e.replace(/(\d{1,2})[\/](\d{1,2})[\/](\d{2})/,"$1/$2/$3");else if(b.locale=="en"||b.locale=="de"||b.locale=="eu")e=e.replace(/(\d{1,2})[\/](\d{1,2})[\/](\d{2})/,
"$2/$1/$3");return a.tablesorter.formatFloat(e!=""?(new Date(e)).getTime():0)},type:"numeric"});i.addParser({id:"time",is:function(a){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(a)},format:function(e){return a.tablesorter.formatFloat((new Date("2000/01/01 "+e)).getTime())},type:"numeric"});i.addParser({id:"metadata",is:function(){return!1},format:function(e,d,b){e=d.config;e=!e.parserMetadataName?"sortValue":e.parserMetadataName;return a(b).metadata()[e]},type:"numeric"});
i.addWidget({id:"zebra",format:function(e){if(e.config.debug)var d=new Date;var b,c=-1,h;a("tr:visible",e.tBodies[0]).each(function(){b=a(this);b.hasClass(e.config.cssChildRow)||c++;h=c%2==0;b.removeClass(e.config.widgetZebra.css[h?0:1]).addClass(e.config.widgetZebra.css[h?1:0])});e.config.debug&&a.tablesorter.benchmark("Applying Zebra widget",d)}})})(jQuery);
(function(a){a.extend({tablesorterPager:new function(){var i=function(b){var d=b.config,b=a(b);if(!d.pagerPositionSet&&d.positionFixed)b.offset&&d.container.css({top:b.offset().top+b.height()+"px",position:"absolute"}),d.pagerPositionSet=!0},e=function(c,d){var e,j,g,l,m=c.config,n=d.length;e=m.page*m.size;var k=e+m.size;a(c).trigger("pagerChange",m);if(k>d.length)k=d.length;l=a(c.tBodies[0]);for(a.tablesorter.clearTableBody(c);e<k;e++){g=d[e];n=g.length;for(j=0;j<n;j++)l[0].appendChild(g[j])}i(c,
l);a(c).trigger("applyWidgets");m.page>=m.totalPages&&b(c);a(m.cssPageDisplay,m.container).val(m.page+1+m.seperator+m.totalPages);a(c).trigger("pagerComplete",m)},d=function(a){var b=a.config;if(b.page<0||b.page>b.totalPages-1)b.page=0;e(a,b.rowsCopy)},b=function(a){var b=a.config;b.page=b.totalPages-1;d(a)};this.appender=function(a,b){var d=a.config;d.rowsCopy=b;d.totalRows=b.length;d.totalPages=Math.ceil(d.totalRows/d.size);e(a,b)};this.defaults={size:10,offset:0,page:0,totalRows:0,totalPages:0,
container:null,cssNext:".next",cssPrev:".prev",cssFirst:".first",cssLast:".last",cssPageDisplay:".pagedisplay",cssPageSize:".pagesize",seperator:"/",positionFixed:!0,appender:this.appender};this.construct=function(c){return this.each(function(){var e=a.extend(this.config,a.tablesorterPager.defaults,c),f=this,j=e.container;a(this).trigger("appendCache");e.size=parseInt(a(".pagesize",j).val(),10);a(e.cssFirst,j).click(function(){f.config.page=0;d(f);return!1});a(e.cssNext,j).click(function(){var a=
f.config;a.page++;if(a.page>=a.totalPages-1)a.page=a.totalPages-1;d(f);return!1});a(e.cssPrev,j).click(function(){var a=f.config;a.page--;if(a.page<=0)a.page=0;d(f);return!1});a(e.cssLast,j).click(function(){b(f);return!1});a(e.cssPageSize,j).change(function(){var b=parseInt(a(this).val(),10),c=f.config;c.size=b;c.totalPages=Math.ceil(c.totalRows/c.size);c.pagerPositionSet=!1;d(f);i(f);return!1})})}}});a.fn.extend({tablesorterPager:a.tablesorterPager.construct})})(jQuery);
(function(a){function i(f){b=a(f.data.el);b.blur();h=f.clientY+document.documentElement.scrollTop;c=b.height()-h;b.animate({opacity:"0.25"},{duration:"fast"});a(document).mousemove(e).mouseup(d);return!1}function e(a){var g=a.clientY+document.documentElement.scrollTop,e=c+g;h>=g&&(e-=5);h=g;e=Math.max(f,e);b.height(e+"px");e<f&&d(a);return!1}function d(){a(document).unbind("mousemove",e).unbind("mouseup",d);b.css("opacity","");b.focus();c=b=null;h=0}var b,c,h=0,f=32;a.fn.TextAreaResizer=function(){return this.each(function(){b=
a(this).addClass("processed");c=null;a(this).wrap('<div class="resizable-textarea"><span></span></div>').parent().append(a('<div class="grippie"></div>').bind("mousedown",{el:this},i));var d=a("div.grippie",a(this).parent())[0];d.style.marginRight=d.offsetWidth-a(this)[0].offsetWidth+"px"})}})(jQuery);
(function(a,i,e){var d,b,c,h;function f(b){return a.data(b,"tooltip")}function j(b){f(this).delay?p=setTimeout(l,f(this).delay):l();r=!!f(this).track;a(e.body).bind("mousemove",m);m(b)}function g(){if(!a.tooltip.blocked&&!(this==k||!this.tooltipText&&!f(this).bodyHandler)){k=this;q=this.tooltipText;if(f(this).bodyHandler){b.hide();var g=f(this).bodyHandler.call(this);g.nodeType||g.jquery?c.empty().append(g):c.html(g);c.show()}else if(f(this).showBody){g=q.split(f(this).showBody);b.html(g.shift()).show();
c.empty();for(var e=0,l;l=g[e];e++)e>0&&c.append("<br/>"),c.append(l);c.hideWhenEmpty()}else b.html(q).show(),c.hide();f(this).showURL&&a(this).url()?h.html(a(this).url().replace("http://","")).show():h.hide();d.addClass(f(this).extraClass);f(this).fixPNG&&d.fixPNG();j.apply(this,arguments)}}function l(){p=null;(!s||!a.fn.bgiframe)&&f(k).fade?d.is(":animated")?d.stop().show().fadeTo(f(k).fade,k.tOpacity):d.is(":visible")?d.fadeTo(f(k).fade,k.tOpacity):d.fadeIn(f(k).fade):d.show();m()}function m(b){if(!a.tooltip.blocked&&
!(b&&b.target.tagName=="OPTION"))if(!r&&d.is(":visible")&&a(e.body).unbind("mousemove",m),k==null)a(e.body).unbind("mousemove",m);else{d.removeClass("viewport-right").removeClass("viewport-bottom");var c=d[0].offsetLeft,g=d[0].offsetTop;b&&(c=b.pageX+f(k).left,g=b.pageY+f(k).top,b="auto",f(k).positionLeft&&(b=a(i).width()-c,c="auto"),d.css({left:c,right:b,top:g}));var b=a(i).scrollLeft(),h=a(i).scrollTop(),l=a(i).width(),n=a(i).height(),j=d[0];b+l<j.offsetLeft+j.offsetWidth&&(c-=j.offsetWidth+20+
f(k).left,d.css({left:c+"px"}).addClass("viewport-right"));h+n<j.offsetTop+j.offsetHeight&&(g-=j.offsetHeight+20+f(k).top,d.css({top:g+"px"}).addClass("viewport-bottom"))}}function n(){function b(){d.removeClass(c.extraClass).hide().css("opacity","")}if(!a.tooltip.blocked){p&&clearTimeout(p);k=null;var c=f(this);(!s||!a.fn.bgiframe)&&c.fade?d.is(":animated")?d.stop().fadeTo(c.fade,0,b):d.stop().fadeOut(c.fade,b):b();f(this).fixPNG&&d.unfixPNG()}}d=void 0;b=void 0;c=void 0;h=void 0;var k,q,p,s=a.browser.msie&&
/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),r=!1;a.tooltip={blocked:!1,defaults:{delay:200,fade:!1,showURL:!0,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){a.tooltip.blocked=!a.tooltip.blocked}};a.fn.extend({tooltip:function(f){f=a.extend({},a.tooltip.defaults,f);d||(d=a('<div id="'+f.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(e.body).hide(),a.fn.bgiframe&&d.bgiframe(),b=a("h3",d),c=a("div.body",d),h=a("div.url",d));return this.each(function(){a.data(this,
"tooltip",f);this.tOpacity=d.css("opacity");this.tooltipText=this.title;a(this).removeAttr("title");this.alt=""}).mouseover(g).mouseout(n).click(n)},fixPNG:s?function(){return this.each(function(){var b=a(this).css("backgroundImage");if(b.match(/^url\(["']?(.*\.png)["']?\)$/i))b=RegExp.$1,a(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+b+"')"}).each(function(){var b=a(this).css("position");b!="absolute"&&b!="relative"&&
a(this).css("position","relative")})})}:function(){return this},unfixPNG:s?function(){return this.each(function(){a(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){a(this)[a(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}})})(jQuery,this,this.document);var pukiwiki;pukiwiki||(pukiwiki={});
(function(a,i,e,d){if(!jQuery)throw"pukiwiki: jQuery not included.";if(DEBUG)var b=new Date;var c=function(){for(var a=3,b=d.createElement("div");b.innerHTML="<\!--[if gt IE "+ ++a+"]><i></i><![endif]--\>",b.getElementsByTagName("i")[0];);return a>4?a:void 0}();e.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var a=[].slice.call(arguments);typeof console.log==="object"?log.apply.call(console.log,console,a):console.log.apply(console,
a)}};var h;try{h=e.console}catch(f){h=e.console={}}(function(a){function b(){}for(var c="assert,clear,count,debug,dir,dirxml,error,exception,firebug,group,groupCollapsed,groupEnd,info,log,memoryProfile,memoryProfileEnd,profile,profileEnd,table,time,timeEnd,timeStamp,trace,warn".split(","),d;d=c.pop();)a[d]=a[d]||b})(h);if(self.location!==top.location)top.location=self.location;var j=pkwkBeforeInit=pkwkUnload=pkwkBeforeUnload=[];pukiwiki={meta:{"@prefix":"<http://purl.org/net/ns/doas#>","@about":"<skin.js>",
a:":JavaScript",title:"Pukiwiki skin script for jQuery",created:"2008-11-25",release:{revision:"2.2.24",created:"2011-10-01"},author:{name:"Logue",homepage:"<http://logue.be/>"},license:"<http://www.gnu.org/licenses/gpl-2.0.html>"},config:{sukerfish:{autoArrows:!1,dropShadows:!1},tablesorter:{counter:0,sorter:{useUI:!0,cssUI:{widget:"",header:"ui-widget-header",hover:"ui-state-hover",icon:"ui-icon ui-icon-triangle-2-n-s",iconBoth:"ui-icon-triangle-2-n-s",iconDesc:"ui-icon-triangle-1-n",iconAsc:"ui-icon-triangle-1-s"}},
pager:{minimum_lines:5,size:[10,25,50,75,100],location_before:!0,positionFixed:!1}},swfupload:{upload_url:SCRIPT,file_post_name:"attach_file",file_types:"*.*",file_upload_limit:10,file_queue_limit:10,debug:DEBUG,button_image_url:IMAGE_URI+"ajax/wdp_buttons_upload_114x29.png",button_width:114,button_height:29,buttonwindow_mode:"transparent",moving_average_history_size:40},assistant:{emoji:"sun,cloud,rain,snow,thunder,typhoon,mist,sprinkle,aries,taurus,gemini,cancer,leo,virgo,libra,scorpius,sagittarius,capricornus,aquarius,pisces,sports,baseball,golf,tennis,soccer,ski,basketball,motorsports,pocketbell,train,subway,bullettrain,car,rvcar,bus,ship,airplane,house,building,postoffice,hospital,bank,atm,hotel,cvs,gasstation,parking,signaler,toilet,restaurant,cafe,bar,beer,fastfood,boutique,hairsalon,karaoke,movie,upwardright,carouselpony,music,art,drama,event,ticket,smoking,nosmoking,camera,bag,book,ribbon,present,birthday,telephone,mobilephone,memo,tv,game,cd,heart,spade,diamond,club,eye,ear,rock,scissors,paper,downwardright,upwardleft,foot,shoe,eyeglass,wheelchair,newmoon,moon1,moon2,moon3,fullmoon,dog,cat,yacht,xmas,downwardleft,phoneto,mailto,faxto,info01,info02,mail,by-d,d-point,yen,free,id,key,enter,clear,search,new,flag,freedial,sharp,mobaq,one,two,three,four,five,six,seven,eight,nine,zero,ok,heart01,heart02,heart03,heart04,happy01,angry,despair,sad,wobbly,up,note,spa,cute,kissmark,shine,flair,annoy,punch,bomb,notes,down,sleepy,sign01,sign02,sign03,impact,sweat01,sweat02,dash,sign04,sign05,slate,pouch,pen,shadow,chair,night,soon,on,end,clock,appli01,appli02,t-shirt,moneybag,rouge,denim,snowboard,bell,door,dollar,pc,loveletter,wrench,pencil,crown,ring,sandclock,bicycle,japanesetea,watch,think,confident,coldsweats01,coldsweats02,pout,gawk,lovely,good,bleah,wink,happy02,bearing,catface,crying,weep,ng,clip,copyright,tm,run,secret,recycle,r-mark,danger,ban,empty,pass,full,leftright,updown,school,wave,fuji,clover,cherry,tulip,banana,apple,bud,maple,cherryblossom,riceball,cake,bottle,noodle,bread,snail,chick,penguin,fish,delicious,smile,horse,pig,wine,shock".split(","),
color:"#000000,#003300,#006600,#009900,#00CC00,#00FF00,#330000,#333300,#336600,#339900,#33CC00,#33FF00,#660000,#663300,#666600,#669900,#66CC00,#66FF00,#000033,#003333,#006633,#009933,#00CC33,#00FF33,#330033,#333333,#336633,#339933,#33CC33,#33FF33,#660033,#663333,#666633,#669933,#66CC33,#66FF33,#000066,#003366,#006666,#009966,#00CC66,#00FF66,#330066,#333366,#336666,#339966,#33CC66,#33FF66,#660066,#663366,#666666,#669966,#66CC66,#66FF66,#000099,#003399,#006699,#009999,#00CC99,#00FF99,#330099,#333399,#336699,#339999,#33CC99,#33FF99,#660099,#663399,#666699,#669999,#66CC99,#66FF99,#0000CC,#0033CC,#0066CC,#0099CC,#00CCCC,#00FFCC,#3300CC,#3333CC,#3366CC,#3399CC,#33CCCC,#33FFCC,#6600CC,#6633CC,#6666CC,#6699CC,#66CCCC,#66FFCC,#0000FF,#0033FF,#0066FF,#0099FF,#00CCFF,#00FFFF,#3300FF,#3333FF,#3366FF,#3399FF,#33CCFF,#33FFFF,#6600FF,#6633FF,#6666FF,#6699FF,#66CCFF,#66FFFF,#990000,#993300,#996600,#999900,#99CC00,#99FF00,#CC0000,#CC3300,#CC6600,#CC9900,#CCCC00,#CCFF00,#FF0000,#FF3300,#FF6600,#FF9900,#FFCC00,#FFFF00,#990033,#993333,#996633,#999933,#99CC33,#99FF33,#CC0033,#CC3333,#CC6633,#CC9933,#CCCC33,#CCFF33,#FF0033,#FF3333,#FF6633,#FF9933,#FFCC33,#FFFF33,#990066,#993366,#996666,#999966,#99CC66,#99FF66,#CC0066,#CC3366,#CC6666,#CC9966,#CCCC66,#CCFF66,#FF0066,#FF3366,#FF6666,#FF9966,#FFCC66,#FFFF66,#990099,#993399,#996699,#999999,#99CC99,#99FF99,#CC0099,#CC3399,#CC6699,#CC9999,#CCCC99,#CCFF99,#FF0099,#FF3399,#FF6699,#FF9999,#FFCC99,#FFFF99,#9900CC,#9933CC,#9966CC,#9999CC,#99CCCC,#99FFCC,#CC00CC,#CC33CC,#CC66CC,#CC99CC,#CCCCCC,#CCFFCC,#FF00CC,#FF33CC,#FF66CC,#FF99CC,#FFCCCC,#FFFFCC,#9900FF,#9933FF,#9966FF,#9999FF,#99CCFF,#99FFFF,#CC00FF,#CC33FF,#CC66FF,#CC99FF,#CCCCFF,#CCFFFF,#FF00FF,#FF33FF,#FF66FF,#FF99FF,#FFCCFF,#FFFFFF,#111111,#222222,#333333,#444444,#555555,#666666,#777777,#888888,#999999,#A5A5A5,#AAAAAA,#BBBBBB,#C3C3C3,#CCCCCC,#D2D2D2,#DDDDDD,#EEEEEE,#FFFFFF".split(",")},
syntaxhighlighter:{theme:"Default",brushes:["Plain","Diff"],config:{useScriptTags:!1}}},custom:{},isPage:typeof PAGE!=="undefined"&&!a.query.get("cmd")&&!PAGE.match(/^:|FormatRules|RecentChanges|RecentDeleted|InterWikiName|AutoAliasName|MenuBar|SideBar|Navigation|Glossary/i)?!0:!1,href:a("link[rel=canonical]")[0].href,init:function(){var b=a("meta[name=generator]")[0].content;this.image_dir=b.match(/[PukiPlus|Advance]/)?IMAGE_URI+"ajax/":b.match(/plus/)?SKIN_DIR+"theme/"+THEME_NAME+"/":SKIN_DIR+this.name+
"/image/";DEBUG&&console.info("PukiWiki Advance Debug mode. \nUsing Modernizr: ",i._version," / jQuery: ",a.fn.jquery," / jQuery UI: ",a.ui.version);b=(d.location.protocol==="https:"?"https:":"http:")+"//";this.body=this.custom.body?this.custom.body:"#body";a.extend(this.config.sukerfish,this.custom.suckerfish);a.extend(this.config.colorbox,this.custom.colorbox);a.extend(this.config.tablesorter,this.custom.tablesorter);a.extend(this.config.syntaxhighlighter,this.custom.syntaxhighlighter);a(":input, button").attr("disabled",
"disabled");a("button, input[type=submit], input[type=reset], input[type=button]").each(function(){var b=a(this),c=b.data();b.button({text:c.text?c.text:!0,label:c.label?c.label:this.value,icons:{primary:c.iconsPrimary,secondary:c.iconsSecondary}})});if(c<6){try{d.execCommand("BackgroundImageCache",!1,!0)}catch(f){}a.ajax({type:"GET",global:!1,url:JS_URI+"iepngfix/iepngfix_tilebg.js",dataType:"script"});a("img[src$=png], .pkwk-icon, .pkwk-symbol, .pkwk-icon_linktext").css({behavior:"url("+JS_URI+
"iepngfix/iepngfix.htc)"})}i.load({test:i.canvas,nope:JS_URI+"excanvas.compiled.js"});a(this.body+(c<6?"img[src!$=.png]":"img")).lazyload({placeholder:this.image_dir+"grey.gif",effect:"fadeIn"});this.enableHTML5();a.i18n(LANG);this.sh();this.blockUI();a(".sf-menu").superfish(this.config.sukerfish);this.linkattrs();this.preptoc(this.body);this.setAnchor();a("textarea[name='msg']").length!==0&&a.query.get("cmd")!=="guiedit"&&this.set_editform();a("input[name=msg]").length!==0&&(a(".comment_form").append('<div class="assistant ui-corner-all ui-widget-header ui-helper-clearfix"></div>'),
this.assistant());a("textarea[name='msg']").length!==0&&a.query.get("cmd")!=="guiedit"&&(a("textarea[name='msg']").addClass("resizable"),a("textarea.resizable:not(.processed)").TextAreaResizer());a("textarea").tabby();this.tablesorter();if(a("#search_word").length!==0){var h={},n;a("#search_word").autocomplete({minLength:2,source:function(b,c){var d=b.term;d in h?c(h[d]):n=a.getJSON(SCRIPT+"?cmd=list",b,function(a,b,g){h[d]=a;g===n&&c(a)})}})}a("#banner_box img").fadeTo(200,0.3);a("#banner_box img").hover(function(){a(this).fadeTo(200,
1)},function(){a(this).fadeTo(200,0.3)});this.glossaly();this.bad_behavior();location.hash&&this.anchor_scroll(location.hash,!0);a(".ui-state-default").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).mousedown(function(){a(this).addClass("ui-state-active")}).mouseout(function(){a(this).removeClass("ui-state-active")});a(":input, button").removeAttr("disabled");a(".ui-button").button("option","disabled",!1);this.isPage&&typeof FACEBOOK_APPID!==
"undefined"&&(a("html").attr("xmlns:fb","http://www.facebook.com/2008/fbml#"),a("body").append('<div id="fb-root"></div>'),a.getScript(b+"connect.facebook.net/"+LANG+"/all.js",function(){FB.init({appId:FACEBOOK_APPID,status:!0,cookie:!0,xfbml:!0});FB.Event.subscribe("auth.login",function(){e.location.reload()})}));a(".link_symbol").each(function(){var b=a(this);b.click(function(){e.open(b.data().uri);return!1})})},unload:function(b){b=b?b+" ":"";a(b+"#msg").val()!==a(b+"#original").val()&&confirm(a.i18n("pukiwiki",
"unload"))&&(this.appendChild(d.createElement("input")).setAttribute("name","write"),a('<input name="write" />').appendTo(this),a(b+"form").submit(),alert(a.i18n("pukiwiki","submit")));return!1},enableHTML5:function(b){b=b?b+" ":"";i.input.placeholder||a(b+"[placeholder]").each(function(){var b=a(this),c=b.attr("placeholder"),d=b.css("color");b.focus(function(){b.val()===c&&b.val("").css("color",d)}).blur(function(){b.val()===""?b.val(c).css("color","Gray"):b.val()===c&&b.css("color","Gray")}).blur().parents("form").submit(function(){b.val()===
c&&b.val("")})});i.input.required||a(b+"[required]").each(function(){var b=a(this);b.attr("required");b.parents("form").submit(function(){if(b.val()==="")return!1})});a(b+"a[rel*=noreferer]").click(function(){var b=a(this).attr("href");if(c){var g;g=a(this).attr("target")==="_blank"?e.open("","","location=yes, menubar=yes, toolbar=yes, status=yes, resizable=yes, scrollbars=yes,").document:d;g.open();g.write('<meta http-equiv="refresh" content="0;url='+b+'" />');g.close();return!1}else b.match(/data:text\/html;charset=utf-8/)!==
!0&&(b=['<html><head><script type="text/javascript"><\!--','document.write(\'<meta http-equiv="refresh" content="0;url='+b+"\" />');","// --\><\/script></head><body></body></html>"],a(this).attr("href","data:text/html;charset=utf-8,"+encodeURIComponent(b.join("\n"))))})},register:{init:function(a){j.push(a)},before_init:function(a){pkwkBeforeInit.push(a)},unload:function(a){pkwkUnload.push(a)},before_unload:function(a){pkwkBeforeUnload.push(a)}},setAnchor:function(b){var c=this,b=b?b+" ":"";a(b+" .tabs").tabs();
var d={opacity:"0.8",slideshowStart:'<span class="ui-icon ui-icon-play" style="margin:4px;" title="'+a.i18n("player","play")+'"></span>',slideshowStop:'<span class="ui-icon ui-icon-stop" style="margin:4px;" title="'+a.i18n("player","stop")+'"></span>',previous:'<span class="ui-icon ui-icon-circle-arrow-e" style="margin:4px;" title="'+a.i18n("player","prev")+'"></span>',next:'<span class="ui-icon ui-icon-circle-arrow-w" style="margin:4px;" title="'+a.i18n("player","next")+'"></span>',close:'<span class="ui-icon ui-icon-circle-close" style="margin:4px;" title="'+
a.i18n("dialog","close")+'"></span>',onOpen:function(){a(b+"#cboxOverlay").addClass("ui-widget-overlay");a(b+"#colorbox").addClass("ui-widget-content ui-corner-all");a(b+"#cboxPrevious").button();a(b+"#cboxNext").button();a(b+"#cboxClose").button()}};a(b+"a[href]").each(function(){var e=a(this),f=a(this).attr("href");if(f.match(/\.(jpg|jpeg|gif|png|txt)$/i))e.colorbox(d);else if(f.match(/\.(mp3|ogg|mp4)$/i))c.music_player(this);else if(f.match(/cmd|plugin/i)){for(var h={},i=f.slice(f.indexOf("?")+
1).split("&"),j=0;j<i.length;j++){var r=i[j].split("=");try{h[r[0]]=decodeURIComponent(r[1]).replace(/\+/g," ").replace(/%2F/g,"/")}catch(t){}}if(h.plugin)h.cmd=h.plugin,h.plugin=void 0;if(h.cmd)if(typeof h.file!=="undefined"&&h.pcmd=="open"||typeof h.openfile!=="undefined")h.file?(i=h.file,e.attr("href",SCRIPT+"?cmd="+h.cmd+"&pcmd="+h.pcmd+"&refer="+h.refer+"&age="+h.age+"&file="+i)):(i=h.openfile,e.attr("href",SCRIPT+"?cmd="+h.cmd+"&refer="+h.refer+"&openfile="+i)),i.match(/\.(jpg|jpeg|gif|png|txt)$/i)?
e.colorbox(d):i.match(/\.(mp3|ogg|mp4)$/i)&&c.music_player(this);else if(h.cmd=="qrcode")e.attr("href",f+"&type=.gif"),e.colorbox(d);else if(h.cmd.match(/attach|search|backup|source|newpage|template|freeze|rename|logview|tb|diff|referer|linklist|skeylist/i)&&h.pcmd!=="list"||h.help==="true")h.help=="true"&&(h={cmd:"read",page:"FormatRule"}),e.click(function(){c.ajax_dialog(h,b,function(){if(h.cmd=="attach"&&h.pcmd.match(/upload|info/i)||h.cmd.match(/attachref|read|backup/i)&&h.age!=="")c.bad_behavior(b+
"div.window"),c.set_uploader(b+"div.window"),c.setAnchor(b+"div.window")});return!1})}f.match("#")&&a(this).click(function(){c.anchor_scroll(f,!0)})})},sh:function(b){b=b?b+" .sh":".sh";if(a(b).length!==0)this.config.syntaxhighlighter={baseUrl:JS_URI+"syntaxhighlighter/",target:b,config:{strings:{expandSource:a.i18n("sh","expandSource"),viewSource:a.i18n("sh","viewSource"),copyToClipboard:a.i18n("sh","copyToClipboard"),copyToClipboardConfirmation:a.i18n("sh","copyToClipboardConfirmation"),print:a.i18n("sh",
"print"),noBrush:a.i18n("sh","noBrush"),brushNotHtmlScript:a.i18n("sh","brushNotHtmlScript")}}},a.beautyOfCode.beautifyAll(this.config.syntaxhighlighter)},ajax_dialog:function(b,d,f,h){var k=this,i={modal:!0,resizable:!0,show:"fade",hide:"fade",width:"520px",dialogClass:"ajax_dialog",bgiframe:c>=6?!0:!1,open:function(){a(d+":input").attr("disabled","disabled");k.tablesorter(d+".window");k.glossaly(d+".window");k.sh(d+".window");typeof f==="function"&&f();a(d+"button, "+d+"input[type=submit], "+d+
"input[type=reset], "+d+"input[type=button]").button();a(d+"form").disableOnSubmit();var b=this;a(d+".ui-widget-overlay").click(function(){a(b).dialog("close")});a(d+":input").removeAttr("disabled");a(d+".ui-button").button("option","disabled",!1);return!1},close:function(){a(this).remove()}};if(b.pcmd==="upload")i.width="90%";if(b.cmd.match(/logview|source|diff|edit|backup|read|referer/i)||b.help==="true")i.width="90%",i.height=a(e).height()*0.8|0;a.ajax({dataType:"json",url:SCRIPT,data:b,type:"GET",
cache:!0,timeout:3E4,success:function(b){var c=a('<div class="window"></div>');typeof h==="function"&&(b=h(b));i.title=b.title;b.body=b.body.replace(/<script[^>]*>[^<]+/ig,"");c.html(b.body).dialog(i)},error:function(b,c){var d=a('<div class="window"></div>'),e=['<div class="ui-state-error ui-corner-all" style="padding: 0 .7em;">','<p id="ajax_error"><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>'+c+"</p>","</div>"].join("\n");i.title=a.i18n("dialog","error");
d.html(e).dialog(i);try{a("p#ajax_error").after(["<ul>","<li>readyState:"+b.readyState+"</li>","<li>status:"+b.status+"</li>","<li>statusText:"+b.statusText+"</li>","</ul>"].join("\n"))}catch(g){}}})},blockUI:function(){a('<div id="loadingScreen" title="Loading..."></div>').appendTo("body");this.loadingScreen=a("#loadingScreen");this.loadingScreen.dialog({autoOpen:!1,closeOnEscape:!1,draggable:!1,width:150,height:150,modal:!0,show:"scale",hide:"explode",resizable:!1,dialogClass:"blockUI",open:function(){a("body").css("cursor",
"wait")},close:function(){a("body").css("cursor","auto")}});var b=this;a(d).ajaxSend(function(){b.loadingScreen.dialog("option","title",a.i18n("dialog","loading"));b.loadingScreen.dialog("open")}).ajaxStart(function(){b.loadingScreen.dialog("option","title",a.i18n("dialog","start"))}).ajaxSuccess(function(){b.loadingScreen.dialog("option","title",a.i18n("dialog","success"))}).ajaxComplete(function(){b.loadingScreen.dialog("option","title",a.i18n("dialog","complete"))}).ajaxError(function(){b.loadingScreen.dialog("option",
"title",a.i18n("dialog","error"))}).ajaxStop(function(){b.loadingScreen.dialog("option","title",a.i18n("dialog","ready"));b.loadingScreen.dialog("close")})},iframeWin:function(b){if(!b.width)b.width=800;if(!b.height)b.height=800;a('<iframe id="externalSite" class="externalSite"  frameborder="0" src="'+b.url+'" />').dialog({title:b.title,width:b.width,height:b.height,autoOpen:!0,modal:!0,resizable:!0,autoResize:!0}).width(b.width-20).height(b.height-20)},anchor_scroll:function(b,c){if(b.split("#")[1]===
"")a.scrollTo("#header");else if(b!==""){var d=b.split("#")[1];d.match(/tab/)||a.scrollTo("#"+d,{duration:800,axis:"y",queue:!0,onAfter:function(){c===!0&&a(d).effect("highlight",{},2E3)}})}},music_player:function(b){a(b).each(function(){var b=a(this).attr("href"),c={modal:!0,resizable:!1,show:"fade",hide:"fade",title:"Music Player",dialogClass:"music_player",width:"680px",bgiframe:a.browser.msie&&a.browser.version>6?!0:!1,open:function(){function c(){a("#jplayer_play").fadeOut(function(){a("#jplayer_pause").fadeIn()})}
function d(){a("#jplayer_pause").fadeOut(function(){a("#jplayer_play").fadeIn()})}var e=0,g=this;a("#jplayer").jPlayer({swfPath:SKIN_DIR,nativeSupport:!0,customCssIds:!0,ready:function(){this.element.jPlayer("setFile",b);d();a(g).dialog("option","title",a("#jplayer").jPlayer("getData","diag").src);this.element.jPlayer("play")}}).jPlayer("onProgressChange",function(b,c,d,g,f){b|=0;d|=0;e=b;a("#jplayer_loaderBar").progressbar("option","value",b);a("#jplayer_sliderPlayback").slider("option","value",
d);a("#jplayer_PlayTime").text(a.jPlayer.convertTime(g));a("#jplayer_TotalTime").text(a.jPlayer.convertTime(f))}).jPlayer("onSoundComplete",function(){this.element.jPlayer("play");c()});a("#jplayer_play").click(function(){a("#jplayer").jPlayer("play");c();return!1});a("#jplayer_pause").click(function(){a("#jplayer").jPlayer("pause");d();return!1});a("#jplayer_stop").click(function(){a("#jplayer").jPlayer("stop");d();return!1});a("#jplayer_volume-min").click(function(){a("#jplayer").jPlayer("volume",
0);a("#jplayer_sliderVolume").slider("option","value",0);return!1});a("#jplayer_volume-max").click(function(){a("#jplayer").jPlayer("volume",100);a("#jplayer_sliderVolume").slider("option","value",100);return!1});a("#jplayer_sliderPlayback").slider({max:100,range:"min",animate:!0,slide:function(b,c){a("#jplayer").jPlayer("playHead",c.value*(100/e))}});var f;f=a.cookie("volume")?a.cookie("volume"):50;a("#jplayer_sliderVolume").slider({value:f,max:100,range:"min",animate:!0,slide:function(b,c){a("#jplayer").jPlayer("volume",
c.value);a.cookie("volume",c.value,{expires:30,path:"/"})}});a("#jplayer_loaderBar").progressbar();a("ul#jplayer_icons li").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})},close:function(){a(this).remove()}},d=['<div id="jplayer"></div>\n<div id="jplayer_container">\n<ul id="jplayer_icons" class="ui-widget pkwk_widget">','<li id="jplayer_play" class="ui-button ui-state-default ui-corner-all" title="'+a.i18n("player","play")+'"><span class="ui-icon ui-icon-play"></span></li>',
'<li id="jplayer_pause" class="ui-button ui-state-default ui-corner-all" title="'+a.i18n("player","pause")+'"><span class="ui-icon ui-icon-pause"></span></li>','<li id="jplayer_stop" class="ui-button ui-state-default ui-corner-all" title="'+a.i18n("player","stop")+'"><span class="ui-icon ui-icon-stop"></span></li>','<li id="jplayer_volume-min" class="ui-button ui-state-default ui-corner-all" title="'+a.i18n("player","volume_min")+'"><span class="ui-icon ui-icon-volume-off"></span></li>','<li id="jplayer_volume-max" class="ui-button ui-state-default ui-corner-all" title="'+
a.i18n("player","volume_max")+'"><span class="ui-icon ui-icon-volume-on"></span></li>',"</ul>",'<div id="jplayer_sliderVolume" title="'+a.i18n("player","volume")+'"></div>','<div id="jplayer_bars_holder" title="'+a.i18n("player","seek")+'">','<div id="jplayer_sliderPlayback"></div>\n<div id="jplayer_loaderBar"></div>\n</div>\n</div>\n<p><span class="ui-icon ui-icon-clock" style="display:block;float:left;">Cast:</span><span id="jplayer_PlayTime">00:00</span>/<span id="jplayer_TotalTime">??:??</span></p>'].join("\n");
a(this).click(function(){a('<div id="music_player"></div>').html(d).dialog(c);return!1})})},tablesorter:function(b){var c=this,b=b?b+" ":"";a(b+".style_table").addClass("tablesorter");var d=function(b){return['<div class="table_pager_widget ui-helper-clearfix" id="'+b+'">','<ul class="ui-widget pkwk_widget">','<li class="first ui-button ui-state-default ui-corner-all" title="'+a.i18n("dialog","first")+'"><span class="ui-icon ui-icon-arrowthickstop-1-w"></span></li>','<li class="prev ui-button ui-state-default ui-corner-all" title="'+
a.i18n("dialog","prev")+'"><span class="ui-icon ui-icon-arrowthick-1-w"></span></li>','<li><input class="pagedisplay" type="text" disabled="disabled" /></li>','<li class="next ui-button ui-state-default ui-corner-all" title="'+a.i18n("dialog","next")+'"><span class="ui-icon ui-icon-arrowthick-1-e"></span></li>','<li class="last ui-button ui-state-default ui-corner-all" title="'+a.i18n("dialog","last")+'"><span class="ui-icon ui-icon-arrowthickstop-1-e"></span></li>','<li><select class="pagesize"></select></li>\n</ul>\n</div>'].join("\n")};
a(b+".tablesorter").each(function(){var b=this,e=a(this).clone(),g=a(this).data(),f=c.config.tablesorter;if(a("tr",this).length>f.pager.minimum_lines&&a("thead",this).length!==0){var h="table_pager_"+f.counter;f.sorter.headers=g.headers;f.sorter.sortList=g.sortList;f.sorter.parsers=g.parsers;a(this).tablesorter(f.sorter);f.pager.location_before===!0?a(this).before(d(h)):a(this).after(d(h));for(g=0;g<f.pager.size.length;)a("#"+h+" .pagesize").append(a("<option>").attr({value:f.pager.size[g]}).text(f.pager.size[g])),
g++;a("#"+h+" .reload").click(function(){e.clone().insertAfter(b);a(b).remove();a("#"+h).remove();a(b).tablesorter(f.sorter);f.pager.location_before===!0?a(b).before(d(h)):a(b).after(d(h));a(b).tablesorterPager(f.pager);for(var g=0;g<f.pager.size.length;)a("#"+h+" .pagesize").append(a("<option>").attr({value:f.pager.size[g]}).text(f.pager.size[g])),g++;c.glossaly(b)});a(this).tablesorterPager({container:a("#"+h),positionFixed:!1,onthrough:function(a){c.glossaly(a)}});a("#"+h+".pkwk_widget .ui-state-default").hover(function(){a(this).addClass("ui-state-hover")},
function(){a(this).removeClass("ui-state-hover")}).mousedown(function(){a(this).addClass("ui-state-active")}).mouseout(function(){a(this).removeClass("ui-state-active")});a("#"+h).show("clip");f.counter++}else a(this).tablesorter(f.sorter)})},glossaly:function(b){var c=this,b=b?b+" ":"";a(b+"*[title]").tooltip({bodyHandler:function(){return a(this).context.tooltipText},track:!0,delay:0,showURL:!1}).hover(function(){a("body").css("cursor","help")},function(){a("body").css("cursor","auto")});this.plus===
!0&&(a(b+".tooltip").hover(function(){a("body").css("cursor","wait");c.getGlossary(this,{cmd:"tooltip",q:a(this).text(),cache:!0})},function(){a("body").css("cursor","auto")}),a.query.get("cmd")==="search"&&a(b+".linktip").hover(function(){a("body").css("cursor","wait");c.getGlossary(this,{cmd:"preview",page:a(this).text(),word:a.query.get("word"),cache:!0})},function(){a("body").css("cursor","auto")}));a.support.leadingWhitespace!==!0&&a(b+".tooltip").css({behavior:"url("+JS_URI+"ie-css3.htc)"})},
getGlossary:function(b,c){var d;a.ajax({url:SCRIPT,type:"GET",cache:!0,timeout:2E3,dataType:"html",global:!1,data:c,async:!1,beforeSend:function(){a("body").css("cursor","wait")},success:function(a){d=a},complete:function(){a("body").css("cursor","help");a(b).tooltip({bodyHandler:function(){return d.replace(/<script[^>]*>[^<]+/ig,"")},track:!0,delay:0,showURL:!1})}})},set_editform:function(b){var b=b?b+" ":"",c=this,d=!1;i.load({test:e.JSON,nope:JS_URI+"json2.js",complete:function(){if(i.localstorage){var c=
a(b+".edit_form textarea[name=msg]").val(),f=e.localStorage.getItem(PAGE);if(f=e.JSON.parse(f))c=MODIFIED>f.modified&&f.msg!==c?a.i18n("pukiwiki","info_restore1"):a.i18n("pukiwiki","info_restore2"),confirm(c)&&a(b+".edit_form textarea[name=msg]").val(f.msg);d=!0}}});this.ajax_apx=!1;this.ajax_tim=this.ajax_count=0;a(b+".edit_form input[name=write]").after('<input type="button" name="add_ajax" value="'+a(".edit_form input[name=preview]").attr("value")+'" accesskey="p" />');a(b+".edit_form input[name=preview]").remove();
a(b+".edit_form").prepend('<div class="assistant ui-corner-top ui-widget-header ui-helper-clearfix"></div>');a(b+".edit_form input[name=add_ajax]").button({icons:{primary:"ui-icon-gear"}}).click(function(){a("textarea").attr("disabled","disabled");var d=a(".edit_form textarea[name='msg']").height();c.ajax_apx?(c.ajax_apx=!1,a(b+".edit_form #realview_outer").animate({height:"toggle"},function(){a(b+".edit_form textarea[name='msg']").animate({height:d*2});a(b+".edit_form #realview").remove();a(b+".edit_form #realview_outer").remove();
a(b+".edit_form #previous").remove();a(b+".edit_form textarea").removeAttr("disabled");a(b+".edit_form #indicator").hide().fadeOut()})):(c.ajax_apx||(a(b+".edit_form textarea[name='msg']").before('<div id="realview_outer">\n<div id="realview"></div>\n</div>').after('<textarea id="previous" style="display:none;"></textarea>'),a(b+".edit_form #indicator").show().fadeIn(),a(b+".edit_form #indicator").html('<img src="'+c.image_dir+'spinner.gif" alt="'+a.i18n("dialog","loading")+'" />'),a(b+".edit_form #previous").val(a("textarea#msg").val()),
a(b+".edit_form #realview_outer").css("height",d/2),a(b+".edit_form #indicator").html("")),c.ajax_apx=!0,a(b+".edit_form textarea[name='msg']").animate({height:a(this).height()+a(".edit_form #realview_outer").height()},function(){a(b+".edit_form #realview_outer").animate({height:"toggle"});a(b+".edit_form textarea").removeAttr("disabled")}),c.realtime_preview());return!1});a(b+".edit_form textarea[name=msg]").blur(function(){c.realtime_preview()});a(b+".edit_form textarea[name=msg]").mouseup(function(){a(this).val()!==
a("textarea#previous").val()&&c.realtime_preview()});a(b+".edit_form textarea[name=msg]").keypress(function(){if(d){var b=new Date;e.localStorage.setItem(PAGE,JSON.stringify({msg:a(this).val(),modified:b.getTime()}))}});a(b+"form").submit(function(){d&&localStorage.removeItem(PAGE);a("#_edit_form_notimestamp:checked")!==!0&&a("#fb_publish:checked")===!0&&a.ajax({url:"https://graph.facebook.com/bbeckford/feed",type:"post",data:{method:"stream.publish",message:PAGE+"\n"+a("link[rel=canonical]")[0].href},
cache:!1,dataType:"json",success:function(a){console.log(a.body)},error:function(){a(b+"input, button, select, textarea").removeAttr("disabled");alert(a.i18n("pukiwiki","error"))}})});this.assistant(!1)},show_diff:function(a,b){return msg===org?!1:diff(a.replace(/^\n+|\n+$/g,"").split("\n"),b.replace(/^\n+|\n+$/g,"").split("\n"))},diff:function(a,b,c){var d=a.length,e=b.length;if(!c&&d>e)return diff(b,a,!0);var f,h,i=d+1,j=e-d,t=[],v=[],D=function(f){var h,j,p,q;h=t[f-1+i];j=t[f+1+i];h>=j?(j=h+1,
h=j-f,p=v[f-1+i],q={edit:c?"-":"+",arr:b,line:j-1}):(h=j-f,p=v[f+1+i],q={edit:c?"+":"-",arr:a,line:h-1});q.line>=0&&(v[f+i]=p.concat(q));q=d-h>e-j?d-h:e-j;for(p=0;p<q&&a[h+p]===b[j+p];++p)v[f+i].push({edit:"=",arr:a,line:h+p});t[f+i]=j+p;return!0};for(h=0;h<d+e+3;++h)t[h]=-1,v[h]=[];for(h=0;t[j+i]!==e;h++){for(f=-h;f<j;++f)D(f);for(f=j+h;f>=j;--f)D(f)}return v[j+i]},realtime_preview:function(b){var b=b?b+" ":"",c=d.getElementById("msg"),e=d.getElementById("msg").value,f=this;if(this.ajax_apx&&(a(b+
"#indicator").html('<img src="'+f.image_dir+'spinner.gif" alt="'+a.i18n("dialog","loading")+'" />'),a(b+"textarea#previous").val(e),a(b+"textarea").attr("disabled","disabled"),++this.ajax_count===1)){if(d.selection){var h=d.selection.createRange();sellen=h.text.length;var c=c.createTextRange(),i=c.text.length;try{c.moveToPoint(h.offsetLeft,h.offsetTop),c.moveEnd("textedit")}catch(j){}endlen=c.text.length;sttlen=i-endlen}else if(c.setSelectionRange)sttlen=c.selectionStart,endlen=c.value.length-c.selectionEnd,
sellen=c.selectionEnd-sttlen;finlen=e.lastIndexOf("\n",sttlen);e=e.substring(0,finlen)+"\n\n&editmark;\n\n"+e.substring(finlen);a.ajax({url:SCRIPT,type:"post",global:!1,data:{cmd:"edit",realview:1,page:PAGE,msg:e,type:"json"},cache:!1,dataType:"json",success:function(c){var e=d.getElementById("realview_outer"),h=d.getElementById("editmark");if(h)e.scrollTop=h.offsetTop-8;f.ajax_count===1?f.ajax_count=0:(f.ajax_count=0,f.realtime_preview());a(b+"#indicator").html('<span class="ui-icon ui-icon-clock" style="float:left;"></span>'+
c.taketime);c=c.data.replace(/<script[^>]*>[^<]+/ig,'<span class="scripttag" title="Script tag">[SCRIPT]</span>');a(b+"#realview").html(c);a(b+"textarea").removeAttr("disabled")},error:function(b,c){a("#realview").html(['<div class="ui-state-error ui-corner-all" style="padding: 0 .7em;">','<p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>'+a.i18n("pukiwiki","error")+c+"</p>","<ul>","<li>readyState:"+b.readyState+"</li>","<li>status:"+b.status+"</li>","<li>statusText:"+
b.statusText+"</li>","</ul>\n</div>"].join("\n"))}})}},assistant:function(){var b,c;a(".assistant").html(['<ul class="ui-widget pkwk_widget">','<li class="replace ui-button ui-state-default ui-corner-left" title="'+a.i18n("editor","bold")+'" name="b" role="button"><strong>b</strong></li>','<li class="replace ui-button ui-state-default" title="'+a.i18n("editor","italic")+'" name="i" style="font-weight:normal;" role="button"><em>i</em></li>','<li class="replace ui-button ui-state-default" title="'+
a.i18n("editor","strike")+'" name="s" style="font-weight:normal;" role="button"><strike>s</strike></li>','<li class="replace ui-button ui-state-default" title="'+a.i18n("editor","underline")+'" name="u" style="font-weight:normal;" role="button"><span class="underline">u</span></li>','<li class="replace ui-button ui-state-default" title="'+a.i18n("editor","code")+'" name="code" style="font-weight:normal;" role="button"><span class="ui-icon ui-icon-script"></span></li>','<li class="replace ui-button ui-state-default ui-corner-right" title="'+
a.i18n("editor","quote")+'" name="q" style="font-weight:normal;" role="button"><span class="ui-icon ui-icon-comment"></span></li>','<li class="replace ui-button ui-state-default ui-corner-left" title="'+a.i18n("editor","link")+'" name="url"><span class="ui-icon ui-icon-link" role="button"></span></li>','<li class="replace ui-button ui-state-default" title="'+a.i18n("editor","size")+'" name="size" role="button">size</li>','<li class="insert ui-button ui-state-default ui-corner-right" title="'+a.i18n("editor",
"color")+'" name="color" role="button">color</li>','<li class="insert ui-button ui-state-default ui-corner-left" title="'+a.i18n("editor","emoji")+'" name="emoji" role="button">\u263a</li>','<li class="insert ui-button ui-state-default ui-corner-right" title="'+a.i18n("editor","breakline")+'" name="br" role="button">\u23ce</li>','<li class="replace ui-button ui-state-default ui-corner-all" title="'+a.i18n("editor","ncr")+'" name="ncr" role="button">&amp;#</li>','<li class="insert ui-button ui-state-default ui-corner-all" title="'+
a.i18n("editor","hint")+'" name="help" role="button"><span class="ui-icon ui-icon ui-icon-lightbulb"></span></li>',i.localstorage?'<li class="insert ui-state-default ui-corner-all" title="'+a.i18n("editor","flush")+'" name="flush" role="button"><span class="ui-icon ui-icon-trash"></span></li>':null,'<li class="ui-widget-content ui-corner-all" style="float:right; width:auto;display:none;font-weight:normal;" id="indicator"></li>\n</ul>'].join("\n"));var e='<ul class="ui-widget pkwk_widget ui-helper-clearfix">';
for(b=0,c=this.config.assistant.emoji.length;b<c;b++){var f=this.config.assistant.emoji[b];e+='<li class="ui-button ui-state-default ui-corner-all" title="'+f+'" name="'+f+'"><span class="emoji emoji-'+f+'"></span></li>'}e+="</ul>";a(d.body).append('<div id="emoji"></div>');a("#emoji").dialog({title:a.i18n("editor","emoji"),autoOpen:!1,bgiframe:!0,minWidth:410,height:410,minHeight:410,show:"scale",hide:"scale"}).html(e);e='<ul class="ui-widget pkwk_widget ui-helper-clearfix" id="colors">';f=0;for(b=
0,c=this.config.assistant.color.length;b<c;b++){var h=this.config.assistant.color[b];e+='<li class="ui-button ui-state-default" title="'+h+'" name="'+h+'"><span class="emoji" style="background-color:'+h+';"></span></li>';f++}e+="</ul>";a(d.body).append('<div id="color_palette"></div>');a("#color_palette").dialog({title:a.i18n("editor","color"),autoOpen:!1,bgiframe:!0,width:470,height:400,show:"scale",hide:"scale"}).html(e);a(d.body).append('<div id="hint"></div>');a("#hint").dialog({title:a.i18n("editor",
"hint"),autoOpen:!1,bgiframe:!0,width:470,show:"scale",hide:"scale",buttons:[{text:a.i18n("dialog","ok"),click:function(){a(this).dialog("close")}}]}).html(a.i18n("pukiwiki","hint_text1"));if(!this.elem)this.elem=a("*[name=msg]")[0];var j=this;a("*[name=msg]").focus(function(){j.elem=this;j.selection=a(this).getSelection().text});a(".insert").click(function(){var b="",c=a(j.elem),d=c.getSelection().text;switch(a(this).attr("name")){case "help":a("#hint").dialog("open");break;case "br":b="&br;\n";
break;case "emoji":a("#emoji").dialog("open");break;case "color":a("#color_palette").dialog("open");break;case "flush":i.localstorage&&confirm(a.i18n("pukiwiki","flush_restore"))===!0&&localStorage.removeItem(PAGE);break;default:b="&("+a(this).attr("name")+");"}b!==""&&(d===""?c.insertAtCaretPos(b):c.replaceSelection(b),c.focus());return!1});a(".replace").click(function(){var b="",c=a(j.elem),d=c.getSelection().text,e=a(this).attr("name");if(d===""||!c)return alert(a.i18n("pukiwiki","select")),!1;
c.focus();switch(e){case "size":b=prompt(a.i18n("pukiwiki","fontsize"),"100%");if(!b||!b.match(/\d+/))return;b="&size("+b+"){"+d+"};";break;case "ncr":var g;for(e=0,g=d.length;e<g;e++)b+="&#"+d.charCodeAt(e)+";";break;case "b":b="''"+d+"''";break;case "i":b="'''"+d+"'''";break;case "u":b="__"+d+"__";break;case "s":b="%%"+d+"%%";break;case "code":b="@@"+d+"@@";break;case "q":b="@@@"+d+"@@@";break;case "url":e=prompt(a.i18n("pukiwiki","url"),"http://"),e!==null&&(b="[["+d+">"+e+"]]")}c.replaceSelection(b);
console.log(d);return!1});a("#emoji ul li").click(function(){var b=a(j.elem),c=b.getSelection().text,d="&("+a(this).attr("name")+");";c===""?b.insertAtCaretPos(d):b.replaceSelection(d);b.focus()});a("#color_palette ul li").click(function(){var b=a(j.elem),c=b.getSelection().text,d=a(this).attr("name");c===""||!b?alert(a.i18n("pukiwiki","select")):(c.match(/^&color\([^\)]*\)\{.*\};$/)?b.replaceSelection(c.replace(/^(&color\([^\)]*)(\)\{.*\};)$/,"$1,"+d+"$2")):b.replaceSelection("&color("+d+"){"+c+
"};"),a("#color_palette").dialog("close"),b.focus())})},set_uploader:function(b){b=b?b+" ":"";a(b+"input[name=pass]").length!==0&&a.i18n("uploader","password");a(b+" .attach_info li").before(["<li>"+a.i18n("uploader","selected")+'<var id="attach_selected">0</var></li>',"<li>"+a.i18n("uploader","queued")+'<var id="attach_queued">0</var></li>'].join("\n"));a(b+"input[name=encode_hint]").val();a(b+"input[name=postid]").val();a(b+"input[name=max_file_size]").val();a(b+"input[name=pcmd]").val();var c=
a(b+"input[name=plugin]").val();a(b+"input[name=refer]").val();c==="attachref"&&(a(b+"input[name=attachref_no]").val(),a(b+"input[name=attachref_opt]").val(),a(b+"input[name=digest]").val());var d=this.config.swfupload;d.flash_url=SKIN_DIR+"swfupload.swf";d.file_types_description=a.i18n("uploader","file_type_desc");d.button_placeholder_id="swfupload_button";if(c==="attachref")d.file_upload_limit=1,d.file_queue_limit=1;a("input[name=pass]").length!==0&&a("input[name=pass]").val();a("input[name=encode_hint]").length!==
0&&a(b+"input[name=encode_hint]").val();a(b+".attach_form").html(['<div id="swfupload-control">\n<input type="button" id="swfupload_button" />\n<p id="swfupload-queuestatus"></p>\n<ol id="swfupload-log" class="ui-widget"></ol>','<span id="execute">'+a.i18n("uploader","execute")+"</span>","</div>"].join("\n"));a(b+"#execute").button({label:'<span style="float: left; margin-right: 0.3em;" class="ui-icon ui-icon-gear"></span>Go',disabled:!0}).click(function(){a("#swfupload-control").swfupload("startUpload");
return!1}).css({display:"none"});a(b+"#swfupload-control").swfupload(d).bind("fileQueued",function(c,d){var e=['<li id="'+d.id+'" class="ui-widget-content ui-corner-all">',"<span>"+a.i18n("uploader","file")+"<code>"+d.name+"</code> (<var>"+Math.round(d.size/1024)+" KB</var>)</span>",'<span class="cancell_btn" style="display:block; float:right"></span>\n<span class="progressvalue"></span>\n<div style="display:block; clear:both;" class="progressbar"></div>','<p class="status"><span style="float: left; margin-right: 0.3em;" class="ui-icon ui-icon-info"></span>'+
a.i18n("uploader","pending")+"</p>","</li>"].join("\n");a(b+"#swfupload-log").append(e);a(b+"li#"+d.id+" .cancell_btn").button({icons:{primary:"ui-icon-close"},text:!1}).click(function(){a.swfupload.getInstance("#swfupload-control").cancelUpload(d.id);a("#swfupload-log li#"+d.id).slideUp("fast");return!1});a(b+"#swfupload-log li#"+d.id+" .progressbar").progressbar();a(b+"#execute").button({disabled:!1}).css({display:""})}).bind("fileQueueError",function(){var c=['<li id="error" class="ui-widget-content ui-state-error ui-corner-all"><em>'+
a.i18n("dialog","error")+"</em>",'<p>\n<span style="float: left; margin-right: 0.3em;" class="ui-icon ui-icon-alert"></span>',a.i18n("uploader","many_files"),"</p>",'<button class="close">'+a.i18n("dialog","close")+"</button>","</li>"].join("\n");a(b+"#swfupload-log").append(c);a(b+"li#error button").button({icons:{primary:"ui-icon-close"},text:!1}).click(function(){a("#swfupload-log li#error").slideUp("fast");return!1})}).bind("fileDialogComplete",function(b,c,d){a("#atttach_selected").text(c);a("#atttach_queued").text(d)}).bind("uploadStart",
function(b,c){a("#swfupload-log li#"+c.id).find("p.status").text(a.i18n("uploader","uploading"));a("#swfupload-log li#"+c.id).find("span.progressvalue").text("0%");a("#swfupload-log li#"+c.id).find("span.cancel").hide()}).bind("uploadProgress",function(b,c,d){b=Math.round(d/c.size*100);a("#swfupload-log li#"+c.id+" .progressbar").progressbar({value:b});a("#swfupload-log li#"+c.id).find("span.progressvalue").text(b+"%")}).bind("uploadSuccess",function(d,f,h){if(c!=="attachref"){var d=b+"#swfupload-log #"+
f.id,i=a(d);console.log(h);h=eval("("+h+")");a(d+" .progressbar").progressbar({value:100});i.find(".progressvalue").text("100%");var j=['<a href="'+SCRIPT+"?plugin=attach&pcmd=open&refer="+PAGE+"&file="+f.name+'" id="view_'+f.id+'">','<span style="float: right; margin-right: 0.3em;" class="ui-icon ui-icon-newwin"></span>',a.i18n("uploader","view")+" &raquo;","</a>"].join("");i.addClass("success").find("p.status").html(h.title+" | "+j);a(d+" a#view_"+f.id).click(function(){var b=a(this).attr("href");
e.open(b);return!1})}else location.reload()}).bind("uploadComplete",function(){a(this).swfupload("startUpload")})},CFCheck:function(){(typeof CFInstall==="object"||a("meta[http-equiv=X-UA-Compatible]")[0].content.match(/chrome/)!==-1)&&CFInstall.check({mode:"overlay",onmissing:function(){self.iframeWin({title:"Google Chrome Frame",width:820,height:600,url:"http://www.google.com/chromeframe"})}})},linkattrs:function(){var b,c,d=a("link[rel]");for(b=0,c=d.length;b<c;b++){var e=d[b];switch(e.rel){case "canonical":this.canonical=
e.href;break;case "next":this.next=e.href;this.next_title=e.title?e.title:a.i18n("dialog","next");break;case "prev":case "previous":this.prev=e.href;this.prev_title=e.title?e.title:a.i18n("dialog","previous");break;case "up":this.up=e.href;this.up_title=e.title;break;case "index":this.index=e.href;this.index_title=e.title;break;case "alternate":if(e.hreflang==="en")this.hasEversion=!0;break;case "transformation":hasmeta=this.grddltrans=e.href;break;case "home":hashome=!0;this.home=e.href;this.home_title=
e.title;break;case "search":hassearch=!0;this.search=e.href;this.search_title=e.title;break;case "meta":e.type||(hasmeta="meta");break;case "help":this.help=e.href,this.help_title=e.title}}},preptoc:function(b){var c=this;this.genTocDiv(this.prepHdngs(b));a(d).keypress(function(b){var d=b.which,g=String.fromCharCode(d);if(b.target.nodeName.match(/(input|textarea)/i)!==-1)return d===27?!1:!0;console.log(d,g);switch(g){case "?":location.href.indexOf("Help")===-1&&confirm("Go to help/search page ?")?
location.href=pukiwiki.help:alert("This key should bring you our help, i.e. this page :-)");break;case "<":if(c.prev)location.href=c.prev;break;case ">":if(c.next)location.href=c.next;break;case "H":if(c.home)location.href=c.home;break;case "I":if(c.index)location.href=c.index;break;case "S":c.search&&c.ajax_dialog({cmd:"search",page:PAGE,ajax:"json"});break;case "R":if(c.canonical)location.href=c.canonical;break;case "A":PAGE&&c.ajax_dialog({cmd:"attach",pcmd:"upload",page:PAGE,ajax:"json"},"",function(){c.set_uploader("div.window")});
break;case "E":if(PAGE)location.href=SCRIPT+"?cmd=edit&page="+PAGE;break;case "F":PAGE&&c.ajax_dialog({cmd:"freeze",page:PAGE,ajax:"json"});break;case "C":PAGE&&c.ajax_dialog({cmd:"source",page:PAGE,ajax:"json"});break;case "B":PAGE&&c.ajax_dialog({cmd:"backup",page:PAGE,ajax:"json"});break;case "D":PAGE&&c.ajax_dialog({cmd:"diff",page:PAGE,ajax:"json"});break;case "N":PAGE&&c.ajax_dialog({cmd:"newpage",page:PAGE,ajax:"json"});break;default:c.toc&&(c.toc.style.display!=="none"?(d===27||d===47)&&c._hideToc():
d===47&&a(c.toc).css("top",a(e).scrollTop()+"px").css("left",a(e).scrollLeft()+"px").fadeIn("fast"))}console.log(d);return!1})},prepHdngs:function(b){var b=b?b+" ":"",c="",d=a(b+"h2"),e=a(b+".contents ul").removeAttr("class").removeAttr("style");if(e.length!==0)c="<ol>"+e.html()+"</ol>",d.each(function(){a(this).html(a(this).html()+'<span class="pkwk-icon icon-toc" title="Table of Contents of this page" style="display:none; cursor:pointer;"></span>')}),a(b+"h3").each(function(){a(this).html(a(this).html()+
'<span class="pkwk-icon icon-toc" title="Table of Contents of this page" style="display:none; cursor:pointer;"></span>')});else if(d.length!==0){var f=[];d.each(function(b){var c=a(this),d=c.attr("id");d||c.attr("id","_genid_"+b);c.html(c.html()+'<span class="pkwk-icon icon-toc" title="Table of Contents of this page" style="display:none; cursor:pointer;"></span>');f[b]='<li><a href="#'+d+'">'+c.text()+"</a></li>"});c="<ol>"+f.join("\n")+"</ol>"}else a.query.get("cmd").match(/list|backup/)!==-1&&(c=
'<div style="text-align:center;">'+a("#top").html()+"</div>",a(b+"#top").html(a(b+"#top").html()+'<span class="pkwk-icon icon-toc" title="Table of Contents of this page" style="display:none; cursor:pointer;"></span>'));return c},genTocDiv:function(b){var c=this;this.toc=d.createElement("div");this.toc.id="poptoc";a(this.toc).addClass("ui-widget ui-corner-all noprint").css("top",0).css("left",0).css("position","absolute").css("z-index",100).css("display","none").html(['<h1><a href="#">'+a("h1#title").text()+
'</a><abbr title="Table of Contents">[TOC]</abbr></h1>',b.replace(/href/g,'tabindex="1" href'),this.getNaviLink()].join("")).click(function(){c._hideToc()});a("body").append(this.toc);b=d.createElement("div");b.id="toc_bg";a(b).addClass("ui-widget-shadow").css("top",0).css("left",0).css("width","100%").css("height","100%").css("position","fixed").css("z-index",99).css("display","none").click(function(){c._hideToc()});a("body").append(b);this.calcObj(this.toc,300);a(".icon-toc").click(function(a){c._dispToc(a,
this,!1)}).css("display","inline-block");a("#poptoc *").click(function(){c._hideToc()})},calcObj:function(b,c){var d=self.pageXOffset,e=self.pageYOffset;b.style.visibility="hidden";b.style.display="block";b.width=b.offsetWidth;if(b.width>c&&(b.width=c,!a.browser.safari))b.style.width=c+"px";b.height=b.offsetHeight;b.style.display="none";b.style.visibility="visible";e&&scroll(d,e)},getNaviLink:function(){var a=function(a,b,c){return b?'<a href="'+b+'" title="'+c+'">'+a+"</a>":'<span style="color:gray; cursor: not-allowed;">'+
a+"</span>"};return(a=["&lt;&lt;",a("Prev page",this.prev,this.prev_title)," | ",a("Next page",this.next,this.next_title),"&gt;&gt;<br />[ ",a("Home",this.home,this.home_title)," | ",a("Index",this.index,this.index_title)," | ",a("Search",this.search,this.search_title)," | ",a("Help",this.help,this.help_title)," ]"].join(""))?"<p class='nav'>"+a+"</p>":""},setCurPos:function(a,b){var c=a.parentNode;return b===1?a.getAttribute("id"):c.getAttribute("id")?c.getAttribute("id"):c.firstChild.getAttribute?
c.firstChild.getAttribute("id"):""},nodeText:function(a){if(typeof a!=="object")return a;var b,c,d=a.childNodes;for(a=0,c=d.length;a<c;a++)d.item(a).nodeType===3?b+=d.item(a).data:d.item(a).nodeType===1&&(b+=this.nodeText(d.item(a)));b=b.replace(/^\s*/,"");return b.replace(/\s*$/,"")},popToc:function(b){b||(b=event);a(".icon-toc").click(function(){pukiwiki._dispToc(b,this,0)});a("#poptoc","#poptoc a","#toc_bg").click(function(){pukiwiki._hideToc()})},_dispToc:function(b,c,d){a(e).scrollLeft();a(e).scrollTop();
var f=b.pageX,b=b.pageY,h=a(e).width(),i=a(e).height(),j=this.toc.width;i<this.toc.height&&a(this.toc).css("height",i+"px").css("overflow","auto");a(this.toc).css("top",b+"px").css("left",(f<h-j?f:f-j)+"px");d?(a(this.toc).fadeIn("fast"),this.setCurPos(c,type)):a(this.toc).show("slow");a("#toc_bg").fadeIn("fast")},_hideToc:function(){a("#toc_bg").fadeOut("fast");a(this.toc).fadeOut("fast")},bad_behavior:function(b){typeof BH_NAME!=="undefined"&&typeof BH_VALUE!=="undefined"&&a((b?b+" ":"")+"form").append('<input type="hidden" name="'+
BH_NAME+'" value="'+BH_VALUE+'" />')}};a.fn.serializeObject=function(){var b={},c=this.serializeArray();a.each(c,function(){b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""});return b};a(d).ready(function(){i.load({load:"http://browser-update.org/update.js"});for(var a;a=pkwkBeforeInit.shift();)a!=null&&a();pukiwiki.init();for(tzCalculation_LocalTimeZone(location.host,!1);a=j.shift();)a!=null&&a();DEBUG&&console.info("Finish. (Process Time :",
new Date-b,"ms)")});a(e).unload(function(){for(var a;a=pkwkBeforeUnload.shift();)a!=null&&a();for(pukiwiki.unload();a=pkwkUnload.shift();)a!=null&&a()});if(typeof GOOGLE_ANALYTICS!=="undefined")e._gaq=[["_setAccount",GOOGLE_ANALYTICS],["_trackPageview"],["_trackPageLoadTime"]],i.load({load:("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js"})})(jQuery,Modernizr,this,this.document);var SWFUpload;SWFUpload==void 0&&(SWFUpload=function(a){this.initSWFUpload(a)});
SWFUpload.prototype.initSWFUpload=function(a){try{this.customSettings={},this.settings=a,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(i){throw delete SWFUpload.instances[this.movieName],i;}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";
SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};
SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(a){if(typeof a!=="string"||a.match(/^https?:\/\//i)||a.match(/^\//))return a;var i=window.location.pathname.lastIndexOf("/");path=i<=0?"/":window.location.pathname.substr(0,i)+"/";return path+a};
SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(a,i){this.settings[a]=this.settings[a]==void 0?i:this.settings[a]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",!1);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",!1);this.ensureDefault("requeue_on_error",!1);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types",
"*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",!0);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");
this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",!1);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",!1);this.settings.debug_enabled=this.settings.debug;
this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",
null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(this.settings.prevent_swf_caching)this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime();if(!this.settings.preserve_relative_urls)this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=
SWFUpload.completeURL(this.settings.button_image_url);delete this.ensureDefault};
SWFUpload.prototype.loadFlash=function(){var a,i;if(document.getElementById(this.movieName)!==null)throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(a==void 0)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;i=document.createElement("div");i.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(i.firstChild,a);window[this.movieName]==
void 0&&(window[this.movieName]=this.getMovieElement())};
SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload"><param name="wmode" value="',this.settings.button_window_mode,'" /><param name="movie" value="',this.settings.flash_url,'" /><param name="quality" value="high" /><param name="menu" value="false" /><param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+
this.getFlashVars()+'" />',"</object>"].join("")};
SWFUpload.prototype.getFlashVars=function(){var a=this.buildParamString(),i=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(i),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",
encodeURIComponent(a),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),
"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),
"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==void 0)this.movieElement=document.getElementById(this.movieName);if(this.movieElement===null)throw"Could not find Flash element";return this.movieElement};
SWFUpload.prototype.buildParamString=function(){var a=this.settings.post_params,i=[];if(typeof a==="object")for(var e in a)a.hasOwnProperty(e)&&i.push(encodeURIComponent(e.toString())+"="+encodeURIComponent(a[e].toString()));return i.join("&amp;")};
SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var a=null;if((a=this.getMovieElement())&&typeof a.CallFunction==="unknown"){for(var i in a)try{typeof a[i]==="function"&&(a[i]=null)}catch(e){}try{a.parentNode.removeChild(a)}catch(d){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieName=this.eventQueue=this.customSettings=this.settings=this.movieElement=null;return!0}catch(b){return!1}};
SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\nVersion: ",SWFUpload.version,"\nMovie Name: ",this.movieName,"\nSettings:\n\tupload_url:               ",this.settings.upload_url,"\n\tflash_url:                ",this.settings.flash_url,"\n\tuse_query_string:         ",this.settings.use_query_string.toString(),"\n\trequeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n\thttp_success:             ",this.settings.http_success.join(", "),"\n\tassume_success_timeout:   ",
this.settings.assume_success_timeout,"\n\tfile_post_name:           ",this.settings.file_post_name,"\n\tpost_params:              ",this.settings.post_params.toString(),"\n\tfile_types:               ",this.settings.file_types,"\n\tfile_types_description:   ",this.settings.file_types_description,"\n\tfile_size_limit:          ",this.settings.file_size_limit,"\n\tfile_upload_limit:        ",this.settings.file_upload_limit,"\n\tfile_queue_limit:         ",this.settings.file_queue_limit,"\n\tdebug:                    ",
this.settings.debug.toString(),"\n\tprevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n\tbutton_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n\tbutton_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n\tbutton_image_url:         ",this.settings.button_image_url.toString(),"\n\tbutton_width:             ",this.settings.button_width.toString(),"\n\tbutton_height:            ",this.settings.button_height.toString(),"\n\tbutton_text:              ",
this.settings.button_text.toString(),"\n\tbutton_text_style:        ",this.settings.button_text_style.toString(),"\n\tbutton_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n\tbutton_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n\tbutton_action:            ",this.settings.button_action.toString(),"\n\tbutton_disabled:          ",this.settings.button_disabled.toString(),"\n\tcustom_settings:          ",this.settings.custom_settings.toString(),"\nEvent Handlers:\n\tswfupload_loaded_handler assigned:  ",
(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n\tfile_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n\tfile_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n\tfile_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n\tupload_start_handler assigned:      ",(typeof this.settings.upload_start_handler===
"function").toString(),"\n\tupload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n\tupload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n\tupload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n\tupload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n\tdebug_handler assigned:             ",
(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(a,i,e){return i==void 0?this.settings[a]=e:this.settings[a]=i};SWFUpload.prototype.getSetting=function(a){return this.settings[a]!=void 0?this.settings[a]:""};
SWFUpload.prototype.callFlash=function(a,i){var i=i||[],e=this.getMovieElement(),d,b;try{b=e.CallFunction('<invoke name="'+a+'" returntype="javascript">'+__flash__argumentsToXML(i,0)+"</invoke>"),d=eval(b)}catch(c){throw"Call to "+a+" failed";}d!=void 0&&typeof d.post==="object"&&(d=this.unescapeFilePostParams(d));return d};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};
SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelUpload=function(a,i){i!==!1&&(i=!0);this.callFlash("CancelUpload",[a,i])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};
SWFUpload.prototype.getFile=function(a){return typeof a==="number"?this.callFlash("GetFileByIndex",[a]):this.callFlash("GetFile",[a])};SWFUpload.prototype.addFileParam=function(a,i,e){return this.callFlash("AddFileParam",[a,i,e])};SWFUpload.prototype.removeFileParam=function(a,i){this.callFlash("RemoveFileParam",[a,i])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};
SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,i){this.settings.post_params[a]=i;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};
SWFUpload.prototype.setFileTypes=function(a,i){this.settings.file_types=a;this.settings.file_types_description=i;this.callFlash("SetFileTypes",[a,i])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};
SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};
SWFUpload.prototype.setHTTPSuccess=function(a){typeof a==="string"&&(a=a.replace(" ","").split(","));this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};
SWFUpload.prototype.setButtonImageURL=function(a){a==void 0&&(a="");this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(a,i){this.settings.button_width=a;this.settings.button_height=i;var e=this.getMovieElement();if(e!=void 0)e.style.width=a+"px",e.style.height=i+"px";this.callFlash("SetButtonDimensions",[a,i])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};
SWFUpload.prototype.setButtonTextPadding=function(a,i){this.settings.button_text_top_padding=i;this.settings.button_text_left_padding=a;this.callFlash("SetButtonTextPadding",[a,i])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};
SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};
SWFUpload.prototype.queueEvent=function(a,i){i==void 0?i=[]:i instanceof Array||(i=[i]);var e=this;if(typeof this.settings[a]==="function")this.eventQueue.push(function(){this.settings[a].apply(this,i)}),setTimeout(function(){e.executeNextEvent()},0);else if(this.settings[a]!==null)throw"Event handler "+a+" is unknown or is not a function";};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;typeof a==="function"&&a.apply(this)};
SWFUpload.prototype.unescapeFilePostParams=function(a){var i=/[$]([0-9a-f]{4})/i,e={},d;if(a!=void 0){for(var b in a.post)if(a.post.hasOwnProperty(b)){d=b;for(var c;(c=i.exec(d))!==null;)d=d.replace(c[0],String.fromCharCode(parseInt("0x"+c[1],16)));e[d]=a.post[b]}a.post=e}return a};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return!1}};
SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();a?(this.cleanUp(a),this.queueEvent("swfupload_loaded_handler")):this.debug("Flash called back ready but the flash movie can't be found.")};
SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&typeof a.CallFunction==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var i in a)try{typeof a[i]==="function"&&(a[i]=null)}catch(e){}}}catch(d){}window.__flash__removeCallback=function(a,c){try{a&&(a[c]=null)}catch(d){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};
SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(a,i,e){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,i,e])};SWFUpload.prototype.fileDialogComplete=function(a,i,e){this.queueEvent("file_dialog_complete_handler",[a,i,e])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};
SWFUpload.prototype.returnUploadStart=function(a){var i;if(typeof this.settings.upload_start_handler==="function")a=this.unescapeFilePostParams(a),i=this.settings.upload_start_handler.call(this,a);else if(this.settings.upload_start_handler!=void 0)throw"upload_start_handler must be a function";i===void 0&&(i=!0);this.callFlash("ReturnUploadStart",[!!i])};SWFUpload.prototype.uploadProgress=function(a,i,e){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,i,e])};
SWFUpload.prototype.uploadError=function(a,i,e){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,i,e])};SWFUpload.prototype.uploadSuccess=function(a,i,e){a=this.unescapeFilePostParams(a);this.queueEvent("upload_success_handler",[a,i,e])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};
SWFUpload.prototype.debugMessage=function(a){if(this.settings.debug){var i=[];if(typeof a==="object"&&typeof a.name==="string"&&typeof a.message==="string"){for(var e in a)a.hasOwnProperty(e)&&i.push(e+": "+a[e]);a=i.join("\n")||"";i=a.split("\n");a="EXCEPTION: "+i.join("\nEXCEPTION: ")}SWFUpload.Console.writeLine(a)}};SWFUpload.Console={};
SWFUpload.Console.writeLine=function(a){var i,e;try{i=document.getElementById("SWFUpload_Console");if(!i)e=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(e),i=document.createElement("textarea"),i.id="SWFUpload_Console",i.style.fontFamily="monospace",i.setAttribute("wrap","off"),i.wrap="off",i.style.overflow="auto",i.style.width="700px",i.style.height="350px",i.style.margin="5px",e.appendChild(i);i.value+=a+"\n";i.scrollTop=i.scrollHeight-i.clientHeight}catch(d){alert("Exception: "+
d.name+" Message: "+d.message)}};
var tzCalculation_LocalTimeZone=function(a,i){var e,d,b;e=new Date;d=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds());b=(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())-d)/1E3/60;e=0>b?"-":"+";d=b%60;d!=0&&(b-=d,0>d&&(d=Math.abs(d)));0>b&&(b=Math.abs(b));b/=60;10>b&&(e+="0");e+=b;10>d&&(e+="0");e+=d;i&&document.writeln(e);document.cookie="timezone="+e+"; domain="+a;return e};
