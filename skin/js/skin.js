var caretPositionAmp=[];function init(){if(navigator.appName=="Microsoft Internet Explorer"){obj=document.getElementsByTagName("TEXTAREA");var c,d=0;for(d=0;d<obj.length;d++){c=obj[d];caretPositionAmp[d]=c.value.length;c.onmouseup=function(){c=document.activeElement;for(var g=0;g<obj.length;g++){if(obj[g]==c){break}}c.focus();var b=document.selection.createRange(),a=c.createTextRange(),f=a.duplicate();a.moveToBookmark(b.getBookmark());f.setEndPoint("EndToStart",a);caretPositionAmp[g]=f.text.length};c.onkeyup=function(){c=document.activeElement;for(var g=0;g<obj.length;g++){if(obj[g]==c){break}}c.focus();var b=document.selection.createRange(),a=c.createTextRange(),f=a.duplicate();a.moveToBookmark(b.getBookmark());f.setEndPoint("EndToStart",a);caretPositionAmp[g]=f.text.length}}}}window.onload=init;jQuery.fn.extend({getSelection:function(){var s=this.jquery?this[0]:this,t,r,p,m=0;s.onmousedown=function(){document.selection&&typeof s.selectionStart!="number"?document.selection.empty():window.getSelection().removeAllRanges()};if(document.selection){var q=document.selection.createRange(),o=0,n=0,l=0;t=document.getElementsByTagName("TEXTAREA");for(r=0;r<t.length;r++){if(t[r]==s){break}}if(s.value.match(/\n/g)!=null){m=s.value.match(/\n/g).length}if(q.text){p=q.text;if(typeof s.selectionStart=="number"){t=s.selectionStart;r=s.selectionEnd;if(t==r){return{start:t,end:r,text:q.text,length:r-t}}}else{t=s.createTextRange();p=t.duplicate();firstRe=t.text;t.moveToBookmark(q.getBookmark());secondRe=t.text;p.setEndPoint("EndToStart",t);if(firstRe==secondRe&&firstRe!=q.text||p.text.length>firstRe.length){return{start:caretPositionAmp[r],end:caretPositionAmp[r],text:"",length:0}}t=p.text.length;r=p.text.length+q.text.length}if(m>0){for(p=0;p<=m;p++){var j=s.value.indexOf("\n",n);if(j!=-1&&j<t){n=j+1;o++;l=o}else{if(j!=-1&&j>=t&&j<=r){if(j==t+1){o--;l--;n=j+1}else{n=j+1;l++}}else{p=m}}}}if(q.text.indexOf("\n",0)==1){l+=2}t-=o;r-=l;return{start:t,end:r,text:q.text,length:r-t}}s.focus();if(typeof s.selectionStart=="number"){t=s.selectionStart}else{q=document.selection.createRange();t=s.createTextRange();p=t.duplicate();t.moveToBookmark(q.getBookmark());p.setEndPoint("EndToStart",t);t=p.text.length}if(m>0){for(p=0;p<=m;p++){j=s.value.indexOf("\n",n);if(j!=-1&&j<t){n=j+1;o++}else{p=m}}}t-=o;if(t==0&&typeof s.selectionStart!="number"){t=caretPositionAmp[r];r=caretPositionAmp[r]}return{start:t,end:t,text:q.text,length:0}}else{if(typeof s.selectionStart=="number"){t=s.selectionStart;r=s.selectionEnd;p=s.value.substring(s.selectionStart,s.selectionEnd);return{start:t,end:r,text:p,length:r-t}}else{return{start:undefined,end:undefined,text:undefined,length:undefined}}}},replaceSelection:function(y){var z=this.jquery?this[0]:this,x,v;v=0;var s,w,u=0,t=0,r=z.scrollTop==undefined?0:z.scrollTop;x=document.getElementsByTagName("TEXTAREA");for(var p=0;p<x.length;p++){if(x[p]==z){break}}if(document.selection&&typeof z.selectionStart!="number"){r=document.selection.createRange();if(typeof z.selectionStart!="number"){var q;w=z.createTextRange();s=w.duplicate();x=w.text;w.moveToBookmark(r.getBookmark());q=w.text;try{s.setEndPoint("EndToStart",w)}catch(n){return this}if(x==q&&x!=r.text||s.text.length>x.length){return this}}if(r.text){part=r.text;if(z.value.match(/\n/g)!=null){u=z.value.match(/\n/g).length}x=s.text.length;if(u>0){for(q=0;q<=u;q++){var o=z.value.indexOf("\n",v);if(o!=-1&&o<x){v=o+1;t++}else{q=u}}}r.text=y;caretPositionAmp[p]=s.text.length+y.length;w.move("character",caretPositionAmp[p]);document.selection.empty();z.blur()}return this}else{if(typeof z.selectionStart=="number"&&z.selectionStart!=z.selectionEnd){x=z.selectionStart;v=z.selectionEnd;z.value=z.value.substr(0,x)+y+z.value.substr(v);v=x+y.length;z.setSelectionRange(v,v);z.scrollTop=r;return this}}return this},setSelection:function(q,r){q=parseInt(q);r=parseInt(r);var p=this.jquery?this[0]:this;p.focus();if(typeof p.selectionStart!="number"){re=p.createTextRange();if(re.text.length<r){r=re.text.length+1}}if(r<q){return this}if(document.selection){var n=0,k=0,o=0,m=0;if(typeof p.selectionStart!="number"){re.collapse(true);re.moveEnd("character",r);re.moveStart("character",q);re.select()}else{if(typeof p.selectionStart=="number"){if(p.value.match(/\n/g)!=null){n=p.value.match(/\n/g).length}if(n>0){for(var l=0;l<=n;l++){var j=p.value.indexOf("\n",o);if(j!=-1&&j<q){o=j+1;k++;m=k}else{if(j!=-1&&j>=q&&j<=r){if(j==q+1){k--;m--;o=j+1}else{o=j+1;m++}}else{l=n}}}}q+=k;r+=m;p.selectionStart=q;p.selectionEnd=r}p.focus()}return this}else{if(p.selectionStart||p.selectionStart==0){p.focus();window.getSelection().removeAllRanges();p.selectionStart=q;p.selectionEnd=r;p.focus();return this}}},insertAtCaretPos:function(y){var z=this.jquery?this[0]:this,x,v,s,w,u,t,r;x=v=0;var p=z.scrollTop==undefined?0:z.scrollTop;r=document.getElementsByTagName("TEXTAREA");for(var q=0;q<r.length;q++){if(r[q]==z){break}}z.focus();if(document.selection&&typeof z.selectionStart!="number"){if(z.value.match(/\n/g)!=null){x=z.value.match(/\n/g).length}r=parseInt(caretPositionAmp[q]);if(x>0){for(var n=0;n<=x;n++){var o=z.value.indexOf("\n",s);if(o!=-1&&o<=r){s=o+1;r-=1;v++}}}}caretPositionAmp[q]=parseInt(caretPositionAmp[q]);z.onkeyup=function(){if(document.selection&&typeof z.selectionStart!="number"){z.focus();w=document.selection.createRange();u=z.createTextRange();t=u.duplicate();u.moveToBookmark(w.getBookmark());t.setEndPoint("EndToStart",u);caretPositionAmp[q]=t.text.length}};z.onmouseup=function(){if(document.selection&&typeof z.selectionStart!="number"){z.focus();w=document.selection.createRange();u=z.createTextRange();t=u.duplicate();u.moveToBookmark(w.getBookmark());t.setEndPoint("EndToStart",u);caretPositionAmp[q]=t.text.length}};if(document.selection&&typeof z.selectionStart!="number"){w=document.selection.createRange();if(w.text.length!=0){return this}u=z.createTextRange();textLength=u.text.length;t=u.duplicate();u.moveToBookmark(w.getBookmark());t.setEndPoint("EndToStart",u);x=t.text.length;if(caretPositionAmp[q]>0&&x==0){v=caretPositionAmp[q]-v;u.move("character",v);u.select();w=document.selection.createRange();caretPositionAmp[q]+=y.length}else{if(!(caretPositionAmp[q]>=0)&&textLength==0){w=document.selection.createRange();caretPositionAmp[q]=y.length+textLength}else{if(!(caretPositionAmp[q]>=0)&&x==0){u.move("character",textLength);u.select();w=document.selection.createRange();caretPositionAmp[q]=y.length+textLength}else{if(!(caretPositionAmp[q]>=0)&&x>0){u.move("character",0);document.selection.empty();u.select();w=document.selection.createRange();caretPositionAmp[q]=x+y.length}else{if(caretPositionAmp[q]>=0&&caretPositionAmp[q]==textLength){if(textLength!=0){u.move("character",textLength);u.select()}else{u.move("character",0)}w=document.selection.createRange();caretPositionAmp[q]=y.length+textLength}else{if(caretPositionAmp[q]>=0&&x!=0&&caretPositionAmp[q]>=x){v=caretPositionAmp[q]-x;u.move("character",v)}else{caretPositionAmp[q]>=0&&x!=0&&caretPositionAmp[q]<x&&u.move("character",0)}document.selection.empty();u.select();w=document.selection.createRange();caretPositionAmp[q]+=y.length}}}}}w.text=y;z.focus();return this}else{if(typeof z.selectionStart=="number"&&z.selectionStart==z.selectionEnd){s=z.selectionStart+y.length;x=z.selectionStart;v=z.selectionEnd;z.value=z.value.substr(0,x)+y+z.value.substr(v);z.setSelectionRange(s,s);z.scrollTop=p;return this}}return this},setCaretPos:function(i){var j=this.jquery?this[0]:this,p,n=0,k=0,o;o=document.getElementsByTagName("TEXTAREA");for(var m=0;m<o.length;m++){if(o[m]==j){break}}j.focus();if(parseInt(i)==0){return this}if(parseInt(i)>0){i=parseInt(i)-1;if(document.selection&&typeof j.selectionStart=="number"&&j.selectionStart==j.selectionEnd){if(j.value.match(/\n/g)!=null){n=j.value.match(/\n/g).length}if(n>0){for(var l=0;l<=n;l++){o=j.value.indexOf("\n",p);if(o!=-1&&o<=i){p=o+1;i=parseInt(i)+1}}}}}else{if(parseInt(i)<0){i=parseInt(i)+1;if(document.selection&&typeof j.selectionStart!="number"){i=j.value.length+parseInt(i);if(j.value.match(/\n/g)!=null){n=j.value.match(/\n/g).length}if(n>0){for(l=0;l<=n;l++){o=j.value.indexOf("\n",p);if(o!=-1&&o<=i){p=o+1;i=parseInt(i)-1;k+=1}}i=i+k-n}}else{if(document.selection&&typeof j.selectionStart=="number"){i=j.value.length+parseInt(i);if(j.value.match(/\n/g)!=null){n=j.value.match(/\n/g).length}if(n>0){i=parseInt(i)-n;for(l=0;l<=n;l++){o=j.value.indexOf("\n",p);if(o!=-1&&o<=i){p=o+1;i=parseInt(i)+1;k+=1}}}}else{i=j.value.length+parseInt(i)}}}else{return this}}if(document.selection&&typeof j.selectionStart!="number"){p=document.selection.createRange();if(p.text!=0){return this}j=j.createTextRange();j.collapse(true);j.moveEnd("character",i);j.moveStart("character",i);j.select();caretPositionAmp[m]=i;return this}else{if(typeof j.selectionStart=="number"&&j.selectionStart==j.selectionEnd){j.setSelectionRange(i,i);return this}}return this},countCharacters:function(){var a=this.jquery?this[0]:this;if(a.value.match(/\r/g)!=null){return a.value.length-a.value.match(/\r/g).length}return a.value.length},setMaxLength:function(c,d){this.each(function(){var g=this.jquery?this[0]:this,b=g.type,a,f;if(parseInt(c)<0){c=100000000}if(b=="text"){g.maxLength=c}if(b=="textarea"||b=="text"){g.onkeypress=function(h){var e=g.value.match(/\r/g);f=c;if(e!=null){f=parseInt(f)+e.length}h=h||event;e=h.keyCode;a=document.selection?document.selection.createRange().text.length>0:g.selectionStart!=g.selectionEnd;if(g.value.length>=f&&(e>47||e==32||e==0||e==13)&&!h.ctrlKey&&!h.altKey&&!a){g.value=g.value.substring(0,f);typeof d=="function"&&d();return false}};g.onkeyup=function(){var l=g.value.match(/\r/g),j=0,h=0;f=c;if(l!=null){for(var e=0;e<=l.length;e++){if(g.value.indexOf("\n",h)<=parseInt(c)){j++;h=g.value.indexOf("\n",h)+1}}f=parseInt(c)+j}if(g.value.length>f){g.value=g.value.substring(0,f);typeof d=="function"&&d();return this}}}else{return this}});return this}});(function(e){var c=e.ajax;var f=null;var b={trackEventCategory:"jQuery.ajax",autoTracking:true};var a=[];e.ajaxGA={};e.ajaxGA.getOption=function(g){return b[g]};e.ajaxGA.setOption=function(g,h){if(typeof(g)=="string"){if(typeof(b[g])!="undefined"){b[g]=h}}else{for(key in g){if(typeof(b[key])!="undefined"){b[key]=g[key]}}}};e.ajaxGA.init=function(h,g){e(function(){c.apply(e,[{type:"GET",url:(document.location.protocol=="https:"?"https://ssl":"http://www")+".google-analytics.com/ga.js",cache:true,dataType:"script",success:function(){if(typeof(_gat)=="undefined"){throw new Error("Missing _gat")}f=_gat._getTracker(h);if(g){if(e.isFunction(g)){g(f)}else{if(typeof(g)=="string"){f._trackPageview(g)}else{f._trackPageview()}}}var i;while(i=a.shift()){i(f)}}}])})};e.ajaxGA.doPageTrack=function(g){if(f==null){a.push(g)}else{g(f)}};function d(i){if(b.autoTracking){if(typeof(i.trackGA)!="undefined"&&!i.trackGA){return c.apply(this,[i])}}else{if(!i.trackGA){return c.apply(this,[i])}}var g=i.complete;var h=i.error;i.complete=function(k,j){if(g){g(k,j)}if(i.trackGA){if(e.isFunction(i.trackGA)){e.ajaxGA.doPageTrack(i.trackGA)}else{e.ajaxGA.doPageTrack(function(l){l._trackPageview(i.trackGA)})}}else{e.ajaxGA.doPageTrack(function(l){l._trackEvent(b.trackEventCategory,(i.type?i.type:"GET"),i.url)})}i.complete=g;i.error=h};i.error=function(l,j,k){if(h){h(l,j,k)}i.complete=g;i.error=h};return c.apply(this,[i])}e.ajaxGA.enable=function(){e.extend({ajax:d})};e.ajaxGA.disable=function(){e.extend({ajax:c})};e.ajaxGA.enable()})(jQuery);(function(a1,a0,aZ){function a2(a){if(!ag){al=a,a4(a1.extend(aq,a1.data(al,aX))),aE=a1(al),ak=0,aq.rel!=="nofollow"&&(aE=a1("."+ac).filter(function(){var c=a1.data(this,aX).rel||this.rel;return c===aq.rel}),ak=aE.index(al),ak===-1&&(aE=aE.add(al),ak=aE.length-1));if(!ai){ai=ah=!0,aL.show();if(aq.returnFocus){try{al.blur(),a1(al).one(aR,function(){try{this.focus()}catch(b){}})}catch(d){}}aM.css({opacity:+aq.opacity,cursor:aq.overlayClose?"pointer":"auto"}).show(),aq.w=aa(aq.initialWidth,"x"),aq.h=aa(aq.initialHeight,"y"),ad.position(0),aO&&aD.bind("resize."+aN+" scroll."+aN,function(){aM.css({width:aD.width(),height:aD.height(),top:aD.scrollTop(),left:aD.scrollLeft()})}).trigger("resize."+aN),a5(aV,aq.onOpen),ar.add(ay).hide(),at.html(aq.close).show()}ad.load(!0)}}function a3(){var h,f=aW+"Slideshow_",l="click."+aW,k,j,i;aq.slideshow&&aE[1]?(k=function(){aw.text(aq.slideshowStop).unbind(l).bind(aT,function(){if(ak<aE.length-1||aq.loop){h=setTimeout(ad.next,aq.slideshowSpeed)}}).bind(aU,function(){clearTimeout(h)}).one(l+" "+aS,j),aL.removeClass(f+"off").addClass(f+"on"),h=setTimeout(ad.next,aq.slideshowSpeed)},j=function(){clearTimeout(h),aw.text(aq.slideshowStart).unbind([aT,aU,aS,l].join(" ")).one(l,k),aL.removeClass(f+"on").addClass(f+"off")},aq.slideshowAuto?k():j()):aL.removeClass(f+"off "+f+"on")}function a5(a,d){d&&d.call(al),a1.event.trigger(a)}function a4(a){for(var d in a){a1.isFunction(a[d])&&d.substring(0,2)!=="on"&&(a[d]=a[d].call(al))}a.rel=a.rel||al.rel||"nofollow",a.href=a.href||a1(al).attr("href"),a.title=a.title||al.title,typeof a.href=="string"&&(a.href=a1.trim(a.href))}function aB(b){return aq.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(b)}function aa(d,c){c=c==="x"?aD.width():aD.height();return typeof d=="string"?Math.round(/%/.test(d)?c/100*parseInt(d,10):parseInt(d,10)):d}function ab(f,b){var a=a0.createElement("div");f&&(a.id=aW+f),a.style.cssText=b||"";return a1(a)}var aY={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:0.9,preloading:!0,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:!1,returnFocus:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:!1},aX="colorbox",aW="cbox",aV=aW+"_open",aU=aW+"_load",aT=aW+"_complete",aS=aW+"_cleanup",aR=aW+"_closed",aQ=aW+"_purge",aP=a1.browser.msie&&!a1.support.opacity,aO=aP&&a1.browser.version<7,aN=aW+"_IE6",aM,aL,aK,aJ,aI,aH,aG,aF,aE,aD,aC,aA,az,ay,ax,aw,av,au,at,ar,aq={},ap,ao,an,am,al,ak,aj,ai,ah,ag,af,ae,ad,ac=aW+"Element";ad=a1.fn[aX]=a1[aX]=function(a,h){var e=this,d;if(!e[0]&&e.selector){return e}a=a||{},h&&(a.onComplete=h);if(!e[0]||e.selector===undefined){e=a1("<a/>"),a.open=!0}e.each(function(){a1.data(this,aX,a1.extend({},a1.data(this,aX)||aY,a)),a1(this).addClass(ac)}),d=a.open,a1.isFunction(d)&&(d=d.call(e)),d&&a2(e[0]);return e},ad.init=function(){aD=a1(aZ),aL=ab().attr({id:aX,"class":aP?aW+(aO?"IE6":"IE"):""}),aM=ab("Overlay",aO?"position:absolute":"").hide(),aK=ab("Wrapper"),aJ=ab("Content").append(aC=ab("LoadedContent","width:0; height:0; overflow:hidden"),az=ab("LoadingOverlay").add(ab("LoadingGraphic")),ay=ab("Title"),ax=ab("Current"),av=ab("Next"),au=ab("Previous"),aw=ab("Slideshow").bind(aV,a3),at=ab("Close")),aK.append(ab().append(ab("TopLeft"),aI=ab("TopCenter"),ab("TopRight")),ab(!1,"clear:left").append(aH=ab("MiddleLeft"),aJ,aG=ab("MiddleRight")),ab(!1,"clear:left").append(ab("BottomLeft"),aF=ab("BottomCenter"),ab("BottomRight"))).children().children().css({"float":"left"}),aA=ab(!1,"position:absolute; width:9999px; visibility:hidden; display:none"),a1("body").prepend(aM,aL.append(aK,aA)),aJ.children().hover(function(){a1(this).addClass("hover")},function(){a1(this).removeClass("hover")}).addClass("hover"),ap=aI.height()+aF.height()+aJ.outerHeight(!0)-aJ.height(),ao=aH.width()+aG.width()+aJ.outerWidth(!0)-aJ.width(),an=aC.outerHeight(!0),am=aC.outerWidth(!0),aL.css({"padding-bottom":ap,"padding-right":ao}).hide(),av.click(function(){ad.next()}),au.click(function(){ad.prev()}),at.click(function(){ad.close()}),ar=av.add(au).add(ax).add(aw),aJ.children().removeClass("hover"),aM.click(function(){aq.overlayClose&&ad.close()}),a1(a0).bind("keydown."+aW,function(d){var c=d.keyCode;ai&&aq.escKey&&c===27&&(d.preventDefault(),ad.close()),ai&&aq.arrowKey&&aE[1]&&(c===37?(d.preventDefault(),au.click()):c===39&&(d.preventDefault(),av.click()))})},ad.remove=function(){aL.add(aM).remove(),a1("."+ac).removeData(aX).removeClass(ac)},ad.position=function(b,l){function h(c){aI[0].style.width=aF[0].style.width=aJ[0].style.width=c.style.width,az[0].style.height=az[1].style.height=aJ[0].style.height=aH[0].style.height=aG[0].style.height=c.style.height}var k,j=0,i=0;aL.hide(),aq.fixed&&!aO?aL.css({position:"fixed"}):(j=aD.scrollTop(),i=aD.scrollLeft(),aL.css({position:"absolute"})),aq.right!==!1?i+=Math.max(aD.width()-aq.w-am-ao-aa(aq.right,"x"),0):aq.left!==!1?i+=aa(aq.left,"x"):i+=Math.max(aD.width()-aq.w-am-ao,0)/2,aq.bottom!==!1?j+=Math.max(a0.documentElement.clientHeight-aq.h-an-ap-aa(aq.bottom,"y"),0):aq.top!==!1?j+=aa(aq.top,"y"):j+=Math.max(a0.documentElement.clientHeight-aq.h-an-ap,0)/2,aL.show(),k=aL.width()===aq.w+am&&aL.height()===aq.h+an?0:b,aK[0].style.width=aK[0].style.height="9999px",aL.dequeue().animate({width:aq.w+am,height:aq.h+an,top:j,left:i},{duration:k,complete:function(){h(this),ah=!1,aK[0].style.width=aq.w+am+ao+"px",aK[0].style.height=aq.h+an+ap+"px",l&&l()},step:function(){h(this)}})},ad.resize=function(d){if(ai){d=d||{},d.width&&(aq.w=aa(d.width,"x")-am-ao),d.innerWidth&&(aq.w=aa(d.innerWidth,"x")),aC.css({width:aq.w}),d.height&&(aq.h=aa(d.height,"y")-an-ap),d.innerHeight&&(aq.h=aa(d.innerHeight,"y"));if(!d.innerHeight&&!d.height){var c=aC.wrapInner("<div style='overflow:auto'></div>").children();aq.h=c.height(),c.replaceWith(c.children())}aC.css({height:aq.h}),ad.position(aq.transition==="none"?0:aq.speed)}},ad.prep=function(a){function e(c){ad.position(c,function(){function t(){aP&&aL[0].style.removeAttribute("filter")}var l,s,r,q,p=aE.length,m,u;!ai||(u=function(){clearTimeout(ae),az.hide(),a5(aT,aq.onComplete)},aP&&aj&&aC.fadeIn(100),ay.html(aq.title).add(aC).show(),p>1?(typeof aq.current=="string"&&ax.html(aq.current.replace(/\{current\}/,ak+1).replace(/\{total\}/,p)).show(),av[aq.loop||ak<p-1?"show":"hide"]().html(aq.next),au[aq.loop||ak?"show":"hide"]().html(aq.previous),l=ak?aE[ak-1]:aE[p-1],r=ak<p-1?aE[ak+1]:aE[0],aq.slideshow&&aw.show(),aq.preloading&&(q=a1.data(r,aX).href||r.href,s=a1.data(l,aX).href||l.href,q=a1.isFunction(q)?q.call(r):q,s=a1.isFunction(s)?s.call(l):s,aB(q)&&(a1("<img/>")[0].src=q),aB(s)&&(a1("<img/>")[0].src=s))):ar.hide(),aq.iframe?(m=a1("<iframe/>").addClass(aW+"Iframe")[0],aq.fastIframe?u():a1(m).one("load",u),m.name=aW+ +(new Date),m.src=aq.href,aq.scrolling||(m.scrolling="no"),aP&&(m.frameBorder=0,m.allowTransparency="true"),a1(m).appendTo(aC).one(aQ,function(){m.src="//about:blank"})):u(),aq.transition==="fade"?aL.fadeTo(j,1,t):t(),aD.bind("resize."+aW,function(){ad.position(0)}))})}function f(){aq.h=aq.h||aC.height(),aq.h=aq.mh&&aq.mh<aq.h?aq.mh:aq.h;return aq.h}function i(){aq.w=aq.w||aC.width(),aq.w=aq.mw&&aq.mw<aq.w?aq.mw:aq.w;return aq.w}if(!!ai){var j=aq.transition==="none"?0:aq.speed;aD.unbind("resize."+aW),aC.remove(),aC=ab("LoadedContent").html(a),aC.hide().appendTo(aA.show()).css({width:i(),overflow:aq.scrolling?"auto":"hidden"}).css({height:f()}).prependTo(aJ),aA.hide(),a1(aj).css({"float":"none"}),aO&&a1("select").not(aL.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(aS,function(){this.style.visibility="inherit"}),aq.transition==="fade"?aL.fadeTo(j,0,function(){e(0)}):e(j)}},ad.load=function(a){var h,f,e=ad.prep;ah=!0,aj=!1,al=aE[ak],a||a4(a1.extend(aq,a1.data(al,aX))),a5(aQ),a5(aU,aq.onLoad),aq.h=aq.height?aa(aq.height,"y")-an-ap:aq.innerHeight&&aa(aq.innerHeight,"y"),aq.w=aq.width?aa(aq.width,"x")-am-ao:aq.innerWidth&&aa(aq.innerWidth,"x"),aq.mw=aq.w,aq.mh=aq.h,aq.maxWidth&&(aq.mw=aa(aq.maxWidth,"x")-am-ao,aq.mw=aq.w&&aq.w<aq.mw?aq.w:aq.mw),aq.maxHeight&&(aq.mh=aa(aq.maxHeight,"y")-an-ap,aq.mh=aq.h&&aq.h<aq.mh?aq.h:aq.mh),h=aq.href,ae=setTimeout(function(){az.show()},100),aq.inline?(ab().hide().insertBefore(a1(h)[0]).one(aQ,function(){a1(this).replaceWith(aC.children())}),e(a1(h))):aq.iframe?e(" "):aq.html?e(aq.html):aB(h)?(a1(aj=new Image).addClass(aW+"Photo").error(function(){aq.title=!1,e(ab("Error").text("This image could not be loaded"))}).load(function(){var b;aj.onload=null,aq.scalePhotos&&(f=function(){aj.height-=aj.height*b,aj.width-=aj.width*b},aq.mw&&aj.width>aq.mw&&(b=(aj.width-aq.mw)/aj.width,f()),aq.mh&&aj.height>aq.mh&&(b=(aj.height-aq.mh)/aj.height,f())),aq.h&&(aj.style.marginTop=Math.max(aq.h-aj.height,0)/2+"px"),aE[1]&&(ak<aE.length-1||aq.loop)&&(aj.style.cursor="pointer",aj.onclick=function(){ad.next()}),aP&&(aj.style.msInterpolationMode="bicubic"),setTimeout(function(){e(aj)},1)}),setTimeout(function(){aj.src=h},1)):h&&aA.load(h,aq.data,function(g,j,i){e(j==="error"?ab("Error").text("Request unsuccessful: "+i.statusText):a1(this).contents())})},ad.next=function(){!ah&&aE[1]&&(ak<aE.length-1||aq.loop)&&(ak=ak<aE.length-1?ak+1:0,ad.load())},ad.prev=function(){!ah&&aE[1]&&(ak||aq.loop)&&(ak=ak?ak-1:aE.length-1,ad.load())},ad.close=function(){ai&&!ag&&(ag=!0,ai=!1,a5(aS,aq.onCleanup),aD.unbind("."+aW+" ."+aN),aM.fadeTo(200,0),aL.stop().fadeTo(300,0,function(){aL.add(aM).css({opacity:1,cursor:"auto"}).hide(),a5(aQ),aC.remove(),setTimeout(function(){ag=!1,a5(aR,aq.onClosed)},1)}))},ad.element=function(){return a1(al)},ad.settings=aY,af=function(b){b.button!==0&&typeof b.button!="undefined"||b.ctrlKey||b.shiftKey||b.altKey||(b.preventDefault(),a2(this))},a1.fn.delegate?a1(a0).delegate("."+ac,"click",af):a1("."+ac).live("click",af),a1(ad.init)})(jQuery,document,this);jQuery.cookie=function(w,p,i){if(typeof p!="undefined"){i=i||{};if(p===null){p="";i.expires=-1}var t="";if(i.expires&&(typeof i.expires=="number"||i.expires.toUTCString)){var s;if(typeof i.expires=="number"){s=new Date();s.setTime(s.getTime()+(i.expires*24*60*60*1000))}else{s=i.expires}t="; expires="+s.toUTCString()}var n=i.path?"; path="+(i.path):"";var r=i.domain?"; domain="+(i.domain):"";var x=i.secure?"; secure":"";document.cookie=[w,"=",encodeURIComponent(p),t,n,r,x].join("")}else{var u=null;if(document.cookie&&document.cookie!=""){var o=document.cookie.split(";");for(var q=0;q<o.length;q++){var v=jQuery.trim(o[q]);if(v.substring(0,w.length+1)==(w+"=")){u=decodeURIComponent(v.substring(w.length+1));break}}}return u}};(function(a){a._i18n={trans:{},"default":"en",language:"en"};a.i18n=function(){var f=function(h,i){var g=false;if(a._i18n.trans[a._i18n.language]&&a._i18n.trans[a._i18n.language][h]&&a._i18n.trans[a._i18n.language][h][i]){g=a._i18n.trans[a._i18n.language][h][i]}else{if(a._i18n.trans[a._i18n["default"]]&&a._i18n.trans[a._i18n["default"]][h]&&a._i18n.trans[a._i18n["default"]][h][i]){g=a._i18n.trans[a._i18n["default"]][h][i]}}return g||i};if(arguments.length<2){a._i18n.language=arguments[0];return a._i18n.language}else{if(typeof(arguments[1])=="string"){var c=f(arguments[0],arguments[1]);if(arguments[2]&&typeof(arguments[2])=="object"){return a.format(c,arguments[2])}else{return c}}else{var b=arguments[0].split(".");var e=b[0];var d=b[1]||"jQuery";if(!a._i18n.trans[e]){a._i18n.trans[e]={}}if(!a._i18n.trans[e][d]){a._i18n.trans[e][d]=arguments[1]}else{a.extend(a._i18n.trans[e][d],arguments[1])}}}}})(jQuery);(function(b){function a(e,c){var f=function(d){d=b[e][d]||[];return typeof d=="string"?d.split(/,?\s+/):d}("getter");return b.inArray(c,f)!=-1}b.fn.jPlayer=function(f){var c=typeof f=="string",h=Array.prototype.slice.call(arguments,1);if(c&&f.substring(0,1)=="_"){return this}if(c&&a("jPlayer",f,h)){var g=b.data(this[0],"jPlayer");return g?g[f].apply(g,h):undefined}return this.each(function(){var d=b.data(this,"jPlayer");!d&&!c&&b.data(this,"jPlayer",new b.jPlayer(this,f))._init();d&&c&&b.isFunction(d[f])&&d[f].apply(d,h)})};b.jPlayer=function(d,c){this.options=b.extend({},c);this.element=b(d)};b.jPlayer.getter="jPlayerOnProgressChange jPlayerOnSoundComplete jPlayerVolume jPlayerReady getData jPlayerController";b.jPlayer.defaults={cssPrefix:"jqjp",swfPath:"js",volume:80,oggSupport:false,nativeSupport:true,preload:"none",customCssIds:false,graphicsFix:true,errorAlerts:false,warningAlerts:false,position:"absolute",width:"0",height:"0",top:"0",left:"0",quality:"high",bgcolor:"#ffffff"};b.jPlayer._config={version:"1.2.0",swfVersionRequired:"1.2.0",swfVersion:"unknown",jPlayerControllerId:undefined,delayedCommandId:undefined,isWaitingForPlay:false,isFileSet:false};b.jPlayer._diag={isPlaying:false,src:"",loadPercent:0,playedPercentRelative:0,playedPercentAbsolute:0,playedTime:0,totalTime:0};b.jPlayer._cssId={play:"jplayer_play",pause:"jplayer_pause",stop:"jplayer_stop",loadBar:"jplayer_load_bar",playBar:"jplayer_play_bar",volumeMin:"jplayer_volume_min",volumeMax:"jplayer_volume_max",volumeBar:"jplayer_volume_bar",volumeBarValue:"jplayer_volume_bar_value"};b.jPlayer.count=0;b.jPlayer.timeFormat={showHour:false,showMin:true,showSec:true,padHour:false,padMin:true,padSec:true,sepHour:":",sepMin:":",sepSec:""};b.jPlayer.convertTime=function(e){var c=new Date(e),f=c.getUTCHours();e=c.getUTCMinutes();c=c.getUTCSeconds();f=b.jPlayer.timeFormat.padHour&&f<10?"0"+f:f;e=b.jPlayer.timeFormat.padMin&&e<10?"0"+e:e;c=b.jPlayer.timeFormat.padSec&&c<10?"0"+c:c;return(b.jPlayer.timeFormat.showHour?f+b.jPlayer.timeFormat.sepHour:"")+(b.jPlayer.timeFormat.showMin?e+b.jPlayer.timeFormat.sepMin:"")+(b.jPlayer.timeFormat.showSec?c+b.jPlayer.timeFormat.sepSec:"")};b.jPlayer.prototype={_init:function(){var f=this,c=this.element;this.config=b.extend({},b.jPlayer.defaults,this.options,b.jPlayer._config);this.config.diag=b.extend({},b.jPlayer._diag);this.config.cssId={};this.config.cssSelector={};this.config.cssDisplay={};this.config.clickHandler={};this.element.data("jPlayer.config",this.config);b.extend(this.config,{id:this.element.attr("id"),swf:this.config.swfPath+(this.config.swfPath!=""&&this.config.swfPath.slice(-1)!="/"?"/":"")+"Jplayer.swf",fid:this.config.cssPrefix+"_flash_"+b.jPlayer.count,aid:this.config.cssPrefix+"_audio_"+b.jPlayer.count,hid:this.config.cssPrefix+"_force_"+b.jPlayer.count,i:b.jPlayer.count,volume:this._limitValue(this.config.volume,0,100),autobuffer:this.config.preload!="none"});b.jPlayer.count++;if(this.config.ready!=undefined){if(b.isFunction(this.config.ready)){this.jPlayerReadyCustom=this.config.ready}else{this._warning("Constructor's ready option is not a function.")}}this.config.audio=document.createElement("audio");this.config.audio.id=this.config.aid;b.extend(this.config,{canPlayMP3:!!(this.config.audio.canPlayType?""!=this.config.audio.canPlayType("audio/mpeg")&&"no"!=this.config.audio.canPlayType("audio/mpeg"):false),canPlayOGG:!!(this.config.audio.canPlayType?""!=this.config.audio.canPlayType("audio/ogg")&&"no"!=this.config.audio.canPlayType("audio/ogg"):false),aSel:b("#"+this.config.aid)});b.extend(this.config,{html5:!!(this.config.oggSupport?this.config.canPlayOGG?true:this.config.canPlayMP3:this.config.canPlayMP3)});b.extend(this.config,{usingFlash:!(this.config.html5&&this.config.nativeSupport),usingMP3:!(this.config.oggSupport&&this.config.canPlayOGG&&this.config.nativeSupport)});var l={setButtons:function(d,e){f.config.diag.isPlaying=e;if(f.config.cssId.play!=undefined&&f.config.cssId.pause!=undefined){if(e){f.config.cssSelector.play.css("display","none");f.config.cssSelector.pause.css("display",f.config.cssDisplay.pause)}else{f.config.cssSelector.play.css("display",f.config.cssDisplay.play);f.config.cssSelector.pause.css("display","none")}}if(e){f.config.isWaitingForPlay=false}}},k={setFile:function(e,h){try{f._getMovie().fl_setFile_mp3(h);f.config.autobuffer&&c.trigger("jPlayer.load");f.config.diag.src=h;f.config.isFileSet=true;c.trigger("jPlayer.setButtons",false)}catch(d){f._flashError(d)}},clearFile:function(){try{c.trigger("jPlayer.setButtons",false);f._getMovie().fl_clearFile_mp3();f.config.diag.src="";f.config.isFileSet=false}catch(d){f._flashError(d)}},load:function(){try{f._getMovie().fl_load_mp3()}catch(d){f._flashError(d)}},play:function(){try{f._getMovie().fl_play_mp3()&&c.trigger("jPlayer.setButtons",true)}catch(d){f._flashError(d)}},pause:function(){try{f._getMovie().fl_pause_mp3()&&c.trigger("jPlayer.setButtons",false)}catch(d){f._flashError(d)}},stop:function(){try{f._getMovie().fl_stop_mp3()&&c.trigger("jPlayer.setButtons",false)}catch(d){f._flashError(d)}},playHead:function(e,h){try{f._getMovie().fl_play_head_mp3(h)&&c.trigger("jPlayer.setButtons",true)}catch(d){f._flashError(d)}},playHeadTime:function(e,h){try{f._getMovie().fl_play_head_time_mp3(h)&&c.trigger("jPlayer.setButtons",true)}catch(d){f._flashError(d)}},volume:function(e,h){f.config.volume=h;try{f._getMovie().fl_volume_mp3(h)}catch(d){f._flashError(d)}}},j={setFile:function(e,h,d){f.config.diag.src=f.config.usingMP3?h:d;f.config.isFileSet&&!f.config.isWaitingForPlay&&c.trigger("jPlayer.pause");f.config.audio.autobuffer=f.config.autobuffer;f.config.audio.preload=f.config.preload;if(f.config.autobuffer){f.config.audio.src=f.config.diag.src;f.config.audio.load()}else{f.config.isWaitingForPlay=true}f.config.isFileSet=true;f.jPlayerOnProgressChange(0,0,0,0,0);clearInterval(f.config.jPlayerControllerId);if(f.config.autobuffer){f.config.jPlayerControllerId=window.setInterval(function(){f.jPlayerController(false)},100)}clearInterval(f.config.delayedCommandId)},clearFile:function(){f.setFile("","");f.config.isWaitingForPlay=false;f.config.isFileSet=false},load:function(){if(f.config.isFileSet){if(f.config.isWaitingForPlay){f.config.audio.autobuffer=true;f.config.audio.preload="auto";f.config.audio.src=f.config.diag.src;f.config.audio.load();f.config.isWaitingForPlay=false;clearInterval(f.config.jPlayerControllerId);f.config.jPlayerControllerId=window.setInterval(function(){f.jPlayerController(false)},100)}}},play:function(){if(f.config.isFileSet){if(f.config.isWaitingForPlay){f.config.audio.src=f.config.diag.src;f.config.audio.load()}f.config.audio.play();c.trigger("jPlayer.setButtons",true);clearInterval(f.config.jPlayerControllerId);f.config.jPlayerControllerId=window.setInterval(function(){f.jPlayerController(false)},100);clearInterval(f.config.delayedCommandId)}},pause:function(){if(f.config.isFileSet){f.config.audio.pause();c.trigger("jPlayer.setButtons",false);clearInterval(f.config.delayedCommandId)}},stop:function(){if(f.config.isFileSet){try{c.trigger("jPlayer.pause");f.config.audio.currentTime=0;clearInterval(f.config.jPlayerControllerId);f.config.jPlayerControllerId=window.setInterval(function(){f.jPlayerController(true)},100)}catch(d){clearInterval(f.config.delayedCommandId);f.config.delayedCommandId=window.setTimeout(function(){f.stop()},100)}}},playHead:function(e,h){if(f.config.isFileSet){try{c.trigger("jPlayer.load");if(typeof f.config.audio.buffered=="object"&&f.config.audio.buffered.length>0){f.config.audio.currentTime=h*f.config.audio.buffered.end(f.config.audio.buffered.length-1)/100}else{if(f.config.audio.duration>0&&!isNaN(f.config.audio.duration)){f.config.audio.currentTime=h*f.config.audio.duration/100}else{throw"e"}}c.trigger("jPlayer.play")}catch(d){c.trigger("jPlayer.play");c.trigger("jPlayer.pause");f.config.delayedCommandId=window.setTimeout(function(){f.playHead(h)},100)}}},playHeadTime:function(e,h){if(f.config.isFileSet){try{c.trigger("jPlayer.load");f.config.audio.currentTime=h/1000;c.trigger("jPlayer.play")}catch(d){c.trigger("jPlayer.play");c.trigger("jPlayer.pause");f.config.delayedCommandId=window.setTimeout(function(){f.playHeadTime(h)},100)}}},volume:function(d,e){f.config.volume=e;f.config.audio.volume=e/100;f.jPlayerVolume(e)}};this.config.usingFlash?b.extend(l,k):b.extend(l,j);for(var g in l){k="jPlayer."+g;this.element.unbind(k);this.element.bind(k,l[g])}if(this.config.usingFlash){if(this._checkForFlash(8)){if(b.browser.msie){g='<object id="'+this.config.fid+'"';g+=' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"';g+=' codebase="'+document.URL.substring(0,document.URL.indexOf(":"))+'://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"';g+=' type="application/x-shockwave-flash"';g+=' width="'+this.config.width+'" height="'+this.config.height+'">';g+="</object>";l=[];l[0]='<param name="movie" value="'+this.config.swf+'" />';l[1]='<param name="quality" value="high" />';l[2]='<param name="FlashVars" value="id='+escape(this.config.id)+"&fid="+escape(this.config.fid)+"&vol="+this.config.volume+'" />';l[3]='<param name="allowScriptAccess" value="always" />';l[4]='<param name="bgcolor" value="'+this.config.bgcolor+'" />';g=document.createElement(g);for(k=0;k<l.length;k++){g.appendChild(document.createElement(l[k]))}this.element.html(g)}else{l='<embed name="'+this.config.fid+'" id="'+this.config.fid+'" src="'+this.config.swf+'"';l+=' width="'+this.config.width+'" height="'+this.config.height+'" bgcolor="'+this.config.bgcolor+'"';l+=' quality="high" FlashVars="id='+escape(this.config.id)+"&fid="+escape(this.config.fid)+"&vol="+this.config.volume+'"';l+=' allowScriptAccess="always"';l+=' type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />';this.element.html(l)}}else{this.element.html("<p>Flash 8 or above is not installed. <a href='http://get.adobe.com/flashplayer'>Get Flash!</a></p>")}}else{this.config.audio.autobuffer=this.config.autobuffer;this.config.audio.preload=this.config.preload;this.config.audio.addEventListener("canplay",function(){var d=0.1*Math.random();f.config.audio.volume=(f.config.volume+(f.config.volume<50?d:-d))/100},false);this.config.audio.addEventListener("ended",function(){clearInterval(f.config.jPlayerControllerId);f.jPlayerOnSoundComplete()},false);this.element.append(this.config.audio)}this.element.css({position:this.config.position,top:this.config.top,left:this.config.left});if(this.config.graphicsFix){this.element.append('<div id="'+this.config.hid+'"></div>');b.extend(this.config,{hSel:b("#"+this.config.hid)});this.config.hSel.css({"text-indent":"-9999px"})}this.config.customCssIds||b.each(b.jPlayer._cssId,function(d,e){f.cssId(d,e)});if(!this.config.usingFlash){this.element.css({left:"-9999px"});window.setTimeout(function(){f.volume(f.config.volume);f.jPlayerReady()},100)}},jPlayerReady:function(c){if(this.config.usingFlash){this.config.swfVersion=c;this.config.swfVersionRequired!=this.config.swfVersion&&this._error("jPlayer's JavaScript / SWF version mismatch!\n\nJavaScript requires SWF : "+this.config.swfVersionRequired+"\nThe Jplayer.swf used is : "+this.config.swfVersion)}else{this.config.swfVersion="n/a"}this.jPlayerReadyCustom()},jPlayerReadyCustom:function(){},setFile:function(d,c){this.element.trigger("jPlayer.setFile",[d,c])},clearFile:function(){this.element.trigger("jPlayer.clearFile")},load:function(){this.element.trigger("jPlayer.load")},play:function(){this.element.trigger("jPlayer.play")},pause:function(){this.element.trigger("jPlayer.pause")},stop:function(){this.element.trigger("jPlayer.stop")},playHead:function(c){this.element.trigger("jPlayer.playHead",[c])},playHeadTime:function(c){this.element.trigger("jPlayer.playHeadTime",[c])},volume:function(c){c=this._limitValue(c,0,100);this.element.trigger("jPlayer.volume",[c])},cssId:function(f,c){var h=this;if(typeof c=="string"){if(b.jPlayer._cssId[f]){this.config.cssId[f]!=undefined&&this.config.cssSelector[f].unbind("click",this.config.clickHandler[f]);this.config.cssId[f]=c;this.config.cssSelector[f]=b("#"+c);this.config.clickHandler[f]=function(d){h[f](d);b(this).blur();return false};this.config.cssSelector[f].click(this.config.clickHandler[f]);var g=this.config.cssSelector[f].css("display");if(f=="play"){this.config.cssDisplay.pause=g}if(!(f=="pause"&&g=="none")){this.config.cssDisplay[f]=g;f=="pause"&&this.config.cssSelector[f].css("display","none")}}else{this._warning("Unknown/Illegal function in cssId\n\njPlayer('cssId', '"+f+"', '"+c+"')")}}else{this._warning("cssId CSS Id must be a string\n\njPlayer('cssId', '"+f+"', "+c+")")}},loadBar:function(d){if(this.config.cssId.loadBar!=undefined){var c=this.config.cssSelector.loadBar.offset();d=d.pageX-c.left;c=this.config.cssSelector.loadBar.width();this.playHead(100*d/c)}},playBar:function(c){this.loadBar(c)},onProgressChange:function(c){if(b.isFunction(c)){this.onProgressChangeCustom=c}else{this._warning("onProgressChange parameter is not a function.")}},onProgressChangeCustom:function(){},jPlayerOnProgressChange:function(f,c,j,i,g){this.config.diag.loadPercent=f;this.config.diag.playedPercentRelative=c;this.config.diag.playedPercentAbsolute=j;this.config.diag.playedTime=i;this.config.diag.totalTime=g;this.config.cssId.loadBar!=undefined&&this.config.cssSelector.loadBar.width(f+"%");this.config.cssId.playBar!=undefined&&this.config.cssSelector.playBar.width(c+"%");this.onProgressChangeCustom(f,c,j,i,g);this._forceUpdate()},jPlayerController:function(f){var c=0,l=0,k=0,j=0,g=0;if(this.config.audio.readyState>=1){c=this.config.audio.currentTime*1000;l=this.config.audio.duration*1000;l=isNaN(l)?0:l;k=l>0?100*c/l:0;if(typeof this.config.audio.buffered=="object"&&this.config.audio.buffered.length>0){j=100*this.config.audio.buffered.end(this.config.audio.buffered.length-1)/this.config.audio.duration;g=100*this.config.audio.currentTime/this.config.audio.buffered.end(this.config.audio.buffered.length-1)}else{j=100;g=k}}!this.config.diag.isPlaying&&j>=100&&clearInterval(this.config.jPlayerControllerId);f?this.jPlayerOnProgressChange(j,0,0,0,l):this.jPlayerOnProgressChange(j,g,k,c,l)},volumeMin:function(){this.volume(0)},volumeMax:function(){this.volume(100)},volumeBar:function(d){if(this.config.cssId.volumeBar!=undefined){var c=this.config.cssSelector.volumeBar.offset();d=d.pageX-c.left;c=this.config.cssSelector.volumeBar.width();this.volume(100*d/c)}},volumeBarValue:function(c){this.volumeBar(c)},jPlayerVolume:function(c){if(this.config.cssId.volumeBarValue!=null){this.config.cssSelector.volumeBarValue.width(c+"%");this._forceUpdate()}},onSoundComplete:function(c){if(b.isFunction(c)){this.onSoundCompleteCustom=c}else{this._warning("onSoundComplete parameter is not a function.")}},onSoundCompleteCustom:function(){},jPlayerOnSoundComplete:function(){this.element.trigger("jPlayer.setButtons",false);this.onSoundCompleteCustom()},getData:function(f){for(var c=f.split("."),h=this.config,g=0;g<c.length;g++){if(h[c[g]]!=undefined){h=h[c[g]]}else{this._warning("Undefined data requested.\n\njPlayer('getData', '"+f+"')");return}}return h},_getMovie:function(){return document[this.config.fid]},_checkForFlash:function(f){var c=false,h;if(window.ActiveXObject){try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+f);c=true}catch(g){}}else{if(navigator.plugins&&navigator.mimeTypes.length>0){if(h=navigator.plugins["Shockwave Flash"]){if(navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")>=f){c=true}}}}return c},_forceUpdate:function(){this.config.graphicsFix&&this.config.hSel.text(""+Math.random())},_limitValue:function(e,c,f){return e<c?c:e>f?f:e},_flashError:function(c){this._error("Problem with Flash component.\n\nCheck the swfPath points at the Jplayer.swf path.\n\nswfPath = "+this.config.swfPath+"\nurl: "+this.config.swf+"\n\nError: "+c.message)},_error:function(c){this.config.errorAlerts&&this._alert("Error!\n\n"+c)},_warning:function(c){this.config.warningAlerts&&this._alert("Warning!\n\n"+c)},_alert:function(c){alert("jPlayer "+this.config.version+" : id='"+this.config.id+"' : "+c)}}})(jQuery);"use strict";(function(a){a.vakata={};a.vakata.css={get_css:function(f,c,d){f=f.toLowerCase();var e=d.cssRules||d.rules,b=0;do{if(e.length&&b>e.length+5){return false}if(e[b].selectorText&&e[b].selectorText.toLowerCase()==f){if(c===true){if(d.removeRule){d.removeRule(b)}if(d.deleteRule){d.deleteRule(b)}return true}else{return e[b]}}}while(e[++b]);return false},add_css:function(c,b){if(a.jstree.css.get_css(c,false,b)){return false}if(b.insertRule){b.insertRule(c+" { }",0)}else{b.addRule(c,null,0)}return a.vakata.css.get_css(c)},remove_css:function(c,b){return a.vakata.css.get_css(c,true,b)},add_sheet:function(c){var b;if(c.str){b=document.createElement("style");b.setAttribute("type","text/css");if(b.styleSheet){document.getElementsByTagName("head")[0].appendChild(b);b.styleSheet.cssText=c.str}else{b.appendChild(document.createTextNode(c.str));document.getElementsByTagName("head")[0].appendChild(b)}return b.sheet||b.styleSheet}if(c.url){if(document.createStyleSheet){try{b=document.createStyleSheet(c.url)}catch(d){}}else{b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.media="all";b.href=c.url;document.getElementsByTagName("head")[0].appendChild(b);return b.styleSheet}}}}})(jQuery);(function(e){var f=[],c=-1,b={},a={},d=false;e.fn.jstree=function(j){var g=(typeof j=="string"),h=Array.prototype.slice.call(arguments,1),i=this;if(!g&&e.meta){h.push(e.metadata.get(this).jstree)}j=!g&&h.length?e.extend.apply(null,[true,j].concat(h)):j;if(g&&j.substring(0,1)=="_"){return i}if(g){this.each(function(){var k=f[e.data(this,"jstree-instance-id")],l=(k&&e.isFunction(k[j]))?k[j].apply(k,h):k;if(typeof l!=="undefined"&&(j.indexOf("is_"===0)||(l!==true&&l!==false))){i=l;return false}})}else{this.each(function(){var l=e.data(this,"jstree-instance-id"),k=false;if(typeof l!=="undefined"&&f[l]){f[l].destroy()}l=parseInt(f.push({}),10)-1;e.data(this,"jstree-instance-id",l);if(!j){j={}}j.plugins=e.isArray(j.plugins)?j.plugins:e.jstree.defaults.plugins;if(e.inArray("core",j.plugins)===-1){j.plugins.unshift("core")}k=e.extend(true,{},e.jstree.defaults,j);k.plugins=j.plugins;e.each(b,function(m,n){if(e.inArray(m,k.plugins)===-1){k[m]=null;delete k[m]}});f[l]=new e.jstree._instance(l,e(this).addClass("jstree jstree-"+l),k);e.each(f[l]._get_settings().plugins,function(m,n){f[l].data[n]={}});e.each(f[l]._get_settings().plugins,function(m,n){if(b[n]){b[n].__init.apply(f[l])}});f[l].init()})}return i};e.jstree={defaults:{plugins:[]},_focused:function(){return f[c]||null},_reference:function(g){if(f[g]){return f[g]}var h=e(g);if(!h.length&&typeof g==="string"){h=e("#"+g)}if(!h.length){return null}return f[h.closest(".jstree").data("jstree-instance-id")]||null},_instance:function(h,g,i){this.data={core:{}};this.get_settings=function(){return e.extend(true,{},i)};this._get_settings=function(){return i};this.get_index=function(){return h};this.get_container=function(){return g};this._set_settings=function(j){i=e.extend(true,{},i,j)}},_fn:{},plugin:function(g,h){h=e.extend({},{__init:e.noop,__destroy:e.noop,_fn:{},defaults:false},h);b[g]=h;e.jstree.defaults[g]=h.defaults;e.each(h._fn,function(j,k){k.plugin=g;k.old=e.jstree._fn[j];e.jstree._fn[j]=function(){var i,m=k,l=Array.prototype.slice.call(arguments),o=new e.Event("before.jstree"),n=false;do{if(m&&m.plugin&&e.inArray(m.plugin,this._get_settings().plugins)!==-1){break}m=m.old}while(m);if(!m){return}i=this.get_container().triggerHandler(o,{func:j,inst:this,args:l});if(i===false){return}if(typeof i!=="undefined"){l=i}if(j.indexOf("_")===0){i=m.apply(this,l)}else{i=m.apply(e.extend({},this,{__callback:function(p){this.get_container().triggerHandler(j+".jstree",{inst:this,args:l,rslt:p,rlbk:n})},__rollback:function(){n=this.get_rollback();return n},__call_old:function(p){return m.old.apply(this,(p?Array.prototype.slice.call(arguments,1):l))}}),l)}return i};e.jstree._fn[j].old=k.old;e.jstree._fn[j].plugin=g})},rollback:function(g){if(g){if(!e.isArray(g)){g=[g]}e.each(g,function(h,j){f[j.i].set_rollback(j.h,j.d)})}}};e.jstree._fn=e.jstree._instance.prototype={};e(function(){var i=navigator.userAgent.toLowerCase(),h=(i.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],g=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";if(/msie/.test(i)&&parseInt(h,10)==6){d=true;g+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}if(/msie/.test(i)&&parseInt(h,10)==7){g+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "}e.vakata.css.add_sheet({str:g})});e.jstree.plugin("core",{__init:function(){this.data.core.to_open=e.map(e.makeArray(this.get_settings().core.initially_open),function(g){return"#"+g.toString().replace(/^#/,"").replace("\\/","/").replace("/","\\/")})},defaults:{html_titles:false,animation:500,initially_open:[],rtl:false,strings:{loading:"Loading ...",new_node:"New node"}},_fn:{init:function(){this.set_focus();if(this._get_settings().core.rtl){this.get_container().addClass("jstree-rtl").css("direction","rtl")}this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_settings().core.strings.loading+"</a></li></ul>");this.data.core.li_height=this.get_container().find("ul li.jstree-closed, ul li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",e.proxy(function(h){var g=e(h.target);if(g.is("ins")&&h.pageY-g.offset().top<this.data.core.li_height){this.toggle_node(g)}},this)).bind("mousedown.jstree",e.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(h){var i;if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){i=window.getSelection();try{i.removeAllRanges();i.collapse()}catch(g){}}}});this.__callback();this.load_node(-1,function(){this.loaded();this.reopen()})},destroy:function(){var g,k=this.get_index(),h=this._get_settings(),j=this;e.each(h.plugins,function(l,n){try{b[n].__destroy.apply(j)}catch(m){}});this.__callback();if(this.is_focused()){for(g in f){if(f.hasOwnProperty(g)&&g!=k){f[g].set_focus();break}}}if(k===c){c=-1}this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree-instance-id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});f[k]=null;delete f[k]},save_opened:function(){var g=this;this.data.core.to_open=[];this.get_container().find(".jstree-open").each(function(){g.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace("\\/","/").replace("/","\\/"))});this.__callback(g.data.core.to_open)},reopen:function(h){var k=this,g=true,j=[],i=[];if(!h){this.data.core.reopen=false;this.data.core.refreshing=true}if(this.data.core.to_open.length){e.each(this.data.core.to_open,function(l,m){if(m=="#"){return true}if(e(m).length&&e(m).is(".jstree-closed")){j.push(m)}else{i.push(m)}});if(j.length){this.data.core.to_open=i;e.each(j,function(l,m){k.open_node(m,function(){k.reopen(true)},true)});g=false}}if(g){if(this.data.core.reopen){clearTimeout(this.data.core.reopen)}this.data.core.reopen=setTimeout(function(){k.__callback({},k)},50);this.data.core.refreshing=false}},refresh:function(g){var h=this;this.save_opened();if(!g){g=-1}g=this._get_node(g);if(!g){g=-1}if(g!==-1){g.children("UL").remove()}this.load_node(g,function(){h.__callback({obj:g});h.reopen()})},loaded:function(){this.__callback()},set_focus:function(){var g=e.jstree._focused();if(g&&g!==this){g.get_container().removeClass("jstree-focused")}if(g!==this){this.get_container().addClass("jstree-focused");c=this.get_index()}this.__callback()},is_focused:function(){return c==this.get_index()},_get_node:function(g){var h=e(g,this.get_container());if(h.is(".jstree")||g==-1){return -1}h=h.closest("li",this.get_container());return h.length?h:false},_get_next:function(h,g){h=this._get_node(h);if(h===-1){return this.get_container().find("> ul > li:first-child")}if(!h.length){return false}if(g){return(h.nextAll("li").size()>0)?h.nextAll("li:eq(0)"):false}if(h.hasClass("jstree-open")){return h.find("li:eq(0)")}else{if(h.nextAll("li").size()>0){return h.nextAll("li:eq(0)")}else{return h.parentsUntil(".jstree","li").next("li").eq(0)}}},_get_prev:function(h,g){h=this._get_node(h);if(h===-1){return this.get_container().find("> ul > li:last-child")}if(!h.length){return false}if(g){return(h.prevAll("li").length>0)?h.prevAll("li:eq(0)"):false}if(h.prev("li").length){h=h.prev("li").eq(0);while(h.hasClass("jstree-open")){h=h.children("ul:eq(0)").children("li:last")}return h}else{var i=h.parentsUntil(".jstree","li:eq(0)");return i.length?i:false}},_get_parent:function(g){g=this._get_node(g);if(g==-1||!g.length){return false}var h=g.parentsUntil(".jstree","li:eq(0)");return h.length?h:-1},_get_children:function(g){g=this._get_node(g);if(g===-1){return this.get_container().children("ul:eq(0)").children("li")}if(!g.length){return false}return g.children("ul:eq(0)").children("li")},get_path:function(i,g){var h=[],j=this;i=this._get_node(i);if(i===-1||!i||!i.length){return false}i.parentsUntil(".jstree","li").each(function(){h.push(g?this.id:j.get_text(this))});h.reverse();h.push(g?i.attr("id"):this.get_text(i));return h},is_open:function(g){g=this._get_node(g);return g&&g!==-1&&g.hasClass("jstree-open")},is_closed:function(g){g=this._get_node(g);return g&&g!==-1&&g.hasClass("jstree-closed")},is_leaf:function(g){g=this._get_node(g);return g&&g!==-1&&g.hasClass("jstree-leaf")},open_node:function(j,k,h){j=this._get_node(j);if(!j.length){return false}if(!j.hasClass("jstree-closed")){if(k){k.call()}return false}var i=h||d?0:this._get_settings().core.animation,g=this;if(!this._is_loaded(j)){j.children("a").addClass("jstree-loading");this.load_node(j,function(){g.open_node(j,k,h)},k)}else{if(i){j.children("ul").css("display","none")}j.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading");if(i){j.children("ul").stop(true).slideDown(i,function(){this.style.display=""})}this.__callback({obj:j});if(k){k.call()}}},close_node:function(i,g){i=this._get_node(i);var h=g||d?0:this._get_settings().core.animation;if(!i.length||!i.hasClass("jstree-open")){return false}if(h){i.children("ul").attr("style","display:block !important")}i.removeClass("jstree-open").addClass("jstree-closed");if(h){i.children("ul").stop(true).slideUp(h,function(){this.style.display=""})}this.__callback({obj:i})},toggle_node:function(g){g=this._get_node(g);if(g.hasClass("jstree-closed")){return this.open_node(g)}if(g.hasClass("jstree-open")){return this.close_node(g)}},open_all:function(h,g){h=h?this._get_node(h):this.get_container();if(!h||h===-1){h=this.get_container()}if(g){h=h.find("li.jstree-closed")}else{g=h;if(h.is(".jstree-closed")){h=h.find("li.jstree-closed").andSelf()}else{h=h.find("li.jstree-closed")}}var i=this;h.each(function(){var j=this;if(!i._is_loaded(this)){i.open_node(this,function(){i.open_all(j,g)},true)}else{i.open_node(this,false,true)}});if(g.find("li.jstree-closed").length===0){this.__callback({obj:g})}},close_all:function(g){var h=this;g=g?this._get_node(g):this.get_container();if(!g||g===-1){g=this.get_container()}g.find("li.jstree-open").andSelf().each(function(){h.close_node(this)});this.__callback({obj:g})},clean_node:function(g){g=g&&g!=-1?e(g):this.get_container();g=g.is("li")?g.find("li").andSelf():g.find("li");g.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");g.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:g})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(true),d:this.data}},set_rollback:function(g,h){this.get_container().empty().append(g);this.data=h;this.__callback()},load_node:function(i,g,h){this.__callback({obj:i})},_is_loaded:function(g){return true},create_node:function(l,g,k,n,h){l=this._get_node(l);g=typeof g==="undefined"?"last":g;var m=e("<li>"),j=this._get_settings().core,i;if(l!==-1&&!l.length){return false}if(!h&&!this._is_loaded(l)){this.load_node(l,function(){this.create_node(l,g,k,n,true)});return false}this.__rollback();if(typeof k==="string"){k={data:k}}if(!k){k={}}if(k.attr){m.attr(k.attr)}if(k.state){m.addClass("jstree-"+k.state)}if(!k.data){k.data=j.strings.new_node}if(!e.isArray(k.data)){i=k.data;k.data=[];k.data.push(i)}e.each(k.data,function(p,o){i=e("<a>");if(e.isFunction(o)){o=o.call(this,k)}if(typeof o=="string"){i.attr("href","#")[j.html_titles?"html":"text"](o)}else{if(!o.attr){o.attr={}}if(!o.attr.href){o.attr.href="#"}i.attr(o.attr)[j.html_titles?"html":"text"](o.title);if(o.language){i.addClass(o.language)}}i.prepend("<ins class='jstree-icon'>&#160;</ins>");if(o.icon){if(o.icon.indexOf("/")===-1){i.children("ins").addClass(o.icon)}else{i.children("ins").css("background","url('"+o.icon+"') center center no-repeat")}}m.append(i)});m.prepend("<ins class='jstree-icon'>&#160;</ins>");if(l===-1){l=this.get_container();if(g==="before"){g="first"}if(g==="after"){g="last"}}switch(g){case"before":l.before(m);i=this._get_parent(l);break;case"after":l.after(m);i=this._get_parent(l);break;case"inside":case"first":if(!l.children("ul").length){l.append("<ul>")}l.children("ul").prepend(m);i=l;break;case"last":if(!l.children("ul").length){l.append("<ul>")}l.children("ul").append(m);i=l;break;default:if(!l.children("ul").length){l.append("<ul>")}if(!g){g=0}i=l.children("ul").children("li").eq(g);if(i.length){i.before(m)}else{l.children("ul").append(m)}i=l;break}if(i===-1||i.get(0)===this.get_container().get(0)){i=-1}this.clean_node(i);this.__callback({obj:m,parent:i});if(n){n.call(this,m)}return m},get_text:function(h){h=this._get_node(h);if(!h.length){return false}var g=this._get_settings().core.html_titles;h=h.children("a:eq(0)");if(g){h=h.clone();h.children("INS").remove();return h.html()}else{h=h.contents().filter(function(){return this.nodeType==3})[0];return h.nodeValue}},set_text:function(h,i){h=this._get_node(h);if(!h.length){return false}h=h.children("a:eq(0)");if(this._get_settings().core.html_titles){var g=h.children("INS").clone();h.html(i).prepend(g);this.__callback({obj:h,name:i});return true}else{h=h.contents().filter(function(){return this.nodeType==3})[0];this.__callback({obj:h,name:i});return(h.nodeValue=i)}},rename_node:function(g,h){g=this._get_node(g);this.__rollback();if(g&&g.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))){this.__callback({obj:g,name:h})}},delete_node:function(i){i=this._get_node(i);if(!i.length){return false}this.__rollback();var h=this._get_parent(i),g=this._get_prev(i);i=i.remove();if(h!==-1&&h.find("> ul > li").length===0){h.removeClass("jstree-open jstree-closed").addClass("jstree-leaf")}this.clean_node(h);this.__callback({obj:i,prev:g});return i},prepare_move:function(k,i,l,g,h){var j={};j.ot=e.jstree._reference(j.o)||this;j.o=j.ot._get_node(k);j.r=i===-1?-1:this._get_node(i);j.p=(typeof j==="undefined")?"last":l;if(!h&&a.o&&a.o[0]===j.o[0]&&a.r[0]===j.r[0]&&a.p===j.p){this.__callback(a);if(g){g.call(this,a)}return}j.ot=e.jstree._reference(j.o)||this;j.rt=i===-1?j.ot:e.jstree._reference(j.r)||this;if(j.r===-1){j.cr=-1;switch(j.p){case"first":case"before":case"inside":j.cp=0;break;case"after":case"last":j.cp=j.rt.get_container().find(" > ul > li").length;break;default:j.cp=j.p;break}}else{if(!/^(before|after)$/.test(j.p)&&!this._is_loaded(j.r)){return this.load_node(j.r,function(){this.prepare_move(k,i,l,g,true)})}switch(j.p){case"before":j.cp=j.r.index();j.cr=j.rt._get_parent(j.r);break;case"after":j.cp=j.r.index()+1;j.cr=j.rt._get_parent(j.r);break;case"inside":case"first":j.cp=0;j.cr=j.r;break;case"last":j.cp=j.r.find(" > ul > li").length;j.cr=j.r;break;default:j.cp=j.p;j.cr=j.r;break}}j.np=j.cr==-1?j.rt.get_container():j.cr;j.op=j.ot._get_parent(j.o);j.or=j.np.find(" > ul > li:nth-child("+(j.cp+1)+")");a=j;this.__callback(a);if(g){g.call(this,a)}},check_move:function(){var h=a,g=true;if(h.or[0]===h.o[0]){return false}h.o.each(function(){if(h.r.parentsUntil(".jstree").andSelf().filter("li").index(this)!==-1){g=false;return false}});return g},move_node:function(m,j,g,i,h,l){if(!h){return this.prepare_move(m,j,g,function(o){this.move_node(o,false,false,i,true,l)})}if(!l&&!this.check_move()){return false}this.__rollback();var n=false;if(i){n=m.o.clone();n.find("*[id]").andSelf().each(function(){if(this.id){this.id="copy_"+this.id}})}else{n=m.o}if(m.or.length){m.or.before(n)}else{if(!m.np.children("ul").length){e("<ul>").appendTo(m.np)}m.np.children("ul:eq(0)").append(n)}try{m.ot.clean_node(m.op);m.rt.clean_node(m.np);if(!m.op.find("> ul > li").length){m.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}}catch(k){}if(i){a.cy=true;a.oc=n}this.__callback(a);return a},_get_move:function(){return a}}})})(jQuery);(function(a){a.jstree.plugin("ui",{__init:function(){this.data.ui.selected=a();this.data.ui.last_selected=false;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",a.proxy(function(b){b.preventDefault();this.select_node(b.currentTarget,true,b)},this)).delegate("a","mouseenter.jstree",a.proxy(function(b){this.hover_node(b.target)},this)).delegate("a","mouseleave.jstree",a.proxy(function(b){this.dehover_node(b.target)},this)).bind("reopen.jstree",a.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",a.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",a.proxy(function(){this.reselect()},this)).bind("close_node.jstree",a.proxy(function(c,d){var b=this._get_settings().ui,e=this._get_node(d.rslt.obj),f=(e&&e.length)?e.children("ul").find(".jstree-clicked"):a(),g=this;if(b.selected_parent_close===false||!f.length){return}f.each(function(){g.deselect_node(this);if(b.selected_parent_close==="select_parent"){g.select_node(e)}})},this)).bind("delete_node.jstree",a.proxy(function(c,d){var b=this._get_settings().ui.select_prev_on_delete,e=this._get_node(d.rslt.obj),f=(e&&e.length)?e.find(".jstree-clicked"):[],g=this;f.each(function(){g.deselect_node(this)});if(b&&f.length){this.select_node(d.rslt.prev)}},this)).bind("move_node.jstree",a.proxy(function(b,c){if(c.rslt.cy){c.rslt.oc.find(".jstree-clicked").removeClass("jstree-clicked")}},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",selected_parent_close:"select_parent",select_prev_on_delete:true,disable_selecting_children:false,initially_select:[]},_fn:{_get_node:function(b,c){if(typeof b==="undefined"||b===null){return c?this.data.ui.selected:this.data.ui.last_selected}var d=a(b,this.get_container());if(d.is(".jstree")||b==-1){return -1}d=d.closest("li",this.get_container());return d.length?d:false},save_selected:function(){var b=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){b.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace("\\/","/").replace("/","\\/"))});this.__callback(this.data.ui.to_select)},reselect:function(){var c=this,b=this.data.ui.to_select;b=a.map(a.makeArray(b),function(d){return"#"+d.toString().replace(/^#/,"").replace("\\/","/").replace("/","\\/")});this.deselect_all();a.each(b,function(d,e){if(e&&e!=="#"){c.select_node(e)}});this.__callback()},refresh:function(b){this.save_selected();return this.__call_old()},hover_node:function(b){b=this._get_node(b);if(!b.length){return false}if(!b.hasClass("jstree-hovered")){this.dehover_node()}this.data.ui.hovered=b.children("a").addClass("jstree-hovered").parent();this.__callback({obj:b})},dehover_node:function(){var c=this.data.ui.hovered,b;if(!c||!c.length){return false}b=c.children("a").removeClass("jstree-hovered").parent();if(this.data.ui.hovered[0]===b[0]){this.data.ui.hovered=null}this.__callback({obj:c})},select_node:function(h,b,g){h=this._get_node(h);if(h==-1||!h||!h.length){return false}var d=this._get_settings().ui,c=(d.select_multiple_modifier=="on"||(d.select_multiple_modifier!==false&&g&&g[d.select_multiple_modifier+"Key"])),i=this.is_selected(h),f=true;if(b){if(d.disable_selecting_children&&c&&h.parents("li",this.get_container()).children(".jstree-clicked").length){return false}f=false;switch(!0){case (i&&!c):this.deselect_all();i=false;f=true;break;case (!i&&!c):if(d.select_limit==-1||d.select_limit>0){this.deselect_all();f=true}break;case (i&&c):this.deselect_node(h);break;case (!i&&c):if(d.select_limit==-1||this.data.ui.selected.length+1<=d.select_limit){f=true}break}}if(f&&!i){h.children("a").addClass("jstree-clicked");this.data.ui.selected=this.data.ui.selected.add(h);this.data.ui.last_selected=h;this.__callback({obj:h})}},deselect_node:function(b){b=this._get_node(b);if(!b.length){return false}if(this.is_selected(b)){b.children("a").removeClass("jstree-clicked");this.data.ui.selected=this.data.ui.selected.not(b);if(this.data.ui.last_selected.get(0)===b.get(0)){this.data.ui.last_selected=this.data.ui.selected.eq(0)}this.__callback({obj:b})}},toggle_select:function(b){b=this._get_node(b);if(!b.length){return false}if(this.is_selected(b)){this.deselect_node(b)}else{this.select_node(b)}},is_selected:function(b){return this.data.ui.selected.index(this._get_node(b))>=0},get_selected:function(b){return b?a(b).find(".jstree-clicked").parent():this.data.ui.selected},deselect_all:function(b){if(b){a(b).find(".jstree-clicked").removeClass("jstree-clicked")}else{this.get_container().find(".jstree-clicked").removeClass("jstree-clicked")}this.data.ui.selected=a([]);this.data.ui.last_selected=false;this.__callback()}}});a.jstree.defaults.plugins.push("ui")})(jQuery);(function(a){a.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",a.proxy(function(d,c){if(this._get_settings().crrm.move.open_onmove){var b=this;c.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){b.open_node(this,false,true)})}},this))},defaults:{input_width_limit:200,move:{always_copy:false,open_onmove:true,default_position:"last",check_move:function(b){return true}}},_fn:{_show_input:function(b,i){b=this._get_node(b);var g=this._get_settings().core.rtl,h=this._get_settings().crrm.input_width_limit,d=b.children("ins").width(),c=b.find("> a:visible > ins").width()*b.find("> a:visible > ins").length,j=this.get_text(b),f=a("<div>",{css:{position:"absolute",top:"-200px",left:(g?"0px":"-1000px"),visibility:"hidden"}}).appendTo("body"),e=b.css("position","relative").append(a("<input>",{value:j,css:{padding:"0",border:"1px solid silver",position:"absolute",left:(g?"auto":(d+c+4)+"px"),right:(g?(d+c+4)+"px":"auto"),top:"0px",height:(this.data.core.li_height-2)+"px",lineHeight:(this.data.core.li_height-2)+"px",width:"150px"},blur:a.proxy(function(){var l=b.children("input"),k=l.val();if(k===""){k=j}l.remove();this.set_text(b,j);this.rename_node(b,k);i.call(this,b,k,j);b.css("position","")},this),keyup:function(l){var k=l.keyCode||l.which;if(k==27){this.value=j;this.blur();return}else{if(k==13){this.blur();return}else{e.width(Math.min(f.text("pW"+this.value).width(),h))}}}})).children("input");this.set_text(b,"");f.css({fontFamily:e.css("fontFamily")||"",fontSize:e.css("fontSize")||"",fontWeight:e.css("fontWeight")||"",fontStyle:e.css("fontStyle")||"",fontStretch:e.css("fontStretch")||"",fontVariant:e.css("fontVariant")||"",letterSpacing:e.css("letterSpacing")||"",wordSpacing:e.css("wordSpacing")||""});e.width(Math.min(f.text("pW"+e[0].value).width(),h))[0].select()},rename:function(c){c=this._get_node(c);this.__rollback();var b=this.__callback;this._show_input(c,function(f,e,d){b.call(this,{obj:f,new_name:e,old_name:d})})},create:function(f,c,e,h,b){var d,g=this;f=this._get_node(f);if(!f){f=-1}this.__rollback();d=this.create_node(f,c,e,function(i){var j=this._get_parent(i),k=a(i).index();if(h){h.call(this,i)}if(j.length&&j.hasClass("jstree-closed")){this.open_node(j,false,true)}if(!b){this._show_input(i,function(n,m,l){g.__callback({obj:n,name:m,parent:j,position:k})})}else{g.__callback({obj:i,name:this.get_text(i),parent:j,position:k})}});return d},remove:function(b){b=this._get_node(b,true);this.__rollback();this.delete_node(b);this.__callback({obj:b})},check_move:function(){if(!this.__call_old()){return false}var b=this._get_settings().crrm.move;if(!b.check_move.call(this,this._get_move())){return false}return true},move_node:function(h,f,b,d,c,g){var e=this._get_settings().crrm.move;if(!c){if(!b){b=e.default_position}if(b==="inside"&&!e.default_position.match(/^(before|after)$/)){b=e.default_position}return this.__call_old(true,h,f,b,d,false,g)}if(e.always_copy===true||(e.always_copy==="multitree"&&h.rt.get_index()!==h.ot.get_index())){d=true}this.__call_old(true,h,f,b,d,true,g)},cut:function(b){b=this._get_node(b);this.data.crrm.cp_nodes=false;this.data.crrm.ct_nodes=false;if(!b||!b.length){return false}this.data.crrm.ct_nodes=b},copy:function(b){b=this._get_node(b);this.data.crrm.cp_nodes=false;this.data.crrm.ct_nodes=false;if(!b||!b.length){return false}this.data.crrm.cp_nodes=b},paste:function(b){b=this._get_node(b);if(!b||!b.length){return false}if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes){return false}if(this.data.crrm.ct_nodes){this.move_node(this.data.crrm.ct_nodes,b)}if(this.data.crrm.cp_nodes){this.move_node(this.data.crrm.cp_nodes,b,false,true)}this.data.crrm.cp_nodes=false;this.data.crrm.ct_nodes=false}}});a.jstree.defaults.plugins.push("crrm")})(jQuery);(function(a){var b=[];a.jstree._themes=false;a.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",a.proxy(function(){var c=this._get_settings().themes;this.data.themes.dots=c.dots;this.data.themes.icons=c.icons;this.set_theme(c.theme,c.url)},this)).bind("loaded.jstree",a.proxy(function(){if(!this.data.themes.dots){this.hide_dots()}else{this.show_dots()}if(!this.data.themes.icons){this.hide_icons()}else{this.show_icons()}},this))},defaults:{theme:"default",url:false,dots:true,icons:true},_fn:{set_theme:function(d,c){if(!d){return false}if(!c){c=a.jstree._themes+d+"/style.css"}if(a.inArray(c,b)==-1){a.vakata.css.add_sheet({url:c,rel:"jstree"});b.push(c)}if(this.data.themes.theme!=d){this.get_container().removeClass("jstree-"+this.data.themes.theme);this.data.themes.theme=d}this.get_container().addClass("jstree-"+d);if(!this.data.themes.dots){this.hide_dots()}else{this.show_dots()}if(!this.data.themes.icons){this.hide_icons()}else{this.show_icons()}this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=true;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=false;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){if(this.data.themes.dots){this.hide_dots()}else{this.show_dots()}},show_icons:function(){this.data.themes.icons=true;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=false;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){if(this.data.themes.icons){this.hide_icons()}else{this.show_icons()}}}});a(function(){if(a.jstree._themes===false){a("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/)){a.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/";return false}})}if(a.jstree._themes===false){a.jstree._themes="themes/"}});a.jstree.defaults.plugins.push("themes")})(jQuery);(function(c){var b=[];function a(e,g){var h=c.jstree._focused(),d;if(h&&h.data&&h.data.hotkeys&&h.data.hotkeys.enabled){d=h._get_settings().hotkeys[e];if(d){return d.call(h,g)}}}c.jstree.plugin("hotkeys",{__init:function(){if(typeof c.hotkeys==="undefined"){throw"jsTree hotkeys: jQuery hotkeys plugin not included."}if(!this.data.ui){throw"jsTree hotkeys: jsTree UI plugin not included."}c.each(this._get_settings().hotkeys,function(d,e){if(c.inArray(d,b)==-1){c(document).bind("keydown",d,function(f){return a(d,f)});b.push(d)}});this.enable_hotkeys()},defaults:{up:function(){var d=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_prev(d));return false},down:function(){var d=this.data.ui.hovered||this.data.ui.last_selected||-1;this.hover_node(this._get_next(d));return false},left:function(){var d=this.data.ui.hovered||this.data.ui.last_selected;if(d){if(d.hasClass("jstree-open")){this.close_node(d)}else{this.hover_node(this._get_prev(d))}}return false},right:function(){var d=this.data.ui.hovered||this.data.ui.last_selected;if(d&&d.length){if(d.hasClass("jstree-closed")){this.open_node(d)}else{this.hover_node(this._get_next(d))}}return false},space:function(){if(this.data.ui.hovered){this.data.ui.hovered.children("a:eq(0)").click()}return false},"ctrl+space":function(d){d.type="click";if(this.data.ui.hovered){this.data.ui.hovered.children("a:eq(0)").trigger(d)}return false},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=true},disable_hotkeys:function(){this.data.hotkeys.enabled=false}}})})(jQuery);(function(a){a.jstree.plugin("json_data",{defaults:{data:false,ajax:false,correct_state:true,progressive_render:false},_fn:{load_node:function(d,b,c){var e=this;this.load_node_json(d,function(){e.__callback({obj:d});b.call(this)},c)},_is_loaded:function(c){var b=this._get_settings().json_data,e;c=this._get_node(c);if(c&&c!==-1&&b.progressive_render&&!c.is(".jstree-open, .jstree-leaf")&&c.children("ul").children("li").length===0&&c.data("jstree-children")){e=this._parse_json(c.data("jstree-children"));if(e){c.append(e);a.removeData(c,"jstree-children")}this.clean_node(c);return true}return c==-1||!c||!b.ajax||c.is(".jstree-open, .jstree-leaf")||c.children("ul").children("li").size()>0},load_node_json:function(g,b,e){var f=this.get_settings().json_data,i,c=function(){},h=function(){};g=this._get_node(g);if(g&&g!==-1){if(g.data("jstree-is-loading")){return}else{g.data("jstree-is-loading",true)}}switch(!0){case (!f.data&&!f.ajax):throw"Neither data nor ajax settings supplied.";case (!!f.data&&!f.ajax)||(!!f.data&&!!f.ajax&&(!g||g===-1)):if(!g||g==-1){i=this._parse_json(f.data);if(i){this.get_container().children("ul").empty().append(i.children());this.clean_node()}else{if(f.correct_state){this.get_container().children("ul").empty()}}}if(b){b.call(this)}break;case (!f.data&&!!f.ajax)||(!!f.data&&!!f.ajax&&g&&g!==-1):c=function(j,k,l){var d=this.get_settings().json_data.ajax.error;if(d){d.call(this,j,k,l)}if(g!=-1&&g.length){g.children(".jstree-loading").removeClass("jstree-loading");g.data("jstree-is-loading",false);if(k==="success"&&f.correct_state){g.removeClass("jstree-open jstree-closed").addClass("jstree-leaf")}}else{if(k==="success"&&f.correct_state){this.get_container().children("ul").empty()}}if(e){e.call(this)}};h=function(m,k,j){var l=this.get_settings().json_data.ajax.success;if(l){m=l.call(this,m,k,j)||m}if(m===""||(!a.isArray(m)&&!a.isPlainObject(m))){return c.call(this,j,k,"")}m=this._parse_json(m);if(m){if(g===-1||!g){this.get_container().children("ul").empty().append(m.children())}else{g.append(m).children(".jstree-loading").removeClass("jstree-loading");g.data("jstree-is-loading",false)}this.clean_node(g);if(b){b.call(this)}}else{if(g===-1||!g){if(f.correct_state){this.get_container().children("ul").empty();if(b){b.call(this)}}}else{g.children(".jstree-loading").removeClass("jstree-loading");g.data("jstree-is-loading",false);if(f.correct_state){g.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");if(b){b.call(this)}}}}};f.ajax.context=this;f.ajax.error=c;f.ajax.success=h;if(!f.ajax.dataType){f.ajax.dataType="json"}if(a.isFunction(f.ajax.url)){f.ajax.url=f.ajax.url.call(this,g)}if(a.isFunction(f.ajax.data)){f.ajax.data=f.ajax.data.call(this,g)}a.ajax(f.ajax);break}},_parse_json:function(b,m){var h=false,c=this._get_settings(),o=c.json_data,n=c.core.html_titles,f,g,e,l,k;if(!b){return h}if(a.isFunction(b)){b=b.call(this)}if(a.isArray(b)){h=a();if(!b.length){return false}for(g=0,e=b.length;g<e;g++){f=this._parse_json(b[g],true);if(f.length){h=h.add(f)}}}else{if(typeof b=="string"){b={data:b}}if(!b.data&&b.data!==""){return h}h=a("<li>");if(b.attr){h.attr(b.attr)}if(b.metadata){h.data("jstree",b.metadata)}if(b.state){h.addClass("jstree-"+b.state)}if(!a.isArray(b.data)){f=b.data;b.data=[];b.data.push(f)}a.each(b.data,function(j,d){f=a("<a>");if(a.isFunction(d)){d=d.call(this,b)}if(typeof d=="string"){f.attr("href","#")[n?"html":"text"](d)}else{if(!d.attr){d.attr={}}if(!d.attr.href){d.attr.href="#"}f.attr(d.attr)[n?"html":"text"](d.title);if(d.language){f.addClass(d.language)}}f.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!d.icon&&b.icon){d.icon=b.icon}if(d.icon){if(d.icon.indexOf("/")===-1){f.children("ins").addClass(d.icon)}else{f.children("ins").css("background","url('"+d.icon+"') center center no-repeat")}}h.append(f)});h.prepend("<ins class='jstree-icon'>&#160;</ins>");if(b.children){if(o.progressive_render&&b.state!=="open"){h.addClass("jstree-closed").data("jstree-children",b.children)}else{if(a.isFunction(b.children)){b.children=b.children.call(this,b)}if(a.isArray(b.children)&&b.children.length){f=this._parse_json(b.children,true);if(f.length){k=a("<ul>");k.append(f);h.append(k)}}}}}if(!m){l=a("<ul>");l.append(h);h=l}return h},get_json:function(g,d,b,k){var n=[],m=this._get_settings(),h=this,f,e,j,i,l,c;g=this._get_node(g);if(!g||g===-1){g=this.get_container().find("> ul > li")}d=a.isArray(d)?d:["id","class"];if(!k&&this.data.types){d.push(m.types.type_attr)}b=a.isArray(b)?b:[];g.each(function(){j=a(this);f={data:[]};if(d.length){f.attr={}}a.each(d,function(p,o){e=j.attr(o);if(e&&e.length&&e.replace(/jstree[^ ]*|$/ig,"").length){f.attr[o]=e.replace(/jstree[^ ]*|$/ig,"")}});if(j.hasClass("jstree-open")){f.state="open"}if(j.hasClass("jstree-closed")){f.state="closed"}i=j.children("a");i.each(function(){l=a(this);if(b.length||a.inArray("languages",m.plugins)!==-1||l.children("ins").get(0).style.backgroundImage.length||(l.children("ins").get(0).className&&l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length)){c=false;if(a.inArray("languages",m.plugins)!==-1&&a.isArray(m.languages)&&m.languages.length){a.each(m.languages,function(o,p){if(l.hasClass(p)){c=p;return false}})}e={attr:{},title:h.get_text(l,c)};a.each(b,function(o,p){f.attr[p]=(l.attr(p)||"").replace(/jstree[^ ]*|$/ig,"")});a.each(m.languages,function(o,p){if(l.hasClass(p)){e.language=p;return true}});if(l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length){e.icon=l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"")}if(l.children("ins").get(0).style.backgroundImage.length){e.icon=l.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")}}else{e=h.get_text(l)}if(i.length>1){f.data.push(e)}else{f.data=e}});j=j.find("> ul > li");if(j.length){f.children=h.get_json(j,d,b,true)}n.push(f)});return n}}})})(jQuery);(function(a){a.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(d){var e=this._get_settings().languages,c=false,b=".jstree-"+this.get_index()+" a";if(!a.isArray(e)||e.length===0){return false}if(a.inArray(d,e)==-1){if(!!e[d]){d=e[d]}else{return false}}if(d==this.data.languages.current_language){return true}c=a.vakata.css.get_css(b+"."+this.data.languages.current_language,false,this.data.languages.language_css);if(c!==false){c.style.display="none"}c=a.vakata.css.get_css(b+"."+d,false,this.data.languages.language_css);if(c!==false){c.style.display=""}this.data.languages.current_language=d;this.__callback(d);return true},get_lang:function(){return this.data.languages.current_language},get_text:function(d,e){d=this._get_node(d)||this.data.ui.last_selected;if(!d.size()){return false}var c=this._get_settings().languages,b=this._get_settings().core.html_titles;if(a.isArray(c)&&c.length){e=(e&&a.inArray(e,c)!=-1)?e:this.data.languages.current_language;d=d.children("a."+e)}else{d=d.children("a:eq(0)")}if(b){d=d.clone();d.children("INS").remove();return d.html()}else{d=d.contents().filter(function(){return this.nodeType==3})[0];return d.nodeValue}},set_text:function(e,g,f){e=this._get_node(e)||this.data.ui.last_selected;if(!e.size()){return false}var d=this._get_settings().languages,c=this._get_settings().core.html_titles,b;if(a.isArray(d)&&d.length){f=(f&&a.inArray(f,d)!=-1)?f:this.data.languages.current_language;e=e.children("a."+f)}else{e=e.children("a:eq(0)")}if(c){b=e.children("INS").clone();e.html(g).prepend(b);this.__callback({obj:e,name:g,lang:f});return true}else{e=e.contents().filter(function(){return this.nodeType==3})[0];this.__callback({obj:e,name:g,lang:f});return(e.nodeValue=g)}},_load_css:function(){var d=this._get_settings().languages,e="/* languages css */",b=".jstree-"+this.get_index()+" a",c;if(a.isArray(d)&&d.length){this.data.languages.current_language=d[0];for(c=0;c<d.length;c++){e+=b+"."+d[c]+" {";if(d[c]!=this.data.languages.current_language){e+=" display:none; "}e+=" } "}this.data.languages.language_css=a.vakata.css.add_sheet({str:e})}},create_node:function(e,b,d,f){var c=this.__call_old(true,e,b,d,function(h){var j=this._get_settings().languages,g=h.children("a"),i;if(a.isArray(j)&&j.length){for(i=0;i<j.length;i++){if(!g.is("."+j[i])){h.append(g.eq(0).clone().removeClass(j.join(" ")).addClass(j[i]))}}g.not("."+j.join(", .")).remove()}if(f){f.call(this,h)}});return c}}})})(jQuery);(function(a){a.jstree.plugin("cookies",{__init:function(){if(typeof a.cookie==="undefined"){throw"jsTree cookie: jQuery cookie plugin not included."}var c=this._get_settings().cookies,b;if(!!c.save_opened){b=a.cookie(c.save_opened);if(b&&b.length){this.data.core.to_open=b.split(",")}}if(!!c.save_selected){b=a.cookie(c.save_selected);if(b&&b.length&&this.data.ui){this.data.ui.to_select=b.split(",")}}this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",a.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",a.proxy(function(d){if(this._get_settings().cookies.auto_save){this.save_cookie((d.handleObj.namespace+d.handleObj.type).replace("jstree",""))}},this))},this))},defaults:{save_opened:"jstree_open",save_selected:"jstree_select",auto_save:true,cookie_options:{}},_fn:{save_cookie:function(d){if(this.data.core.refreshing){return}var b=this._get_settings().cookies;if(!d){if(b.save_opened){this.save_opened();a.cookie(b.save_opened,this.data.core.to_open.join(","),b.cookie_options)}if(b.save_selected&&this.data.ui){this.save_selected();a.cookie(b.save_selected,this.data.ui.to_select.join(","),b.cookie_options)}return}switch(d){case"open_node":case"close_node":if(!!b.save_opened){this.save_opened();a.cookie(b.save_opened,this.data.core.to_open.join(","),b.cookie_options)}break;case"select_node":case"deselect_node":if(!!b.save_selected&&this.data.ui){this.save_selected();a.cookie(b.save_selected,this.data.ui.to_select.join(","),b.cookie_options)}break}}}});a.jstree.defaults.plugins.push("cookies")})(jQuery);(function(a){a.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",a.proxy(function(d,b){var c=this._get_node(b.rslt.obj);c=c===-1?this.get_container().children("ul"):c.children("ul");this.sort(c)},this)).bind("rename_node.jstree",a.proxy(function(c,b){this.sort(b.rslt.obj.parent())},this)).bind("move_node.jstree",a.proxy(function(d,c){var b=c.rslt.np==-1?this.get_container():c.rslt.np;this.sort(b.children("ul"))},this))},defaults:function(d,c){return this.get_text(d)>this.get_text(c)?1:-1},_fn:{sort:function(d){var c=this._get_settings().sort,b=this;d.append(a.makeArray(d.children("li")).sort(a.proxy(c,b)));d.find("> li > ul").each(function(){b.sort(a(this))});this.clean_node(d)}}})})(jQuery);(function(f){var h=false,c=false,a=false,b=false,e=false,g=false,d=false;f.vakata.dnd={is_down:false,is_drag:false,helper:false,scroll_spd:10,init_x:0,init_y:0,threshold:5,user_data:{},drag_start:function(l,k,i){if(f.vakata.dnd.is_drag){f.vakata.drag_stop({})}try{l.currentTarget.unselectable="on";l.currentTarget.onselectstart=function(){return false};if(l.currentTarget.style){l.currentTarget.style.MozUserSelect="none"}}catch(j){}f.vakata.dnd.init_x=l.pageX;f.vakata.dnd.init_y=l.pageY;f.vakata.dnd.user_data=k;f.vakata.dnd.is_down=true;f.vakata.dnd.helper=f("<div id='vakata-dragged'>").html(i).css("opacity","0.75");f(document).bind("mousemove",f.vakata.dnd.drag);f(document).bind("mouseup",f.vakata.dnd.drag_stop);return false},drag:function(k){if(!f.vakata.dnd.is_down){return}if(!f.vakata.dnd.is_drag){if(Math.abs(k.pageX-f.vakata.dnd.init_x)>5||Math.abs(k.pageY-f.vakata.dnd.init_y)>5){f.vakata.dnd.helper.appendTo("body");f.vakata.dnd.is_drag=true;f(document).triggerHandler("drag_start.vakata",{event:k,data:f.vakata.dnd.user_data})}else{return}}if(k.type==="mousemove"){var m=f(document),j=m.scrollTop(),i=m.scrollLeft();if(k.pageY-j<20){if(e&&g==="down"){clearInterval(e);e=false}if(!e){g="up";e=setInterval(function(){f(document).scrollTop(f(document).scrollTop()-f.vakata.dnd.scroll_spd)},150)}}else{if(e&&g==="up"){clearInterval(e);e=false}}if(f(window).height()-(k.pageY-j)<20){if(e&&g==="up"){clearInterval(e);e=false}if(!e){g="down";e=setInterval(function(){f(document).scrollTop(f(document).scrollTop()+f.vakata.dnd.scroll_spd)},150)}}else{if(e&&g==="down"){clearInterval(e);e=false}}if(k.pageX-i<20){if(b&&d==="right"){clearInterval(b);b=false}if(!b){d="left";b=setInterval(function(){f(document).scrollLeft(f(document).scrollLeft()-f.vakata.dnd.scroll_spd)},150)}}else{if(b&&d==="left"){clearInterval(b);b=false}}if(f(window).width()-(k.pageX-i)<20){if(b&&d==="left"){clearInterval(b);b=false}if(!b){d="right";b=setInterval(function(){f(document).scrollLeft(f(document).scrollLeft()+f.vakata.dnd.scroll_spd)},150)}}else{if(b&&d==="right"){clearInterval(b);b=false}}}f.vakata.dnd.helper.css({left:(k.pageX+5)+"px",top:(k.pageY+10)+"px"});f(document).triggerHandler("drag.vakata",{event:k,data:f.vakata.dnd.user_data})},drag_stop:function(i){f(document).unbind("mousemove",f.vakata.dnd.drag);f(document).unbind("mouseup",f.vakata.dnd.drag_stop);f(document).triggerHandler("drag_stop.vakata",{event:i,data:f.vakata.dnd.user_data});f.vakata.dnd.helper.remove();f.vakata.dnd.init_x=0;f.vakata.dnd.init_y=0;f.vakata.dnd.user_data={};f.vakata.dnd.is_down=false;f.vakata.dnd.is_drag=false}};f(function(){var i="#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ";f.vakata.css.add_sheet({str:i})});f.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:false,after:false,inside:false,before:false,off:false,prepared:false,w:0,to1:false,to2:false,cof:false,cw:false,ch:false,i1:false,i2:false};this.get_container().bind("mouseenter.jstree",f.proxy(function(){if(f.vakata.dnd.is_drag&&f.vakata.dnd.user_data.jstree&&this.data.themes){a.attr("class","jstree-"+this.data.themes.theme);f.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}},this)).bind("mouseleave.jstree",f.proxy(function(){if(f.vakata.dnd.is_drag&&f.vakata.dnd.user_data.jstree){if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}}},this)).bind("mousemove.jstree",f.proxy(function(k){if(f.vakata.dnd.is_drag&&f.vakata.dnd.user_data.jstree){var j=this.get_container()[0];if(k.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw){if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}this.data.dnd.i1=setInterval(f.proxy(function(){this.scrollLeft+=f.vakata.dnd.scroll_spd},j),100)}else{if(k.pageX-24<this.data.dnd.cof.left){if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}this.data.dnd.i1=setInterval(f.proxy(function(){this.scrollLeft-=f.vakata.dnd.scroll_spd},j),100)}else{if(this.data.dnd.i1){clearInterval(this.data.dnd.i1)}}}if(k.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch){if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}this.data.dnd.i2=setInterval(f.proxy(function(){this.scrollTop+=f.vakata.dnd.scroll_spd},j),100)}else{if(k.pageY-24<this.data.dnd.cof.top){if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}this.data.dnd.i2=setInterval(f.proxy(function(){this.scrollTop-=f.vakata.dnd.scroll_spd},j),100)}else{if(this.data.dnd.i2){clearInterval(this.data.dnd.i2)}}}}},this)).delegate("a","mousedown.jstree",f.proxy(function(j){if(j.which===1){this.start_drag(j.currentTarget,j);return false}},this)).delegate("a","mouseenter.jstree",f.proxy(function(j){if(f.vakata.dnd.is_drag&&f.vakata.dnd.user_data.jstree){this.dnd_enter(j.currentTarget)}},this)).delegate("a","mousemove.jstree",f.proxy(function(j){if(f.vakata.dnd.is_drag&&f.vakata.dnd.user_data.jstree){if(typeof this.data.dnd.off.top==="undefined"){this.data.dnd.off=f(j.target).offset()}this.data.dnd.w=(j.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height;if(this.data.dnd.w<0){this.data.dnd.w+=this.data.core.li_height}this.dnd_show()}},this)).delegate("a","mouseleave.jstree",f.proxy(function(j){if(f.vakata.dnd.is_drag&&f.vakata.dnd.user_data.jstree){this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;f.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");a.hide();if(c&&c[0]===j.target.parentNode){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1);this.data.dnd.to1=false}if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2);this.data.dnd.to2=false}}}},this)).delegate("a","mouseup.jstree",f.proxy(function(j){if(f.vakata.dnd.is_drag&&f.vakata.dnd.user_data.jstree){this.dnd_finish(j)}},this));f(document).bind("drag_stop.vakata",f.proxy(function(){this.data.dnd.after=false;this.data.dnd.before=false;this.data.dnd.inside=false;this.data.dnd.off=false;this.data.dnd.prepared=false;this.data.dnd.w=false;this.data.dnd.to1=false;this.data.dnd.to2=false;this.data.dnd.active=false;this.data.dnd.foreign=false;if(a){a.css({top:"-2000px"})}},this)).bind("drag_start.vakata",f.proxy(function(l,j){if(j.data.jstree){var k=f(j.event.target);if(k.closest(".jstree").hasClass("jstree-"+this.get_index())){this.dnd_enter(k)}}},this));var i=this._get_settings().dnd;if(i.drag_target){f(document).delegate(i.drag_target,"mousedown.jstree",f.proxy(function(k){h=k.target;f.vakata.dnd.drag_start(k,{jstree:true,obj:k.target},"<ins class='jstree-icon'></ins>"+f(k.target).text());if(this.data.themes){a.attr("class","jstree-"+this.data.themes.theme);f.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}f.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var j=this.get_container();this.data.dnd.cof=j.offset();this.data.dnd.cw=parseInt(j.width(),10);this.data.dnd.ch=parseInt(j.height(),10);this.data.dnd.foreign=true;return false},this))}if(i.drop_target){f(document).delegate(i.drop_target,"mouseenter.jstree",f.proxy(function(j){if(this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:h,r:f(j.target)})){f.vakata.dnd.helper.children("ins").attr("class","jstree-ok")}},this)).delegate(i.drop_target,"mouseleave.jstree",f.proxy(function(j){if(this.data.dnd.active){f.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}},this)).delegate(i.drop_target,"mouseup.jstree",f.proxy(function(j){if(this.data.dnd.active&&f.vakata.dnd.helper.children("ins").hasClass("jstree-ok")){this._get_settings().dnd.drop_finish.call(this,{o:h,r:f(j.target)})}},this))}},defaults:{copy_modifier:"ctrl",check_timeout:200,open_timeout:500,drop_target:".jstree-drop",drop_check:function(i){return true},drop_finish:f.noop,drag_target:".jstree-draggable",drag_finish:f.noop,drag_check:function(i){return{after:false,before:false,inside:true}}},_fn:{dnd_prepare:function(){if(!c||!c.length){return}this.data.dnd.off=c.offset();if(this._get_settings().core.rtl){this.data.dnd.off.right=this.data.dnd.off.left+c.width()}if(this.data.dnd.foreign){var i=this._get_settings().dnd.drag_check.call(this,{o:h,r:c});this.data.dnd.after=i.after;this.data.dnd.before=i.before;this.data.dnd.inside=i.inside;this.data.dnd.prepared=true;return this.dnd_show()}this.prepare_move(h,c,"before");this.data.dnd.before=this.check_move();this.prepare_move(h,c,"after");this.data.dnd.after=this.check_move();if(this._is_loaded(c)){this.prepare_move(h,c,"inside");this.data.dnd.inside=this.check_move()}else{this.data.dnd.inside=false}this.data.dnd.prepared=true;return this.dnd_show()},dnd_show:function(){if(!this.data.dnd.prepared){return}var k=["before","inside","after"],i=false,j=this._get_settings().core.rtl,l;if(this.data.dnd.w<this.data.core.li_height/3){k=["before","inside","after"]}else{if(this.data.dnd.w<=this.data.core.li_height*2/3){k=this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]}else{k=["after","inside","before"]}}f.each(k,f.proxy(function(m,n){if(this.data.dnd[n]){f.vakata.dnd.helper.children("ins").attr("class","jstree-ok");i=n;return false}},this));if(i===false){f.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")}l=j?(this.data.dnd.off.right-18):(this.data.dnd.off.left+10);switch(i){case"before":a.css({left:l+"px",top:(this.data.dnd.off.top-6)+"px"}).show();break;case"after":a.css({left:l+"px",top:(this.data.dnd.off.top+this.data.core.li_height-7)+"px"}).show();break;case"inside":a.css({left:l+(j?-4:4)+"px",top:(this.data.dnd.off.top+this.data.core.li_height/2-5)+"px"}).show();break;default:a.hide();break}return i},dnd_open:function(){this.data.dnd.to2=false;this.open_node(c,f.proxy(this.dnd_prepare,this),true)},dnd_finish:function(i){if(this.data.dnd.foreign){if(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside){this._get_settings().dnd.drag_finish.call(this,{o:h,r:c})}}else{this.dnd_prepare();this.move_node(h,c,this.dnd_show(),i[this._get_settings().dnd.copy_modifier+"Key"])}h=false;c=false;a.hide()},dnd_enter:function(j){var i=this._get_settings().dnd;this.data.dnd.prepared=false;c=this._get_node(j);if(i.check_timeout){if(this.data.dnd.to1){clearTimeout(this.data.dnd.to1)}this.data.dnd.to1=setTimeout(f.proxy(this.dnd_prepare,this),i.check_timeout)}else{this.dnd_prepare()}if(i.open_timeout){if(this.data.dnd.to2){clearTimeout(this.data.dnd.to2)}if(c&&c.length&&c.hasClass("jstree-closed")){this.data.dnd.to2=setTimeout(f.proxy(this.dnd_open,this),i.open_timeout)}}else{if(c&&c.length&&c.hasClass("jstree-closed")){this.dnd_open()}}},start_drag:function(k,j){h=this._get_node(k);if(this.data.ui&&this.is_selected(h)){h=this._get_node(null,true)}f.vakata.dnd.drag_start(j,{jstree:true,obj:h},"<ins class='jstree-icon'></ins>"+(h.length>1?"Multiple selection":this.get_text(h)));if(this.data.themes){a.attr("class","jstree-"+this.data.themes.theme);f.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)}var i=this.get_container();this.data.dnd.cof=i.children("ul").offset();this.data.dnd.cw=parseInt(i.width(),10);this.data.dnd.ch=parseInt(i.height(),10);this.data.dnd.active=true}}});f(function(){var i="#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; line-height:12px; font-size:1px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:silver; } ";f.vakata.css.add_sheet({str:i});a=f("<div>").attr({id:"jstree-marker"}).hide().appendTo("body");f(document).bind("drag_start.vakata",function(k,j){if(j.data.jstree){a.show()}});f(document).bind("drag_stop.vakata",function(k,j){if(j.data.jstree){a.hide()}})})})(jQuery);(function(a){a.jstree.plugin("checkbox",{__init:function(){this.select_node=this.deselect_node=this.deselect_all=a.noop;this.get_selected=this.get_checked;this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree",a.proxy(function(c,b){this._prepare_checkboxes(b.rslt.obj)},this)).bind("loaded.jstree",a.proxy(function(b){this._prepare_checkboxes()},this)).delegate("a","click.jstree",a.proxy(function(b){if(this._get_node(b.target).hasClass("jstree-checked")){this.uncheck_node(b.target)}else{this.check_node(b.target)}if(this.data.ui){this.save_selected()}if(this.data.cookies){this.save_cookie("select_node")}b.preventDefault()},this))},__destroy:function(){this.get_container().find(".jstree-checkbox").remove()},_fn:{_prepare_checkboxes:function(d){d=!d||d==-1?this.get_container():this._get_node(d);var f,e=this,b;d.each(function(){b=a(this);f=b.is("li")&&b.hasClass("jstree-checked")?"jstree-checked":"jstree-unchecked";b.find("a").not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(f)});if(d.is("li")){this._repair_state(d)}else{d.find("> ul > li").each(function(){e._repair_state(this)})}},change_state:function(c,b){c=this._get_node(c);b=(b===false||b===true)?b:c.hasClass("jstree-checked");if(b){c.find("li").andSelf().removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked")}else{c.find("li").andSelf().removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");if(this.data.ui){this.data.ui.last_selected=c}this.data.checkbox.last_selected=c}c.parentsUntil(".jstree","li").each(function(){var d=a(this);if(b){if(d.children("ul").children(".jstree-checked, .jstree-undetermined").length){d.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");return false}else{d.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked")}}else{if(d.children("ul").children(".jstree-unchecked, .jstree-undetermined").length){d.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");return false}else{d.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked")}}});if(this.data.ui){this.data.ui.selected=this.get_checked()}this.__callback(c)},check_node:function(b){this.change_state(b,false)},uncheck_node:function(b){this.change_state(b,true)},check_all:function(){var b=this;this.get_container().children("ul").children("li").each(function(){b.check_node(this,false)})},uncheck_all:function(){var b=this;this.get_container().children("ul").children("li").each(function(){b.change_state(this,true)})},is_checked:function(b){b=this._get_node(b);return b.length?b.is(".jstree-checked"):false},get_checked:function(b){b=!b||b===-1?this.get_container():this._get_node(b);return b.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(b){b=!b||b===-1?this.get_container():this._get_node(b);return b.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(f){f=this._get_node(f);if(!f.length){return}var e=f.find("> ul > .jstree-checked").length,d=f.find("> ul > .jstree-undetermined").length,g=f.find("> ul > li").length;if(g===0){if(f.hasClass("jstree-undetermined")){this.check_node(f)}}else{if(e===0&&d===0){this.uncheck_node(f)}else{if(e===g){this.check_node(f)}else{f.parentsUntil(".jstree","li").removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined")}}}},reselect:function(){if(this.data.ui){var c=this,b=this.data.ui.to_select;b=a.map(a.makeArray(b),function(d){return"#"+d.toString().replace(/^#/,"").replace("\\/","/").replace("/","\\/")});this.deselect_all();a.each(b,function(d,e){c.check_node(e)});this.__callback()}}}})})(jQuery);(function(b){b.vakata.xslt=function(e,f,j){var c="",i,d,h,g;if(document.recalc){i=document.createElement("xml");d=document.createElement("xml");i.innerHTML=e;d.innerHTML=f;b("body").append(i).append(d);setTimeout((function(l,k,m){return function(){m.call(null,l.transformNode(k.XMLDocument));setTimeout((function(o,n){return function(){jQuery("body").remove(o).remove(n)}})(l,k),200)}})(i,d,j),100);return true}if(typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor!=="undefined"){h=new XSLTProcessor();g=b.isFunction(h.transformDocument)?(typeof window.XMLSerializer!=="undefined"):true;if(!g){return false}e=new DOMParser().parseFromString(e,"text/xml");f=new DOMParser().parseFromString(f,"text/xml");if(b.isFunction(h.transformDocument)){c=document.implementation.createDocument("","",null);h.transformDocument(e,f,c,null);j.call(null,XMLSerializer().serializeToString(c));return true}else{h.importStylesheet(f);c=h.transformToFragment(e,document);j.call(null,b("<div>").append(c).html());return true}}return false};var a={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">	<xsl:call-template name="nodes">		<xsl:with-param name="node" select="/root" />	</xsl:call-template></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<ul>	<xsl:for-each select="$node/item">		<xsl:variable name="children" select="count(./item) &gt; 0" />		<li>			<xsl:attribute name="class">				<xsl:if test="position() = last()">jstree-last </xsl:if>				<xsl:choose>					<xsl:when test="@state = \'open\'">jstree-open </xsl:when>					<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>					<xsl:otherwise>jstree-leaf </xsl:otherwise>				</xsl:choose>				<xsl:value-of select="@class" />			</xsl:attribute>			<xsl:for-each select="@*">				<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">					<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>				</xsl:if>			</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>			<xsl:for-each select="content/name">				<a>				<xsl:attribute name="href">					<xsl:choose>					<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>					<xsl:otherwise>#</xsl:otherwise>					</xsl:choose>				</xsl:attribute>				<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>				<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>				<xsl:for-each select="@*">					<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">						<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>					</xsl:if>				</xsl:for-each>					<ins>						<xsl:attribute name="class">jstree-icon 							<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>						</xsl:attribute>						<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>						<xsl:text>&#xa0;</xsl:text>					</ins>					<xsl:value-of select="current()" />				</a>			</xsl:for-each>			<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>		</li>	</xsl:for-each>	</ul></xsl:template></xsl:stylesheet>',flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">	<ul>	<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">		<xsl:call-template name="nodes">			<xsl:with-param name="node" select="." />			<xsl:with-param name="is_last" select="number(position() = last())" />		</xsl:call-template>	</xsl:for-each>	</ul></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<xsl:param name="is_last" />	<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />	<li>	<xsl:attribute name="class">		<xsl:if test="$is_last = true()">jstree-last </xsl:if>		<xsl:choose>			<xsl:when test="@state = \'open\'">jstree-open </xsl:when>			<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>			<xsl:otherwise>jstree-leaf </xsl:otherwise>		</xsl:choose>		<xsl:value-of select="@class" />	</xsl:attribute>	<xsl:for-each select="@*">		<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">		<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>		</xsl:if>	</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>	<xsl:for-each select="content/name">		<a>		<xsl:attribute name="href">			<xsl:choose>			<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>			<xsl:otherwise>#</xsl:otherwise>			</xsl:choose>		</xsl:attribute>		<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>		<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>		<xsl:for-each select="@*">			<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">				<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>			</xsl:if>		</xsl:for-each>			<ins>				<xsl:attribute name="class">jstree-icon 					<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>				</xsl:attribute>				<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>				<xsl:text>&#xa0;</xsl:text>			</ins>			<xsl:value-of select="current()" />		</a>	</xsl:for-each>	<xsl:if test="$children">		<ul>		<xsl:for-each select="//item[@parent_id=$node/attribute::id]">			<xsl:call-template name="nodes">				<xsl:with-param name="node" select="." />				<xsl:with-param name="is_last" select="number(position() = last())" />			</xsl:call-template>		</xsl:for-each>		</ul>	</xsl:if>	</li></xsl:template></xsl:stylesheet>'};b.jstree.plugin("xml_data",{defaults:{data:false,ajax:false,xsl:"flat",clean_node:false,correct_state:true},_fn:{load_node:function(e,c,d){var f=this;this.load_node_xml(e,function(){f.__callback({obj:e});c.call(this)},d)},_is_loaded:function(d){var c=this._get_settings().xml_data;d=this._get_node(d);return d==-1||!d||!c.ajax||d.is(".jstree-open, .jstree-leaf")||d.children("ul").children("li").size()>0},load_node_xml:function(g,c,e){var f=this.get_settings().xml_data,d=function(){},h=function(){};g=this._get_node(g);if(g&&g!==-1){if(g.data("jstree-is-loading")){return}else{g.data("jstree-is-loading",true)}}switch(!0){case (!f.data&&!f.ajax):throw"Neither data nor ajax settings supplied.";case (!!f.data&&!f.ajax)||(!!f.data&&!!f.ajax&&(!g||g===-1)):if(!g||g==-1){this.parse_xml(f.data,b.proxy(function(i){if(i){i=i.replace(/ ?xmlns="[^"]*"/ig,"");if(i.length>10){i=b(i);this.get_container().children("ul").empty().append(i.children());if(f.clean_node){this.clean_node(g)}if(c){c.call(this)}}}else{if(f.correct_state){this.get_container().children("ul").empty();if(c){c.call(this)}}}},this))}break;case (!f.data&&!!f.ajax)||(!!f.data&&!!f.ajax&&g&&g!==-1):d=function(j,k,l){var i=this.get_settings().xml_data.ajax.error;if(i){i.call(this,j,k,l)}if(g!==-1&&g.length){g.children(".jstree-loading").removeClass("jstree-loading");g.data("jstree-is-loading",false);if(k==="success"&&f.correct_state){g.removeClass("jstree-open jstree-closed").addClass("jstree-leaf")}}else{if(k==="success"&&f.correct_state){this.get_container().children("ul").empty()}}if(e){e.call(this)}};h=function(l,j,i){l=i.responseText;var k=this.get_settings().xml_data.ajax.success;if(k){l=k.call(this,l,j,i)||l}if(l==""){return d.call(this,i,j,"")}this.parse_xml(l,b.proxy(function(m){if(m){m=m.replace(/ ?xmlns="[^"]*"/ig,"");if(m.length>10){m=b(m);if(g===-1||!g){this.get_container().children("ul").empty().append(m.children())}else{g.children(".jstree-loading").removeClass("jstree-loading");g.append(m);g.data("jstree-is-loading",false)}if(f.clean_node){this.clean_node(g)}if(c){c.call(this)}}else{if(g&&g!==-1){g.children(".jstree-loading").removeClass("jstree-loading");g.data("jstree-is-loading",false);if(f.correct_state){g.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");if(c){c.call(this)}}}else{if(f.correct_state){this.get_container().children("ul").empty();if(c){c.call(this)}}}}}},this))};f.ajax.context=this;f.ajax.error=d;f.ajax.success=h;if(!f.ajax.dataType){f.ajax.dataType="xml"}if(b.isFunction(f.ajax.url)){f.ajax.url=f.ajax.url.call(this,g)}if(b.isFunction(f.ajax.data)){f.ajax.data=f.ajax.data.call(this,g)}b.ajax(f.ajax);break}},parse_xml:function(c,e){var d=this._get_settings().xml_data;b.vakata.xslt(c,a[d.xsl],e)},get_xml:function(k,h,e,c,m){var o="",n=this._get_settings(),i=this,g,f,l,j,d;if(!k){k="flat"}if(!m){m=0}h=this._get_node(h);if(!h||h===-1){h=this.get_container().find("> ul > li")}e=b.isArray(e)?e:["id","class"];if(!m&&this.data.types&&b.inArray(n.types.type_attr,e)===-1){e.push(n.types.type_attr)}c=b.isArray(c)?c:[];if(!m){o+="<root>"}h.each(function(){o+="<item";l=b(this);b.each(e,function(q,p){o+=" "+p+'="'+(l.attr(p)||"").replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"")+'"'});if(l.hasClass("jstree-open")){o+=' state="open"'}if(l.hasClass("jstree-closed")){o+=' state="closed"'}if(k==="flat"){o+=' parent_id="'+m+'"'}o+=">";o+="<content>";j=l.children("a");j.each(function(){g=b(this);d=false;o+="<name";if(b.inArray("languages",n.plugins)!==-1){b.each(n.languages,function(p,q){if(g.hasClass(q)){o+=' lang="'+q+'"';d=q;return false}})}if(c.length){b.each(c,function(p,q){o+=" "+q+'="'+(g.attr(q)||"").replace(/jstree[^ ]*|$/ig,"")+'"'})}if(g.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length){o+=' icon="'+g.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"")+'"'}if(g.children("ins").get(0).style.backgroundImage.length){o+=' icon="'+g.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")+'"'}o+=">";o+="<![CDATA["+i.get_text(g,d)+"]]>";o+="</name>"});o+="</content>";f=l[0].id;l=l.find("> ul > li");if(l.length){f=i.get_xml(k,l,e,c,f)}else{f=""}if(k=="nest"){o+=f}o+="</item>";if(k=="flat"){o+=f}});if(!m){o+="</root>"}return o}}})})(jQuery);(function(a){a.expr[":"].jstree_contains=function(c,d,b){return(c.textContent||c.innerText||"").toLowerCase().indexOf(b[3].toLowerCase())>=0};a.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=a()},defaults:{ajax:false,case_insensitive:false},_fn:{search:function(g,b){if(g===""){return}var e=this.get_settings().search,d=this,c=function(){},f=function(){};this.data.search.str=g;if(!b&&e.ajax!==false&&this.get_container().find(".jstree-closed:eq(0)").length>0){this.search.supress_callback=true;c=function(){};f=function(k,i,h){var j=this.get_settings().search.ajax.success;if(j){k=j.call(this,k,i,h)||k}this.data.search.to_open=k;this._search_open()};e.ajax.context=this;e.ajax.error=c;e.ajax.success=f;if(a.isFunction(e.ajax.url)){e.ajax.url=e.ajax.url.call(this,g)}if(a.isFunction(e.ajax.data)){e.ajax.data=e.ajax.data.call(this,g)}if(!e.ajax.data){e.ajax.data={search_string:g}}if(!e.ajax.dataType||/^json/.exec(e.ajax.dataType)){e.ajax.dataType="json"}a.ajax(e.ajax);return}if(this.data.search.result.length){this.clear_search()}this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+(e.case_insensitive?"jstree_contains":"contains")+"("+this.data.search.str+")");this.data.search.result.addClass("jstree-search").parents(".jstree-closed").each(function(){d.open_node(this,false,true)});this.__callback({nodes:this.data.search.result,str:g})},clear_search:function(b){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=a()},_search_open:function(c){var f=this,b=true,e=[],d=[];if(this.data.search.to_open.length){a.each(this.data.search.to_open,function(g,h){if(h=="#"){return true}if(a(h).length&&a(h).is(".jstree-closed")){e.push(h)}else{d.push(h)}});if(e.length){this.data.search.to_open=d;a.each(e,function(g,h){f.open_node(h,function(){f._search_open(true)})});b=false}}if(b){this.search(this.data.search.str,true)}}}})})(jQuery);(function(a){a.vakata.context={cnt:a("<div id='vakata-contextmenu'>"),vis:false,tgt:false,par:false,func:false,data:false,show:function(l,k,i,g,f,b){var e=a.vakata.context.parse(l),c,j;if(!e){return}a.vakata.context.vis=true;a.vakata.context.tgt=k;a.vakata.context.par=b||k||null;a.vakata.context.data=f||null;a.vakata.context.cnt.html(e).css({visibility:"hidden",display:"block",left:0,top:0});c=a.vakata.context.cnt.height();j=a.vakata.context.cnt.width();if(i+j>a(document).width()){i=a(document).width()-(j+5);a.vakata.context.cnt.find("li > ul").addClass("right")}if(g+c>a(document).height()){g=g-(c+k[0].offsetHeight);a.vakata.context.cnt.find("li > ul").addClass("bottom")}a.vakata.context.cnt.css({left:i,top:g}).find("li:has(ul)").bind("mouseenter",function(o){var d=a(document).width(),n=a(document).height(),m=a(this).children("ul").show();if(d!==a(document).width()){m.toggleClass("right")}if(n!==a(document).height()){m.toggleClass("bottom")}}).bind("mouseleave",function(d){a(this).children("ul").hide()}).end().css({visibility:"visible"}).show();a(document).triggerHandler("context_show.vakata")},hide:function(){a.vakata.context.vis=false;a.vakata.context.cnt.attr("class","").hide();a(document).triggerHandler("context_hide.vakata")},parse:function(e,d){if(!e){return false}var f="",c=false,b=true;if(!d){a.vakata.context.func={}}f+="<ul>";a.each(e,function(g,h){if(!h){return true}a.vakata.context.func[g]=h.action;if(!b&&h.separator_before){f+="<li class='vakata-separator vakata-separator-before'></li>"}b=false;f+="<li class='"+(h._class||"")+(h._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";if(h.icon&&h.icon.indexOf("/")===-1){f+=" class='"+h.icon+"' "}if(h.icon&&h.icon.indexOf("/")!==-1){f+=" style='background:url("+h.icon+") center center no-repeat;' "}f+=">&#160;</ins><a href='#' rel='"+g+"'>";if(h.submenu){f+="<span style='float:right;'>&raquo;</span>"}f+=h.label+"</a>";if(h.submenu){c=a.vakata.context.parse(h.submenu,true);if(c){f+=c}}f+="</li>";if(h.separator_after){f+="<li class='vakata-separator vakata-separator-after'></li>";b=true}});f=f.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");f+="</ul>";return f.length>10?f:false},exec:function(b){if(a.isFunction(a.vakata.context.func[b])){a.vakata.context.func[b].call(a.vakata.context.data,a.vakata.context.par);return true}else{return false}}};a(function(){var b="#vakata-contextmenu { display:none; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ";a.vakata.css.add_sheet({str:b});a.vakata.context.cnt.delegate("a","click",function(c){c.preventDefault()}).delegate("a","mouseup",function(c){if(!a(this).parent().hasClass("jstree-contextmenu-disabled")&&a.vakata.context.exec(a(this).attr("rel"))){a.vakata.context.hide()}else{a(this).blur()}}).delegate("a","mouseover",function(){a.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");a(document).bind("mousedown",function(c){if(a.vakata.context.vis&&!a.contains(a.vakata.context.cnt[0],c.target)){a.vakata.context.hide()}});if(typeof a.hotkeys!=="undefined"){a(document).bind("keydown","up",function(c){if(a.vakata.context.vis){var d=a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();if(!d.length){d=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last()}d.addClass("vakata-hover");c.stopImmediatePropagation();c.preventDefault()}}).bind("keydown","down",function(c){if(a.vakata.context.vis){var d=a.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();if(!d.length){d=a.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first()}d.addClass("vakata-hover");c.stopImmediatePropagation();c.preventDefault()}}).bind("keydown","right",function(c){if(a.vakata.context.vis){a.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover");c.stopImmediatePropagation();c.preventDefault()}}).bind("keydown","left",function(c){if(a.vakata.context.vis){a.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover");c.stopImmediatePropagation();c.preventDefault()}}).bind("keydown","esc",function(c){a.vakata.context.hide();c.preventDefault()}).bind("keydown","space",function(c){a.vakata.context.cnt.find(".vakata-hover").last().children("a").click();c.preventDefault()})}});a.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",a.proxy(function(b){b.preventDefault();this.show_contextmenu(b.currentTarget,b.pageX,b.pageY)},this)).bind("destroy.jstree",a.proxy(function(){if(this.data.contextmenu){a.vakata.context.hide()}},this));a(document).bind("context_hide.vakata",a.proxy(function(){this.data.contextmenu=false},this))},defaults:{select_node:false,show_at_node:true,items:{create:{separator_before:false,separator_after:true,label:"Create",action:function(b){this.create(b)}},rename:{separator_before:false,separator_after:false,label:"Rename",action:function(b){this.rename(b)}},remove:{separator_before:false,icon:false,separator_after:false,label:"Delete",action:function(b){this.remove(b)}},ccp:{separator_before:true,icon:false,separator_after:false,label:"Edit",action:false,submenu:{cut:{separator_before:false,separator_after:false,label:"Cut",action:function(b){this.cut(b)}},copy:{separator_before:false,icon:false,separator_after:false,label:"Copy",action:function(b){this.copy(b)}},paste:{separator_before:false,icon:false,separator_after:false,label:"Paste",action:function(b){this.paste(b)}}}}}},_fn:{show_contextmenu:function(e,b,g){e=this._get_node(e);var d=this.get_settings().contextmenu,c=e.children("a:visible:eq(0)"),f=false;if(d.select_node&&this.data.ui&&!this.is_selected(e)){this.deselect_all();this.select_node(e,true)}if(d.show_at_node||typeof b==="undefined"||typeof g==="undefined"){f=c.offset();b=f.left;g=f.top+this.data.core.li_height}if(a.isFunction(d.items)){d.items=d.items.call(this,e)}this.data.contextmenu=true;a.vakata.context.show(d.items,c,b,g,this,e);if(this.data.themes){a.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}}})})(jQuery);(function(a){a.jstree.plugin("types",{__init:function(){var b=this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",a.proxy(function(){var e=b.types,d=b.type_attr,c="",f=this;a.each(e,function(g,h){a.each(h,function(j,i){if(!/^(max_depth|max_children|icon|valid_children)$/.test(j)){f.data.types.attach_to.push(j)}});if(!h.icon){return true}if(h.icon.image||h.icon.position){if(g=="default"){c+=".jstree-"+f.get_index()+" a > .jstree-icon { "}else{c+=".jstree-"+f.get_index()+" li["+d+"="+g+"] > a > .jstree-icon { "}if(h.icon.image){c+=" background-image:url("+h.icon.image+"); "}if(h.icon.position){c+=" background-position:"+h.icon.position+"; "}else{c+=" background-position:0 0; "}c+="} "}});if(c!=""){a.vakata.css.add_sheet({str:c})}},this)).bind("before.jstree",a.proxy(function(g,f){if(a.inArray(f.func,this.data.types.attach_to)!==-1){var d=this._get_settings().types.types,c=this._get_type(f.args[0]);if(((d[c]&&typeof d[c][f.func]!=="undefined")||(d["default"]&&typeof d["default"][f.func]!=="undefined"))&&!this._check(f.func,f.args[0])){g.stopImmediatePropagation();return false}}},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_get_type:function(b){b=this._get_node(b);return(!b||!b.length)?false:b.attr(this._get_settings().types.type_attr)||"default"},set_type:function(c,b){b=this._get_node(b);return(!b.length||!c)?false:b.attr(this._get_settings().types.type_attr,c)},_check:function(h,g,f){var b=false,c=this._get_type(g),i=0,j=this,e=this._get_settings().types;if(g===-1){if(!!e[h]){b=e[h]}else{return}}else{if(c===false){return}if(!!e.types[c]&&!!e.types[c][h]){b=e.types[c][h]}else{if(!!e.types["default"]&&!!e.types["default"][h]){b=e.types["default"][h]}}}if(a.isFunction(b)){b=b.call(this,g)}if(h==="max_depth"&&g!==-1&&f!==false&&e.max_depth!==-2&&b!==0){this._get_node(g).children("a:eq(0)").parentsUntil(".jstree","li").each(function(d){if(e.max_depth!==-1&&e.max_depth-(d+1)<=0){b=0;return false}i=(d===0)?b:j._check(h,this,false);if(i!==-1&&i-(d+1)<=0){b=0;return false}if(i>=0&&(i-(d+1)<b||b<0)){b=i-(d+1)}if(e.max_depth>=0&&(e.max_depth-(d+1)<b||b<0)){b=e.max_depth-(d+1)}})}return b},check_move:function(){if(!this.__call_old()){return false}var b=this._get_move(),g=b.rt._get_settings().types,i=b.rt._check("max_children",b.cr),h=b.rt._check("max_depth",b.cr),e=b.rt._check("valid_children",b.cr),f=0,j=1,c;if(e==="none"){return false}if(a.isArray(e)&&b.ot&&b.ot._get_type){b.o.each(function(){if(a.inArray(b.ot._get_type(this),e)===-1){j=false;return false}});if(j===false){return false}}if(g.max_children!==-2&&i!==-1){f=b.cr===-1?this.get_container().children("> ul > li").not(b.o).length:b.cr.children("> ul > li").not(b.o).length;if(f+b.o.length>i){return false}}if(g.max_depth!==-2&&h!==-1){j=0;if(h===0){return false}if(typeof b.o.d==="undefined"){c=b.o;while(c.length>0){c=c.find("> ul > li");j++}b.o.d=j}if(h-b.o.d<0){return false}}return true},create_node:function(e,f,c,l,h,k){if(!k&&(h||this._is_loaded(e))){var d=(f&&f.match(/^before|after$/i)&&e!==-1)?this._get_parent(e):this._get_node(e),m=this._get_settings().types,j=this._check("max_children",d),i=this._check("max_depth",d),g=this._check("valid_children",d),b;if(!c){c={}}if(g==="none"){return false}if(a.isArray(g)){if(!c.attr||!c.attr[m.type_attr]){if(!c.attr){c.attr={}}c.attr[m.type_attr]=g[0]}else{if(a.inArray(c.attr[m.type_attr],g)===-1){return false}}}if(m.max_children!==-2&&j!==-1){b=d===-1?this.get_container().children("> ul > li").length:d.children("> ul > li").length;if(b+1>j){return false}}if(m.max_depth!==-2&&i!==-1&&(i-1)<0){return false}}return this.__call_old(true,e,f,c,l,h,k)}}})})(jQuery);(function(a){a.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(true);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return this.nodeType==3}).remove()},defaults:{data:false,ajax:false,correct_state:true},_fn:{load_node:function(d,b,c){var e=this;this.load_node_html(d,function(){e.__callback({obj:d});b.call(this)},c)},_is_loaded:function(b){b=this._get_node(b);return b==-1||!b||!this._get_settings().html_data.ajax||b.is(".jstree-open, .jstree-leaf")||b.children("ul").children("li").size()>0},load_node_html:function(g,b,e){var i,f=this.get_settings().html_data,c=function(){},h=function(){};g=this._get_node(g);if(g&&g!==-1){if(g.data("jstree-is-loading")){return}else{g.data("jstree-is-loading",true)}}switch(!0){case (!f.data&&!f.ajax):if(!g||g==-1){this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");this.clean_node()}if(b){b.call(this)}break;case (!!f.data&&!f.ajax)||(!!f.data&&!!f.ajax&&(!g||g===-1)):if(!g||g==-1){i=a(f.data);if(!i.is("ul")){i=a("<ul>").append(i)}this.get_container().children("ul").empty().append(i.children()).find("li, a").filter(function(){return this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");this.clean_node()}if(b){b.call(this)}break;case (!f.data&&!!f.ajax)||(!!f.data&&!!f.ajax&&g&&g!==-1):g=this._get_node(g);c=function(j,k,l){var d=this.get_settings().html_data.ajax.error;if(d){d.call(this,j,k,l)}if(g!=-1&&g.length){g.children(".jstree-loading").removeClass("jstree-loading");g.data("jstree-is-loading",false);if(k==="success"&&f.correct_state){g.removeClass("jstree-open jstree-closed").addClass("jstree-leaf")}}else{if(k==="success"&&f.correct_state){this.get_container().children("ul").empty()}}if(e){e.call(this)}};h=function(m,k,j){var l=this.get_settings().html_data.ajax.success;if(l){m=l.call(this,m,k,j)||m}if(m==""){return c.call(this,j,k,"")}if(m){m=a(m);if(!m.is("ul")){m=a("<ul>").append(m)}if(g==-1||!g){this.get_container().children("ul").empty().append(m.children()).find("li, a").filter(function(){return this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon")}else{g.children(".jstree-loading").removeClass("jstree-loading");g.append(m).find("li, a").filter(function(){return this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");g.data("jstree-is-loading",false)}this.clean_node(g);if(b){b.call(this)}}else{if(g&&g!==-1){g.children(".jstree-loading").removeClass("jstree-loading");g.data("jstree-is-loading",false);if(f.correct_state){g.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");if(b){b.call(this)}}}else{if(f.correct_state){this.get_container().children("ul").empty();if(b){b.call(this)}}}}};f.ajax.context=this;f.ajax.error=c;f.ajax.success=h;if(!f.ajax.dataType){f.ajax.dataType="html"}if(a.isFunction(f.ajax.url)){f.ajax.url=f.ajax.url.call(this,g)}if(a.isFunction(f.ajax.data)){f.ajax.data=f.ajax.data.call(this,g)}a.ajax(f.ajax);break}}}});a.jstree.defaults.plugins.push("html_data")})(jQuery);(function(a){a.jstree.plugin("themeroller",{__init:function(){var b=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").delegate("a","mouseenter.jstree",function(){a(this).addClass(b.item_h)}).delegate("a","mouseleave.jstree",function(){a(this).removeClass(b.item_h)}).bind("open_node.jstree create_node.jstree",a.proxy(function(d,c){this._themeroller(c.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",a.proxy(function(c){this._themeroller()},this)).bind("close_node.jstree",a.proxy(function(d,c){c.rslt.obj.children("ins").removeClass(b.opened).addClass(b.closed)},this)).bind("select_node.jstree",a.proxy(function(d,c){c.rslt.obj.children("a").addClass(b.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",a.proxy(function(d,c){this.get_container().find("."+b.item_a).removeClass(b.item_a).end().find(".jstree-clicked").addClass(b.item_a)},this)).bind("move_node.jstree",a.proxy(function(d,c){this._themeroller(c.rslt.o)},this))},__destroy:function(){var b=this._get_settings().themeroller,d=["ui-icon"];a.each(b,function(e,c){c=c.split(" ");if(c.length){d=d.concat(c)}});this.get_container().removeClass("ui-widget-content").find("."+d.join(", .")).removeClass(d.join(" "))},_fn:{_themeroller:function(c){var b=this._get_settings().themeroller;c=!c||c==-1?this.get_container():this._get_node(c).parent();c.find("li.jstree-closed > ins.jstree-icon").removeClass(b.opened).addClass("ui-icon "+b.closed).end().find("li.jstree-open > ins.jstree-icon").removeClass(b.closed).addClass("ui-icon "+b.opened).end().find("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon "+b.item_icon)}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_icon:"ui-icon-folder-collapsed"}});a(function(){var b=".jstree .ui-icon { overflow:visible; } .jstree a { padding:0 2px; }";a.vakata.css.add_sheet({str:b})})})(jQuery);(function(a){a.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",a.proxy(function(h,f){var b=[],d=true,g,c;if(f.func=="move_node"){if(f.args[4]===true){if(f.args[0].o&&f.args[0].o.length){f.args[0].o.children("a").each(function(){b.push(a(this).text().replace(/^\s+/g,""))});d=this._check_unique(b,f.args[0].np.find("> ul > li").not(f.args[0].o))}}}if(f.func=="create_node"){if(f.args[4]||this._is_loaded(f.args[0])){g=this._get_node(f.args[0]);if(f.args[1]&&(f.args[1]==="before"||f.args[1]==="after")){g=this._get_parent(f.args[0]);if(!g||g===-1){g=this.get_container()}}if(typeof f.args[2]==="string"){b.push(f.args[2])}else{if(!f.args[2]||!f.args[2].data){b.push(this._get_settings().core.strings.new_node)}else{b.push(f.args[2].data)}}d=this._check_unique(b,g.find("> ul > li"))}}if(f.func=="rename_node"){b.push(f.args[1]);c=this._get_node(f.args[0]);g=this._get_parent(c);if(!g||g===-1){g=this.get_container()}d=this._check_unique(b,g.find("> ul > li").not(c))}if(!d){h.stopPropagation();return false}},this))},_fn:{_check_unique:function(c,d){var b=[];d.children("a").each(function(){b.push(a(this).text().replace(/^\s+/g,""))});if(!b.length||!c.length){return true}b=b.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");if((b.length+c.length)!=b.concat(c).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length){return false}return true},check_move:function(){if(!this.__call_old()){return false}var c=this._get_move(),b=[];if(c.o&&c.o.length){c.o.children("a").each(function(){b.push(a(this).text().replace(/^\s+/g,""))});return this._check_unique(b,c.np.find("> ul > li").not(c.o))}return true}}})})(jQuery);(function(a){a.fn.lazyload=function(b){var c={threshold:0,failurelimit:0,event:"scroll",effect:"show",container:window};if(b){a.extend(c,b)}var d=this;if("scroll"==c.event){a(c.container).bind("scroll",function(g){var e=0;d.each(function(){if(this.offsetWidth==0||this.offsetHeight==0){return}if(a.abovethetop(this,c)||a.leftofbegin(this,c)){}else{if(!a.belowthefold(this,c)&&!a.rightoffold(this,c)){a(this).trigger("appear")}else{if(e++>c.failurelimit){return false}}}});var f=a.grep(d,function(h){return !h.loaded});d=a(f)})}this.each(function(){var e=this;if(undefined==a(e).attr("original")){a(e).attr("original",a(e).attr("src"))}if("scroll"!=c.event||undefined==a(e).attr("src")||c.placeholder==a(e).attr("src")||(a.abovethetop(e,c)||a.leftofbegin(e,c)||a.belowthefold(e,c)||a.rightoffold(e,c))){if(c.placeholder){a(e).attr("src",c.placeholder)}else{a(e).removeAttr("src")}e.loaded=false}else{e.loaded=true}a(e).one("appear",function(){if(!this.loaded){a("<img />").bind("load",function(){a(e).hide().attr("src",a(e).attr("original"))[c.effect](c.effectspeed);e.loaded=true}).attr("src",a(e).attr("original"))}});if("scroll"!=c.event){a(e).bind(c.event,function(f){if(!e.loaded){a(e).trigger("appear")}})}});a(c.container).trigger(c.event);return this};a.belowthefold=function(c,d){if(d.container===undefined||d.container===window){var b=a(window).height()+a(window).scrollTop()}else{var b=a(d.container).offset().top+a(d.container).height()}return b<=a(c).offset().top-d.threshold};a.rightoffold=function(c,d){if(d.container===undefined||d.container===window){var b=a(window).width()+a(window).scrollLeft()}else{var b=a(d.container).offset().left+a(d.container).width()}return b<=a(c).offset().left-d.threshold};a.abovethetop=function(c,d){if(d.container===undefined||d.container===window){var b=a(window).scrollTop()}else{var b=a(d.container).offset().top}return b>=a(c).offset().top+d.threshold+a(c).height()};a.leftofbegin=function(c,d){if(d.container===undefined||d.container===window){var b=a(window).scrollLeft()}else{var b=a(d.container).offset().left}return b>=a(c).offset().left+d.threshold+a(c).width()};a.extend(a.expr[":"],{"below-the-fold":"$.belowthefold(a, {threshold : 0, container: window})","above-the-fold":"!$.belowthefold(a, {threshold : 0, container: window})","right-of-fold":"$.rightoffold(a, {threshold : 0, container: window})","left-of-fold":"!$.rightoffold(a, {threshold : 0, container: window})"})})(jQuery);new function(l){var m=l.separator||"&";var n=l.spaces===false?false:true;var i=l.suffix===false?"":"[]";var j=l.prefix===false?false:true;var h=j?l.hash===true?"#":"?":"";var k=l.numbers===false?false:true;jQuery.query=new function(){var d=function(e,f){return e!=undefined&&e!==null&&(!!f?e.constructor==f:true)};var c=function(f){var e,g=/\[([^[]*)\]/g,u=/^([^[]+)(\[.*\])?$/.exec(f),t=u[1],s=[];while(e=g.exec(u[2])){s.push(e[1])}return[t,s]};var a=function(o,u,v){var g,w=u.shift();if(typeof o!="object"){o=null}if(w===""){if(!o){o=[]}if(d(o,Array)){o.push(u.length==0?v:a(null,u.slice(0),v))}else{if(d(o,Object)){var x=0;while(o[x++]!=null){}o[--x]=u.length==0?v:a(o[x],u.slice(0),v)}else{o=[];o.push(u.length==0?v:a(null,u.slice(0),v))}}}else{if(w&&w.match(/^\s*[0-9]+\s*$/)){var e=parseInt(w,10);if(!o){o=[]}o[e]=u.length==0?v:a(o[e],u.slice(0),v)}else{if(w){var e=w.replace(/^\s*|\s*$/g,"");if(!o){o={}}if(d(o,Array)){var f={};for(var x=0;x<o.length;++x){f[x]=o[x]}o=f}o[e]=u.length==0?v:a(o[e],u.slice(0),v)}else{return v}}}return o};var b=function(f){var e=this;e.keys={};if(f.queryObject){jQuery.each(f.get(),function(p,g){e.SET(p,g)})}else{jQuery.each(arguments,function(){var g=""+this;g=g.replace(/^[?#]/,"");g=g.replace(/[;&]$/,"");if(n){g=g.replace(/[+]/g," ")}jQuery.each(g.split(/[&;]/),function(){var r=decodeURIComponent(this.split("=")[0]||"");var q=decodeURIComponent(this.split("=")[1]||"");if(!r){return}if(k){if(/^[+-]?[0-9]+\.[0-9]*$/.test(q)){q=parseFloat(q)}else{if(/^[+-]?[0-9]+$/.test(q)){q=parseInt(q,10)}}}q=(!q&&q!==0)?true:q;if(q!==false&&q!==true&&typeof q!="number"){q=q}e.SET(r,q)})})}return e};b.prototype={queryObject:true,has:function(f,e){var g=this.get(f);return d(g,e)},GET:function(e){if(!d(e)){return this.keys}var f=c(e),r=f[0],g=f[1];var q=this.keys[r];while(q!=null&&g.length!=0){q=q[g.shift()]}return typeof q=="number"?q:q||""},get:function(f){var e=this.GET(f);if(d(e,Object)){return jQuery.extend(true,{},e)}else{if(d(e,Array)){return e.slice(0)}}return e},SET:function(e,g){var u=!d(g)?null:g;var f=c(e),v=f[0],s=f[1];var t=this.keys[v];this.keys[v]=a(t,s.slice(0),u);return this},set:function(f,e){return this.copy().SET(f,e)},REMOVE:function(e){return this.SET(e,null).COMPACT()},remove:function(e){return this.copy().REMOVE(e)},EMPTY:function(){var e=this;jQuery.each(e.keys,function(f,g){delete e.keys[f]});return e},load:function(f){var g=f.replace(/^.*?[#](.+?)(?:\?.+)?$/,"$1");var e=f.replace(/^.*?[?](.+?)(?:#.+)?$/,"$1");return new b(f.length==e.length?"":e,f.length==g.length?"":g)},empty:function(){return this.copy().EMPTY()},copy:function(){return new b(this)},COMPACT:function(){function e(g){var p=typeof g=="object"?d(g,Array)?[]:{}:g;if(typeof g=="object"){function f(o,t,s){if(d(o,Array)){o.push(s)}else{o[t]=s}}jQuery.each(g,function(r,o){if(!d(o)){return true}f(p,r,e(o))})}return p}this.keys=e(this.keys);return this},compact:function(){return this.copy().COMPACT()},toString:function(){var v=0,g=[],s=[],e=this;var u=function(o){o=o+"";o=encodeURIComponent(o);if(n){o=o.replace(/%20/g,"+")}return o};var f=function(r,q,p){if(!d(p)||p===false){return}var o=[u(q)];if(p!==true){o.push("=");o.push(u(p))}r.push(o.join(""))};var t=function(p,q){var o=function(r){return !q||q==""?[r].join(""):[q,"[",r,"]"].join("")};jQuery.each(p,function(x,r){if(typeof r=="object"){t(r,o(x))}else{f(s,o(x),r)}})};t(this.keys);if(s.length>0){g.push(h)}g.push(s.join(m));return g.join("")}};return new b(location.search,location.hash)}}(jQuery.query||{});(function(c){var a=c.scrollTo=function(d,f,g){c(window).scrollTo(d,f,g)};a.defaults={axis:"xy",duration:parseFloat(c.fn.jquery)>=1.3?0:1};a.window=function(d){return c(window)._scrollable()};c.fn._scrollable=function(){return this.map(function(){var d=this,f=!d.nodeName||c.inArray(d.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!f){return d}var g=(d.contentWindow||d).document||d.ownerDocument||d;return c.browser.safari||g.compatMode=="BackCompat"?g.body:g.documentElement})};c.fn.scrollTo=function(f,e,d){if(typeof e=="object"){d=e;e=0}if(typeof d=="function"){d={onAfter:d}}if(f=="max"){f=9000000000}d=c.extend({},a.defaults,d);e=e||d.speed||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){e/=2}d.offset=b(d.offset);d.over=b(d.over);return this._scrollable().each(function(){var n=this,l=c(n),m=f,j,k={},h=l.is("html,body");switch(typeof m){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(m)){m=b(m);break}m=c(m,this);case"object":if(m.is||m.style){j=(m=c(m)).offset()}}c.each(d.axis.split(""),function(q,r){var t=r=="x"?"Left":"Top",s=t.toLowerCase(),v="scroll"+t,p=n[v],g=a.max(n,r);if(j){k[v]=j[s]+(h?0:p-l.offset()[s]);if(d.margin){k[v]-=parseInt(m.css("margin"+t))||0;k[v]-=parseInt(m.css("border"+t+"Width"))||0}k[v]+=d.offset[s]||0;if(d.over[s]){k[v]+=m[r=="x"?"width":"height"]()*d.over[s]}}else{var u=m[s];k[v]=u.slice&&u.slice(-1)=="%"?parseFloat(u)/100*g:u}if(/^\d+$/.test(k[v])){k[v]=k[v]<=0?0:Math.min(k[v],g)}if(!q&&d.queue){if(p!=k[v]){i(d.onAfterFirst)}delete k[v]}});i(d.onAfter);function i(g){l.animate(k,e,d.easing,g&&function(){g.call(this,f,d)})}}).end()};a.max=function(g,j){var n=j=="x"?"Width":"Height",k="scroll"+n;if(!c(g).is("html,body")){return g[k]-c(g)[n.toLowerCase()]()}var o="client"+n,f=g.ownerDocument.documentElement,d=g.ownerDocument.body;return Math.max(f[k],d[k])-Math.min(f[o],d[o])};function b(d){return typeof d=="object"?d:{top:d,left:d}}})(jQuery);(function(c){c.fn.superfish=function(a){var n=c.fn.superfish,b=n.c,o=c(['<span class="',b.arrowClass,'"> &#187;</span>'].join("")),l=function(){var f=c(this),e=q(f);clearTimeout(e.sfTimer);f.showSuperfishUl().siblings().hideSuperfishUl()},p=function(){var g=c(this),e=q(g),f=n.op;clearTimeout(e.sfTimer);e.sfTimer=setTimeout(function(){f.retainPath=(c.inArray(g[0],f.$path)>-1);g.hideSuperfishUl();if(f.$path.length&&g.parents(["li.",f.hoverClass].join("")).length<1){l.call(f.$path)}},f.delay)},q=function(f){var e=f.parents(["ul.",b.menuClass,":first"].join(""))[0];n.op=n.o[e.serial];return e},m=function(e){e.addClass(b.anchorClass).append(o.clone())};return this.each(function(){var g=this.serial=n.o.length;var e=c.extend({},n.defaults,a);e.$path=c("li."+e.pathClass,this).slice(0,e.pathLevels).each(function(){c(this).addClass([e.hoverClass,b.bcClass].join(" ")).filter("li:has(ul)").removeClass(e.pathClass)});n.o[g]=n.op=e;c("li:has(ul)",this)[(c.fn.hoverIntent&&!e.disableHI)?"hoverIntent":"hover"](l,p).each(function(){if(e.autoArrows){m(c(">a:first-child",this))}}).not("."+b.bcClass).hideSuperfishUl();var f=c("a",this);f.each(function(i){var h=f.eq(i).parents("li");f.eq(i).focus(function(){l.call(h)}).blur(function(){p.call(h)})});e.onInit.call(this)}).each(function(){var e=[b.menuClass];if(n.op.dropShadows&&!(c.browser.msie&&c.browser.version<7)){e.push(b.shadowClass)}c(this).addClass(e.join(" "))})};var d=c.fn.superfish;d.o=[];d.op={};d.IE7fix=function(){var a=d.op;if(c.browser.msie&&c.browser.version>6&&a.dropShadows&&a.animation.opacity!=undefined){this.toggleClass(d.c.shadowClass+"-off")}};d.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"};d.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:true,dropShadows:true,disableHI:false,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};c.fn.extend({hideSuperfishUl:function(){var a=d.op,b=(a.retainPath===true)?a.$path:"";a.retainPath=false;var f=c(["li.",a.hoverClass].join(""),this).add(this).not(b).removeClass(a.hoverClass).find(">ul").hide().css("visibility","hidden");a.onHide.call(f);return this},showSuperfishUl:function(){var a=d.op,b=d.c.shadowClass+"-off",f=this.addClass(a.hoverClass).find(">ul:hidden").css("visibility","visible");d.IE7fix.call(f);a.onBeforeShow.call(f);f.animate(a.animation,a.speed,function(){d.IE7fix.call(f);a.onShow.call(f)});return this}})})(jQuery);(function(d){var e=["swfupload_loaded_handler","file_queued_handler","file_queue_error_handler","file_dialog_start_handler","file_dialog_complete_handler","upload_start_handler","upload_progress_handler","upload_error_handler","upload_success_handler","upload_complete_handler","queue_complete_handler"];var f=[];d.fn.swfupload=function(){var a=d.makeArray(arguments);return this.each(function(){var j;if(a.length==1&&typeof(a[0])=="object"){j=d(this).data("__swfu");if(!j){var b=a[0];var c=d(this);var k=[];d.merge(k,e);d.merge(k,f);d.each(k,function(g,h){var i=h.replace(/_handler$/,"").replace(/_([a-z])/g,function(){return arguments[1].toUpperCase()});b[h]=function(){var n=d.Event(i);c.trigger(n,d.makeArray(arguments));return !n.isDefaultPrevented()}});d(this).data("__swfu",new SWFUpload(b))}}else{if(a.length>0&&typeof(a[0])=="string"){var l=a.shift();j=d(this).data("__swfu");if(j&&j[l]){j[l].apply(j,a)}}}})};d.swfupload={additionalHandlers:function(){if(arguments.length===0){return f.slice()}else{d(arguments).each(function(a,b){d.merge(f,d.makeArray(b))})}},defaultHandlers:function(){return e.slice()},getInstance:function(a){return d(a).data("__swfu")}}})(jQuery);(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:true,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms")}this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s)}else{alert(s)}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug=""}if(table.tBodies.length==0){return}var rows=table.tBodies[0].rows;if(rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter)}else{if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter)}}if(!p){p=detectParserForColumn(table,rows,-1,i)}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n"}list.push(p)}}if(table.config.debug){log(parsersDebug)}return list}function detectParserForColumn(table,rows,rowIndex,cellIndex){var l=parsers.length,node=false,nodeValue=false,keepLooking=true;while(nodeValue==""&&keepLooking){rowIndex++;if(rows[rowIndex]){node=getNodeFromRowAndCellIndex(rows,rowIndex,cellIndex);nodeValue=trimAndGetNodeText(table.config,node);if(table.config.debug){log("Checking if value was empty on row:"+rowIndex)}}else{keepLooking=false}}for(var i=1;i<l;i++){if(parsers[i].is(nodeValue,table,node)){return parsers[i]}}return parsers[0]}function getNodeFromRowAndCellIndex(rows,rowIndex,cellIndex){return rows[rowIndex].cells[cellIndex]}function trimAndGetNodeText(config,node){return $.trim(getElementText(config,node))}function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i]}}return false}function buildCache(table){if(table.config.debug){var cacheTime=new Date()}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=$(table.tBodies[0].rows[i]),cols=[];if(c.hasClass(table.config.cssChildRow)){cache.row[cache.row.length-1]=cache.row[cache.row.length-1].add(c);continue}cache.row.push(c);for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c[0].cells[j]),table,c[0].cells[j]))}cols.push(cache.normalized.length);cache.normalized.push(cols);cols=null}if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime)}return cache}function getElementText(config,node){var text="";if(!node){return""}if(!config.supportsTextContent){config.supportsTextContent=node.textContent||false}if(config.textExtraction=="simple"){if(config.supportsTextContent){text=node.textContent}else{if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){text=node.childNodes[0].innerHTML}else{text=node.innerHTML}}}else{if(typeof(config.textExtraction)=="function"){text=config.textExtraction(node)}else{text=$(node).text()}}return text}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){var pos=n[i][checkCell];rows.push(r[pos]);if(!table.config.appender){var l=r[pos].length;for(var j=0;j<l;j++){tableBody[0].appendChild(r[pos][j])}}}if(table.config.appender){table.config.appender(table,rows)}rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime)}applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd")},0)}function buildHeaders(table){if(table.config.debug){var time=new Date()}var meta=($.metadata)?true:false;var header_index=computeTableHeaderCellIndexes(table);$tableHeaders=$(table.config.selectorHeaders,table).each(function(index){this.column=header_index[this.parentNode.rowIndex+"-"+this.cellIndex];this.order=formatSortingOrder(table.config.sortInitialOrder);this.count=this.order;if(checkHeaderMetadata(this)||checkHeaderOptions(table,index)){this.sortDisabled=true}if(checkHeaderOptionsSortingLocked(table,index)){this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(table,index)}if(!this.sortDisabled){var $th=$(this).addClass(table.config.cssHeader);if(table.config.onRenderHeader){table.config.onRenderHeader.apply($th)}}table.config.headerList[index]=this});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders)}return $tableHeaders}function computeTableHeaderCellIndexes(t){var matrix=[];var lookup={};var thead=t.getElementsByTagName("THEAD")[0];var trs=thead.getElementsByTagName("TR");for(var i=0;i<trs.length;i++){var cells=trs[i].cells;for(var j=0;j<cells.length;j++){var c=cells[j];var rowIndex=c.parentNode.rowIndex;var cellId=rowIndex+"-"+c.cellIndex;var rowSpan=c.rowSpan||1;var colSpan=c.colSpan||1;var firstAvailCol;if(typeof(matrix[rowIndex])=="undefined"){matrix[rowIndex]=[]}for(var k=0;k<matrix[rowIndex].length+1;k++){if(typeof(matrix[rowIndex][k])=="undefined"){firstAvailCol=k;break}}lookup[cellId]=firstAvailCol;for(var k=rowIndex;k<rowIndex+rowSpan;k++){if(typeof(matrix[k])=="undefined"){matrix[k]=[]}var matrixrow=matrix[k];for(var l=firstAvailCol;l<firstAvailCol+colSpan;l++){matrixrow[l]="x"}}}}return lookup}function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++))}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell)}}}return arr}function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true}return false}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true}return false}function checkHeaderOptionsSortingLocked(table,i){if((table.config.headers[i])&&(table.config.headers[i].lockedOrder)){return table.config.headers[i].lockedOrder}return false}function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table)}}function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i]}}}function formatSortingOrder(v){if(typeof(v)!="Number"){return(v.toLowerCase()=="desc")?1:0}else{return(v==1)?1:0}}function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true}}return false}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this)}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]])}}function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$("<colgroup>");$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($("<col>").css("width",$(this).width()))});$(table).prepend(colgroup)}}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date()}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(table.config.parsers[c].type=="text")?((order==0)?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c)):((order==0)?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c));var e="e"+i;dynamicExp+="var "+e+" = "+s;dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; "}dynamicExp+="return 0; ";dynamicExp+="}; ";if(table.config.debug){benchmark("Evaling expression:"+dynamicExp,new Date())}eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime)}return cache}function makeSortFunction(type,direction,index){var a="a["+index+"]",b="b["+index+"]";if(type=="text"&&direction=="asc"){return"("+a+" == "+b+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+a+" < "+b+") ? -1 : 1 )));"}else{if(type=="text"&&direction=="desc"){return"("+a+" == "+b+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+b+" < "+a+") ? -1 : 1 )));"}else{if(type=="numeric"&&direction=="asc"){return"("+a+" === null && "+b+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+a+" - "+b+"));"}else{if(type=="numeric"&&direction=="desc"){return"("+a+" === null && "+b+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+b+" - "+a+"));"}}}}}function makeSortText(i){return"((a["+i+"] < b["+i+"]) ? -1 : ((a["+i+"] > b["+i+"]) ? 1 : 0));"}function makeSortTextDesc(i){return"((b["+i+"] < a["+i+"]) ? -1 : ((b["+i+"] > a["+i+"]) ? 1 : 0));"}function makeSortNumeric(i){return"a["+i+"]-b["+i+"];"}function makeSortNumericDesc(i){return"b["+i+"]-a["+i+"];"}function sortText(a,b){if(table.config.sortLocaleCompare){return a.localeCompare(b)}return((a<b)?-1:((a>b)?1:0))}function sortTextDesc(a,b){if(table.config.sortLocaleCompare){return b.localeCompare(a)}return((b<a)?-1:((b>a)?1:0))}function sortNumeric(a,b){return a-b}function sortNumericDesc(a,b){return b-a}function getCachedSortType(parsers,i){return parsers[i].type}this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies){return}var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$.data(this,"tablesorter",config);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){$this.trigger("sortStart");var $cell=$(this);var i=this.column;this.order=this.count++%2;if(this.lockedOrder){this.order=this.lockedOrder}if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j])}}}config.sortList.push([i,this.order])}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2}}}else{config.sortList.push([i,this.order])}}setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache))},1);return false}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false}});$this.bind("update",function(){var me=this;setTimeout(function(){me.config.parsers=buildParserCache(me,$headers);cache=buildCache(me)},1)}).bind("updateCell",function(e,cell){var config=this.config;var pos=[(cell.parentNode.rowIndex-1),cell.cellIndex];cache.normalized[pos[0]][pos[1]]=config.parsers[pos[1]].format(getElementText(config,cell),cell)}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache))}).bind("appendCache",function(){appendToTable(this,cache)}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this)}).bind("applyWidgets",function(){applyWidget(this)});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList])}applyWidget(this)})};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false}}if(a){parsers.push(parser)}};this.addWidget=function(widget){widgets.push(widget)};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i};this.isDigit=function(s,config){return/^[-+]?\d*$/.test($.trim(s.replace(/[,.']/g,"")))};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild){this.removeChild(this.firstChild)}}empty.apply(table.tBodies[0])}else{table.tBodies[0].innerHTML=""}}}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true},format:function(s){return $.trim(s.toLocaleLowerCase())},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c)},format:function(s){return $.tablesorter.formatFloat(s)},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[£$€?.]/.test(s)},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[£$€]/g),""))},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s)},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item}else{r+=item}}return $.tablesorter.formatFloat(r)},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s)},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s)},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s))},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""))},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s)},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2")}else{if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1")}else{if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")}}}return $.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s)},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime())},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?"sortValue":c.parserMetadataName;return $(cell).metadata()[p]},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date()}var $tr,row=-1,odd;$("tr:visible",table.tBodies[0]).each(function(i){$tr=$(this);if(!$tr.hasClass(table.config.cssChildRow)){row++}odd=(row%2==0);$tr.removeClass(table.config.widgetZebra.css[odd?0:1]).addClass(table.config.widgetZebra.css[odd?1:0])});if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time)}}})})(jQuery);(function(b){b.extend({tablesorterPager:new function(){function q(f,d,c){var e=b(f.cssPageDisplay,f.container).val(d+f.seperator+c)}function r(d,e){var c=d.config;c.size=e;c.totalPages=Math.ceil(c.totalRows/c.size);c.pagerPositionSet=false;o(d);n(d)}function n(e){var c=e.config;if(!c.pagerPositionSet&&c.positionFixed){var c=e.config,d=b(e);if(d.offset){c.container.css({top:d.offset().top+d.height()+"px",position:"absolute"})}c.pagerPositionSet=true}}function m(d){var c=d.config;c.page=0;o(d)}function p(d){var c=d.config;c.page=(c.totalPages-1);o(d)}function a(d){var c=d.config;c.page++;if(c.page>=(c.totalPages-1)){c.page=(c.totalPages-1)}o(d)}function l(d){var c=d.config;c.page--;if(c.page<=0){c.page=0}o(d)}function o(d){var c=d.config;if(c.page<0||c.page>(c.totalPages-1)){c.page=0}k(d,c.rowsCopy)}function k(s,j){var x=s.config;var f=j.length;var i=(x.page*x.size);var c=(i+x.size);if(c>j.length){c=j.length}var g=b(s.tBodies[0]);b.tablesorter.clearTableBody(s);for(var d=i;d<c;d++){var h=j[d];var f=h.length;for(var e=0;e<f;e++){g[0].appendChild(h[e])}}n(s,g);b(s).trigger("applyWidgets");if(x.page>=x.totalPages){p(s)}x.updatePageDisplayFn(x,x.page+1,x.totalPages)}this.appender=function(e,d){var c=e.config;c.rowsCopy=d;c.totalRows=d.length;c.totalPages=Math.ceil(c.totalRows/c.size);k(e,d)};this.defaults={size:10,offset:0,page:0,totalRows:0,totalPages:0,container:null,cssNext:".next",cssPrev:".prev",cssFirst:".first",cssLast:".last",cssPageDisplay:".pagedisplay",cssPageSize:".pagesize",seperator:"/",positionFixed:true,appender:this.appender,updatePageDisplayFn:q};this.construct=function(c){return this.each(function(){config=b.extend(this.config,b.tablesorterPager.defaults,c);var f=this,e=config.container;b(this).trigger("appendCache");config.size=parseInt(b(".pagesize",e).val());var d=parseInt(b(".pagesize",e).val(),10);if(!isNaN(d)){config.size=d}b(config.cssFirst,e).click(function(){m(f);return false});b(config.cssNext,e).click(function(){a(f);return false});b(config.cssPrev,e).click(function(){l(f);return false});b(config.cssLast,e).click(function(){p(f);return false});b(config.cssPageSize,e).change(function(){r(f,parseInt(b(this).val()));return false})})}}});b.fn.extend({tablesorterPager:b.tablesorterPager.construct})})(jQuery);(function(i){i.fn.tabby=function(c){var b=i.extend({},i.fn.tabby.defaults,c);var a=i.fn.tabby.pressed;return this.each(function(){$this=i(this);var d=i.meta?i.extend({},b,$this.data()):b;$this.bind("keydown",function(e){var l=i.fn.tabby.catch_kc(e);if(16==l){a.shft=true}if(17==l){a.ctrl=true;setTimeout("$.fn.tabby.pressed.ctrl = false;",1000)}if(18==l){a.alt=true;setTimeout("$.fn.tabby.pressed.alt = false;",1000)}if(9==l&&!a.ctrl&&!a.alt){e.preventDefault;a.last=l;setTimeout("$.fn.tabby.pressed.last = null;",0);h(i(e.target).get(0),a.shft,d);return false}}).bind("keyup",function(e){if(16==i.fn.tabby.catch_kc(e)){a.shft=false}}).bind("blur",function(e){if(9==a.last){i(e.target).one("focus",function(l){a.last=null}).get(0).focus()}})})};i.fn.tabby.catch_kc=function(a){return a.keyCode?a.keyCode:a.charCode?a.charCode:a.which};i.fn.tabby.pressed={shft:false,ctrl:false,alt:false,last:null};function f(a){if(window.console&&window.console.log){window.console.log("textarea count: "+a.size())}}function h(a,b,c){var d=a.scrollTop;if(a.setSelectionRange){g(a,b,c)}else{if(document.selection){j(a,b,c)}}a.scrollTop=d}i.fn.tabby.defaults={tabString:String.fromCharCode(9)};function g(x,A,C){var D=x.selectionStart;var a=x.selectionEnd;if(D==a){if(A){if("\t"==x.value.substring(D-C.tabString.length,D)){x.value=x.value.substring(0,D-C.tabString.length)+x.value.substring(D);x.focus();x.setSelectionRange(D-C.tabString.length,D-C.tabString.length)}else{if("\t"==x.value.substring(D,D+C.tabString.length)){x.value=x.value.substring(0,D)+x.value.substring(D+C.tabString.length);x.focus();x.setSelectionRange(D,D)}}}else{x.value=x.value.substring(0,D)+C.tabString+x.value.substring(D);x.focus();x.setSelectionRange(D+C.tabString.length,D+C.tabString.length)}}else{var B=x.value.split("\n");var E=new Array();var o=0;var y=0;var z=false;for(var d in B){y=o+B[d].length;E.push({start:o,end:y,selected:(o<=D&&y>D)||(y>=a&&o<a)||(o>D&&y<a)});o=y+1}var w=0;for(var d in E){if(E[d].selected){var b=E[d].start+w;if(A&&C.tabString==x.value.substring(b,b+C.tabString.length)){x.value=x.value.substring(0,b)+x.value.substring(b+C.tabString.length);w-=C.tabString.length}else{if(!A){x.value=x.value.substring(0,b)+C.tabString+x.value.substring(b);w+=C.tabString.length}}}}x.focus();var c=D+((w>0)?C.tabString.length:(w<0)?-C.tabString.length:0);var e=a+w;x.setSelectionRange(c,e)}}function j(D,d,M){var E=document.selection.createRange();if(D==E.parentElement()){if(""==E.text){if(d){var H=E.getBookmark();E.moveStart("character",-M.tabString.length);if(M.tabString==E.text){E.text=""}else{E.moveToBookmark(H);E.moveEnd("character",M.tabString.length);if(M.tabString==E.text){E.text=""}}E.collapse(true);E.select()}else{E.text=M.tabString;E.collapse(false);E.select()}}else{var I=E.text;var F=I.length;var o=I.split("\r\n");var a=document.body.createTextRange();a.moveToElementText(D);a.setEndPoint("EndToStart",E);var G=a.text;var c=G.split("\r\n");var C=G.length;var b=document.body.createTextRange();b.moveToElementText(D);b.setEndPoint("StartToEnd",E);var e=b.text;var L=document.body.createTextRange();L.moveToElementText(D);L.setEndPoint("StartToEnd",a);var B=L.text;var K=i(D).html();i("#r3").text(C+" + "+F+" + "+e.length+" = "+K.length);if((C+B.length)<K.length){c.push("");C+=2;if(d&&M.tabString==o[0].substring(0,M.tabString.length)){o[0]=o[0].substring(M.tabString.length)}else{if(!d){o[0]=M.tabString+o[0]}}}else{if(d&&M.tabString==c[c.length-1].substring(0,M.tabString.length)){c[c.length-1]=c[c.length-1].substring(M.tabString.length)}else{if(!d){c[c.length-1]=M.tabString+c[c.length-1]}}}for(var A=1;A<o.length;A++){if(d&&M.tabString==o[A].substring(0,M.tabString.length)){o[A]=o[A].substring(M.tabString.length)}else{if(!d){o[A]=M.tabString+o[A]}}}if(1==c.length&&0==C){if(d&&M.tabString==o[0].substring(0,M.tabString.length)){o[0]=o[0].substring(M.tabString.length)}else{if(!d){o[0]=M.tabString+o[0]}}}if((C+F+e.length)<K.length){o.push("");F+=2}a.text=c.join("\r\n");E.text=o.join("\r\n");var J=document.body.createTextRange();J.moveToElementText(D);if(0<C){J.setEndPoint("StartToEnd",a)}else{J.setEndPoint("StartToStart",a)}J.setEndPoint("EndToEnd",E);J.select()}}}})(jQuery);(function(r){var m,l;var q=0;var t=32;var p;r.fn.TextAreaResizer=function(){return this.each(function(){m=r(this).addClass("processed"),l=null;r(this).wrap('<div class="resizable-textarea"><span></span></div>').parent().append(r('<div class="grippie"></div>').bind("mousedown",{el:this},s));var a=r("div.grippie",r(this).parent())[0];a.style.marginRight=(a.offsetWidth-r(this)[0].offsetWidth)+"px"})};function s(a){m=r(a.data.el);m.blur();q=k(a).y;l=m.height()-q;m.animate({opacity:"0.25"},{duration:"fast"});r(document).mousemove(n).mouseup(o);return false}function n(a){var c=k(a).y;var b=l+c;if(q>=(c)){b-=5}q=c;b=Math.max(t,b);m.height(b+"px");if(b<t){o(a)}return false}function o(a){r(document).unbind("mousemove",n).unbind("mouseup",o);m.css("opacity","");m.focus();m=null;l=null;q=0}function k(a){return{x:a.clientX+document.documentElement.scrollLeft,y:a.clientY+document.documentElement.scrollTop}}})(jQuery);(function(e){var b={},k,m,o,j=e.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),a=false;e.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){e.tooltip.blocked=!e.tooltip.blocked}};e.fn.extend({tooltip:function(p){p=e.extend({},e.tooltip.defaults,p);h(p);return this.each(function(){e.data(this,"tooltip",p);this.tOpacity=b.parent.css("opacity");this.tooltipText=this.title;e(this).removeAttr("title");this.alt=""}).mouseover(l).mouseout(f).click(f)},fixPNG:j?function(){return this.each(function(){var p=e(this).css("backgroundImage");if(p.match(/^url\(["']?(.*\.png)["']?\)$/i)){p=RegExp.$1;e(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+p+"')"}).each(function(){var q=e(this).css("position");if(q!="absolute"&&q!="relative"){e(this).css("position","relative")}})}})}:function(){return this},unfixPNG:j?function(){return this.each(function(){e(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){e(this)[e(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function h(p){if(b.parent){return}b.parent=e('<div id="'+p.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(e.fn.bgiframe){b.parent.bgiframe()}b.title=e("h3",b.parent);b.body=e("div.body",b.parent);b.url=e("div.url",b.parent)}function c(p){return e.data(p,"tooltip")}function g(p){if(c(this).delay){o=setTimeout(n,c(this).delay)}else{n()}a=!!c(this).track;e(document.body).bind("mousemove",d);d(p)}function l(){if(e.tooltip.blocked||this==k||(!this.tooltipText&&!c(this).bodyHandler)){return}k=this;m=this.tooltipText;if(c(this).bodyHandler){b.title.hide();var s=c(this).bodyHandler.call(this);if(s.nodeType||s.jquery){b.body.empty().append(s)}else{b.body.html(s)}b.body.show()}else{if(c(this).showBody){var r=m.split(c(this).showBody);b.title.html(r.shift()).show();b.body.empty();for(var q=0,p;(p=r[q]);q++){if(q>0){b.body.append("<br/>")}b.body.append(p)}b.body.hideWhenEmpty()}else{b.title.html(m).show();b.body.hide()}}if(c(this).showURL&&e(this).url()){b.url.html(e(this).url().replace("http://","")).show()}else{b.url.hide()}b.parent.addClass(c(this).extraClass);if(c(this).fixPNG){b.parent.fixPNG()}g.apply(this,arguments)}function n(){o=null;if((!j||!e.fn.bgiframe)&&c(k).fade){if(b.parent.is(":animated")){b.parent.stop().show().fadeTo(c(k).fade,k.tOpacity)}else{b.parent.is(":visible")?b.parent.fadeTo(c(k).fade,k.tOpacity):b.parent.fadeIn(c(k).fade)}}else{b.parent.show()}d()}function d(s){if(e.tooltip.blocked){return}if(s&&s.target.tagName=="OPTION"){return}if(!a&&b.parent.is(":visible")){e(document.body).unbind("mousemove",d)}if(k==null){e(document.body).unbind("mousemove",d);return}b.parent.removeClass("viewport-right").removeClass("viewport-bottom");var u=b.parent[0].offsetLeft;var t=b.parent[0].offsetTop;if(s){u=s.pageX+c(k).left;t=s.pageY+c(k).top;var q="auto";if(c(k).positionLeft){q=e(window).width()-u;u="auto"}b.parent.css({left:u,right:q,top:t})}var p=i(),r=b.parent[0];if(p.x+p.cx<r.offsetLeft+r.offsetWidth){u-=r.offsetWidth+20+c(k).left;b.parent.css({left:u+"px"}).addClass("viewport-right")}if(p.y+p.cy<r.offsetTop+r.offsetHeight){t-=r.offsetHeight+20+c(k).top;b.parent.css({top:t+"px"}).addClass("viewport-bottom")}}function i(){return{x:e(window).scrollLeft(),y:e(window).scrollTop(),cx:e(window).width(),cy:e(window).height()}}function f(r){if(e.tooltip.blocked){return}if(o){clearTimeout(o)}k=null;var q=c(this);function p(){b.parent.removeClass(q.extraClass).hide().css("opacity","")}if((!j||!e.fn.bgiframe)&&q.fade){if(b.parent.is(":animated")){b.parent.stop().fadeTo(q.fade,0,p)}else{b.parent.stop().fadeOut(q.fade,p)}}else{p()}if(c(this).fixPNG){b.parent.unfixPNG()}}})(jQuery);
/*!
 * PukiWiki Advance - Yet another WikiWikiWeb clone.
 * Pukiwiki skin script for jQuery
 * Copyright (c)2010-2011 PukiWiki Advance Developer Team
 *              2010      Logue <http://logue.be/> All rights reserved.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
var _document=document;var _window=window;var _ua=navigator.userAgent;if(self.location!==top.location){top.location=self.location}var pkwkInit=pkwkBeforeInit=pkwkUnload=pkwkBeforeUnload=new Array(0);var pukiwiki={meta:{"@prefix":"<http://purl.org/net/ns/doas#>","@about":"<skin.js>",a:":JavaScript",title:"Pukiwiki skin script for jQuery",created:"2008-11-25",release:{revision:"2.2.21",created:"2011-05-10"},author:{name:"Logue",homepage:"<http://logue.be/>"},license:"<http://www.gnu.org/licenses/gpl-2.0.html>"},skin:{},init:function(){var b=this;var a=$("link[rel=canonical]")[0].href;var f=((_document.location.protocol==="https:")?"https:":"http:")+"//";this.body=this.skin.body?this.skin.body:"#body";$(":input").attr("disabled","disabled");if(typeof(FACEBOOK_APPID)!=="undefined"){$("body").append('<div id="fb-root"></div>');if(!$.query.get("cmd")){if(!PAGE.match(/^:|FormatRules|RecentChanges|RecentDeleted|InterWikiName|AutoAliasName|MenuBar|SideBar|Navigation|Glossary/i)){$(this.body).append('<hr /><div style="margin-left:2em;"><fb:like send="true" font="arial" show_faces="true" href="'+a+'"></fb:like><fb:comments href="'+a+'" publish_feed="true" width="650" numposts="10" migrated="1" ></fb:comments></div>')}}$.getScript(f+"connect.facebook.net/"+LANG+"/all.js",function(){FB.init({appId:FACEBOOK_APPID,status:true,cookie:true,xfbml:true});FB.Event.subscribe("auth.login",function(){_window.location.reload()});if($("form").length!==0&&$.query.get("cmd")!=="guiedit"){$("form").each(function(){var g='<input type="checkbox" name="fb_publish" id="fb_publish" checked="checked" /> <label for="fb_publish"><img src="'+IMAGE_DIR+'social/facebook.png" width="16" height="16" title="Publish to Facebook" alt="Facebook" /></label>';var e=$(this).find("*[name=msg]");if(e.length!==0){$(this).find("input[type=submit]").before(g);$(this).submit(function(){FB.streamPublish(e.val(),null,null,4,null,null,true,"default")})}});b.fb=true}})}else{this.fb=false}if(_ua.indexOf("MSIE 6")>=0){try{_document.execCommand("BackgroundImageCache",false,true)}catch(d){}}var c=$("meta[name=generator]")[0].content;if(c.match(/[PukiPlus|Advance]/)){this.image_dir=IMAGE_DIR+"ajax/"}else{if(c.match(/plus/)){this.image_dir=SKIN_DIR+"theme/"+THEME_NAME+"/"}else{this.image_dir=SKIN_DIR+this.name+"/image/"}}this.enableHTML5();$.i18n(LANG);this.blockUI();this.suckerfish(".sf-menu");this.linkattrs();this.preptoc(this.body);this.setAnchor();if($("textarea[name='msg']").length!==0&&$.query.get("cmd")!=="guiedit"){this.set_editform()}if($("input[name=msg]").length!==0){$(".comment_form").append('<div class="assistant ui-corner-all ui-widget-header ui-helper-clearfix"></div>');this.assistant()}if($("textarea[name='msg']").length!==0&&$.query.get("cmd")!=="guiedit"){$("textarea[name='msg']").addClass("resizable");$("textarea.resizable:not(.processed)").TextAreaResizer()}$("textarea").tabby();this.tablesorter.counter=0;this.tablesorter();if($(".attach_form").length!==0){this.set_uploader()}if(!$.support.boxModel){$.ajax({type:"GET",global:false,url:SKIN_DIR+"js/iepngfix/iepngfix_tilebg.js",dataType:"script"});$("img[src$=png], .pkwk-icon, .pkwk-symbol, .pkwk-icon_linktext").css({behavior:"url("+SKIN_DIR+"js/iepngfix/iepngfix.htc)"});$(this.body+"img[src!$=.png]").lazyload({placeholder:this.image_dir+"grey.gif",effect:"fadeIn"})}else{$(this.body+"img").lazyload({placeholder:this.image_dir+"grey.gif",effect:"fadeIn"})}$("#banner_box img").fadeTo(200,0.3);$("#banner_box img").hover(function(){$(this).fadeTo(200,1)},function(){$(this).fadeTo(200,0.3)});this.sh();this.glossaly();this.bad_behavior();if(location.hash){this.anchor_scroll(location.hash,true)}$("button, input[type=submit], input[type=reset], input[type=button]").button();$(".ui-state-default").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}).mousedown(function(){$(this).addClass("ui-state-active")}).mouseout(function(){$(this).removeClass("ui-state-active")});$(":input").removeAttr("disabled");$(".ui-button").button("option","disabled",false)},unload:function(a){if(a){a=a+" "}else{a=""}if($(a+"#msg").val()!==$(a+"#original").val()&&confirm($.i18n("pukiwiki","unload"))){this.appendChild(_document.createElement("input")).setAttribute("name","write");$('<input name="write" />').appendTo(this);$(a+"form").submit();alert($.i18n("pukiwiki","submit"))}else{}return false},enableHTML5:function(a){if(a){a=a+" "}else{a=""}if(!Modernizr.input.placeholder){$(a+"[placeholder]").each(function(){var d=$(this),c=d.attr("placeholder"),b="Gray",e=d.css("color");d.focus(function(){if(d.val()===c){d.val("").css("color",e)}}).blur(function(){if(d.val()===""){d.val(c).css("color",b)}else{if(d.val()===c){d.css("color",b)}}}).blur().parents("form").submit(function(){if(d.val()===c){d.val("")}})})}$(a+"a[rel*=noreferer]").click(function(){var b=$(this).attr("href");if(_ua.indexOf("MSIE",0)!==-1){var g=0;var f;if($(this).attr("target")==="_blank"){var e=_window.open("","","location=yes, menubar=yes, toolbar=yes, status=yes, resizable=yes, scrollbars=yes,");f=e.document}else{f=_document}f.open();f.write('<meta http-equiv="refresh" content="0;url='+b+'">');f.close();return false}else{if(b.match(/data:text\/html;charset=utf-8/)!==true){var c=['<html><head><script type="text/javascript"><!--','document.write(\'<meta http-equiv="refresh" content="0;url='+b+"\" />');","// --><\/script></head><body></body></html>"];$(this).attr("href","data:text/html;charset=utf-8,"+encodeURIComponent(c.join("\n")))}}})},register:{init:function(a){pkwkInit.push(a)},before_init:function(a){pkwkBeforeInit.push(a)},unload:function(a){pkwkUnload.push(a)},before_unload:function(a){pkwkBeforeUnload.push(a)}},suckerfish:function(b){var a={autoArrows:false,dropShadows:false};if(typeof(pukiwiki.skin.suckerfish)==="object"){a=this.skin.suckerfish}$(b).superfish(a)},setAnchor:function(b){var a=this;if(b){b=b+" "}else{b=""}$(b+".tabs").tabs();var c={opacity:"0.8",slideshowStart:'<span class="ui-icon ui-icon-play" style="margin:4px;"></span>',slideshowStop:'<span class="ui-icon ui-icon-stop" style="margin:4px;"></span>',current:$.i18n("colorbox","current"),previous:'<span class="ui-icon ui-icon-circle-arrow-e" style="margin:4px;"></span>',next:'<span class="ui-icon ui-icon-circle-arrow-w" style="margin:4px;"></span>',close:'<span class="ui-icon ui-icon-circle-close" style="margin:4px;"></span>',onOpen:function(){$(b+"#cboxOverlay").addClass("ui-widget-overlay");$(b+"#colorbox").addClass("ui-widget-content ui-corner-all");$(b+"#cboxPrevious").button();$(b+"#cboxNext").button();$(b+"#cboxClose").button()}};$(b+"a[href]").each(function(){var l=$(this);var f=$(this).attr("href");if(f.match(/\.(jpg|jpeg|gif|png|txt)$/i)){l.colorbox(c)}else{if(f.match(/\.(mp3|ogg|mp4)$/i)){a.music_player(this)}else{if(f.match(/cmd|plugin/i)){var m={};var g=f.slice(f.indexOf("?")+1).split("&");for(var h=0;h<g.length;h++){var k=g[h].split("=");try{m[k[0]]=decodeURIComponent(k[1]).replace(/\+/g," ").replace(/%2F/g,"/")}catch(j){}}if(m.plugin){m.cmd=m.plugin;m.plugin=undefined}if(m.cmd){if(typeof(m.file)!=="undefined"&&m.pcmd=="open"||typeof(m.openfile)!=="undefined"){var d;if(m.file){d=m.file;l.attr("href",SCRIPT+"?cmd="+m.cmd+"&pcmd="+m.pcmd+"&refer="+m.refer+"&age="+m.age+"&file="+d)}else{d=m.openfile;l.attr("href",SCRIPT+"?cmd="+m.cmd+"&refer="+m.refer+"&openfile="+d)}if(d.match(/\.(jpg|jpeg|gif|png|txt)$/i)){l.colorbox(c)}else{if(d.match(/\.(mp3|ogg|mp4)$/i)){a.music_player(this)}}}else{if(m.cmd=="qrcode"){l.attr("href",f+"&type=.gif");l.colorbox(c)}else{if(m.cmd.match(/attach|search|backup|source|newpage|template|freeze|rename|logview|tb|diff|referer|linklist|skeylist/i)&&(m.pcmd!=="list"||m.help==="true")){if(m.help=="true"){m={cmd:"read",page:"FormatRule"}}l.click(function(){a.ajax_dialog(m,b,function(){if((m.cmd=="attach"&&m.pcmd.match(/upload|info/i))||m.cmd.match(/attachref|read|backup/i)&&m.age!==""){a.bad_behavior(b+"div.window");a.set_uploader(b+"div.window");a.setAnchor(b+"div.window")}});return false})}}}}}}}if(f.match("#")){$(this).click(function(){a.anchor_scroll(f,true)})}})},ajax_dialog:function(e,c,f,d){var a=this;var b={modal:true,resizable:true,show:"fade",hide:"fade",width:"520px",dialogClass:"ajax_dialog",bgiframe:($.browser.msie&&$.browser.version>6)?true:false,open:function(){$(c+":input").attr("disabled","disabled");a.tablesorter(c+".window");a.glossaly(c+".window");if(typeof(f)==="function"){f()}$(c+"button, "+c+"input[type=submit], "+c+"input[type=reset], "+c+"input[type=button]").button();$(c+"form").disableOnSubmit();var g=this;$(c+".ui-widget-overlay").click(function(){$(g).dialog("close")});$(c+":input").removeAttr("disabled");$(c+".ui-button").button("option","disabled",false);return false},close:function(){$(this).remove()}};if(e.pcmd==="upload"){b.width="90%"}if(e.cmd.match(/logview|source|diff|edit|backup|read|referer/i)||e.help==="true"){b.width="90%";b.height=$(_window).height()*0.8|0}$.ajax({dataType:"json",url:SCRIPT,data:e,type:"GET",cache:true,timeout:30000,success:function(h){var g=$('<div class="window"></div>');if(typeof(d)==="function"){h=d(h)}b.title=h.title;h.body=h.body.replace(/<script[^>]*>[^<]+/ig,"");g.html(h.body).dialog(b)},error:function(k,h,i){var g=$('<div class="window"></div>');var j=['<div class="ui-state-error ui-corner-all" style="padding: 0 .7em;">','<p id="ajax_error"><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>'+h+"</p>","</div>"].join("\n");b.title="Error!";g.html(j).dialog(b);try{$("p#ajax_error").after(["<ul>","<li>readyState:"+k.readyState+"</li>","<li>status:"+k.status+"</li>","<li>statusText:"+k.statusText+"</li>","</ul>"].join("\n"))}catch(l){}}})},blockUI:function(){$('<div id="loadingScreen" title="Loading..."></div>').appendTo("body");this.loadingScreen=$("#loadingScreen");this.loadingScreen.dialog({autoOpen:false,closeOnEscape:false,draggable:false,width:150,height:150,modal:true,show:"scale",hide:"explode",resizable:false,dialogClass:"blockUI",open:function(){$("body").css("cursor","wait");ScrollLock.lock()},close:function(){$("body").css("cursor","auto");ScrollLock.unlock()}});var a=this;$(_document).ajaxSend(function(c,d,b){a.loadingScreen.dialog("option","title","Loading...");a.loadingScreen.dialog("open")}).ajaxStart(function(){a.loadingScreen.dialog("option","title","Start")}).ajaxSuccess(function(){a.loadingScreen.dialog("option","title","Success")}).ajaxComplete(function(){a.loadingScreen.dialog("option","title","Complete")}).ajaxError(function(){a.loadingScreen.dialog("option","title","Error")}).ajaxStop(function(){a.loadingScreen.dialog("option","title","Ready");a.loadingScreen.dialog("close")})},iframeWin:function(c){if(!c.width){c.width=800}if(!c.height){c.height=800}var b=20;var a=20;$('<iframe id="externalSite" class="externalSite"  frameborder="0" src="'+c.url+'" />').dialog({title:c.title,width:c.width,height:c.height,autoOpen:true,modal:true,resizable:true,autoResize:true}).width(c.width-b).height(c.height-a)},anchor_scroll:function(b,a){if(b.split("#")[1]===""){$.scrollTo("#header")}else{if(b!==""){var c=b.split("#")[1];if(!c.match(/tab/)){$.scrollTo("#"+c,{duration:800,axis:"y",queue:true,onAfter:function(){if(a===true){$(c).effect("highlight",{},2000)}}})}}}},music_player:function(a){$(a).each(function(){var d=$(this).attr("href");var c={modal:true,resizable:false,show:"fade",hide:"fade",title:"Music Player",dialogClass:"music_player",width:"640px",bgiframe:($.browser.msie&&$.browser.version>6)?true:false,open:function(){var e=0;var f=this;$("#jplayer").jPlayer({swfPath:SKIN_DIR+"js",nativeSupport:true,customCssIds:true,ready:function(){this.element.jPlayer("setFile",d);g();$(f).dialog("option","title",$("#jplayer").jPlayer("getData","diag").src);this.element.jPlayer("play")}}).jPlayer("onProgressChange",function(l,k,p,o,n){var j=l|0;var m=p|0;e=j;$("#jplayer_loaderBar").progressbar("option","value",j);$("#jplayer_sliderPlayback").slider("option","value",m);$("#jplayer_PlayTime").text($.jPlayer.convertTime(o));$("#jplayer_TotalTime").text($.jPlayer.convertTime(n))}).jPlayer("onSoundComplete",function(){this.element.jPlayer("play");h()});function h(){$("#jplayer_play").fadeOut(function(){$("#jplayer_pause").fadeIn()})}function g(){$("#jplayer_pause").fadeOut(function(){$("#jplayer_play").fadeIn()})}$("#jplayer_play").click(function(){$("#jplayer").jPlayer("play");h();return false});$("#jplayer_pause").click(function(){$("#jplayer").jPlayer("pause");g();return false});$("#jplayer_stop").click(function(){$("#jplayer").jPlayer("stop");g();return false});$("#jplayer_volume-min").click(function(){$("#jplayer").jPlayer("volume",0);$("#jplayer_sliderVolume").slider("option","value",0);return false});$("#jplayer_volume-max").click(function(){$("#jplayer").jPlayer("volume",100);$("#jplayer_sliderVolume").slider("option","value",100);return false});$("#jplayer_sliderPlayback").slider({max:100,range:"min",animate:true,slide:function(j,k){$("#jplayer").jPlayer("playHead",k.value*(100/e))}});var i;if($.cookie("volume")){i=$.cookie("volume")}else{i=50}$("#jplayer_sliderVolume").slider({value:i,max:100,range:"min",animate:true,slide:function(j,k){$("#jplayer").jPlayer("volume",k.value);$.cookie("volume",k.value,{expires:30,path:"/"})}});$("#jplayer_loaderBar").progressbar();$("ul#jplayer_icons li").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})},close:function(){$(this).remove()}};var b=['<div id="jplayer"></div>','<div id="jplayer_container">','<ul id="jplayer_icons" class="ui-widget ui-helper-clearfix">','<li id="jplayer_play" class="ui-button ui-state-default ui-corner-all" title="'+$.i18n("player","play")+'"><span class="ui-icon ui-icon-play"></span></li>','<li id="jplayer_pause" class="ui-button ui-state-default ui-corner-all"><span class="ui-icon ui-icon-pause" title="'+$.i18n("player","pause")+'"></span></li>','<li id="jplayer_stop" class="ui-button ui-state-default ui-corner-all"><span class="ui-icon ui-icon-stop" title="'+$.i18n("player","stop")+'"></span></li>','<li id="jplayer_volume-min" class="ui-button ui-state-default ui-corner-all"><span class="ui-icon ui-icon-volume-off" title="'+$.i18n("player","volume_max")+'"></span></li>','<li id="jplayer_volume-max" class="ui-button ui-state-default ui-corner-all"><span class="ui-icon ui-icon-volume-on" title="'+$.i18n("player","volume_min")+'"></span></li>',"</ul>",'<div id="jplayer_sliderVolume" title="'+$.i18n("player","volume")+'"></div>','<div id="jplayer_bars_holder" title="'+$.i18n("player","seek")+'">','<div id="jplayer_sliderPlayback"></div>','<div id="jplayer_loaderBar"></div>',"</div>","</div>",'<p><span class="ui-icon ui-icon-clock" style="display:block;float:left;">Cast:</span><span id="jplayer_PlayTime">00:00</span>/<span id="jplayer_TotalTime">??:??</span></p>'].join("\n");$(this).click(function(){var e=$('<div id="music_player"></div>');e.html(b).dialog(c);return false})})},tablesorter:function(c){var a=this;if(c){c=c+" "}else{c=""}$(c+".style_table, "+c+".attach_table").addClass("tablesorter");var b={sorter:{widthFixed:false},pager:{minimum_lines:10,size:[10,25,50,75,100],location_before:true,positionFixed:false}};if(typeof(this.skin.tablesorter)==="object"){b=this.skin.tablesorter}$(c+".tablesorter").each(function(h){var g=this;var e=$(this).clone();if($("tr",this).length>b.pager.minimum_lines&&$("thead",this).length!==0){var d="table_pager_"+a.tablesorter.counter;var j=['<div class="table_pager_widget ui-helper-clearfix" id="'+d+'">','<ul class="ui-widget pkwk_widget">','<li class="first ui-button ui-state-default ui-corner-all"><span class="ui-icon ui-icon-arrowthickstop-1-w"></span></li>','<li class="prev ui-button ui-state-default ui-corner-all"><span class="ui-icon ui-icon-arrowthick-1-w"></span></li>','<li><input class="pagedisplay" type="text" disabled="disabled" /></li>','<li class="next ui-button ui-state-default ui-corner-all"><span class="ui-icon ui-icon-arrowthick-1-e"></span></li>','<li class="last ui-button ui-state-default ui-corner-all"><span class="ui-icon ui-icon-arrowthickstop-1-e"></span></li>','<li><select class="pagesize"></select></li>','<li class="reload ui-button ui-state-default ui-corner-all"><span class="ui-icon ui-icon-refresh"></span></li>',"</ul>","</div>"].join("\n");$(this).tablesorter(b.sorter);if(b.pager.location_before===true){$(this).before(j)}else{$(this).after(j)}var f=0;while(f<b.pager.size.length){$("#"+d+" .pagesize").append($("<option>").attr({value:b.pager.size[f]}).text(b.pager.size[f]));f++}$("#"+d+" .reload").click(function(){e.clone().insertAfter(g);$(g).remove();$("#"+d).remove();$(g).tablesorter(b.sorter);if(b.pager.location_before===true){$(g).before(j)}else{$(g).after(j)}$(g).tablesorterPager(b.pager);var k=0;while(k<b.pager.size.length){$("#"+d+" .pagesize").append($("<option>").attr({value:b.pager.size[k]}).text(b.pager.size[k]));k++}a.glossaly(g)});$(this).tablesorterPager({container:$("#"+d),positionFixed:false});$("#"+d+".pkwk_widget .ui-state-default").hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}).mousedown(function(){$(this).addClass("ui-state-active")}).mouseout(function(){$(this).removeClass("ui-state-active")});$("#"+d).show("clip");a.tablesorter.counter++}else{$(this).tablesorter(b.sorter)}})},glossaly:function(b){var a=this;if(b){b=b+" "}else{b=""}$(b+"*[title]").tooltip({bodyHandler:function(){return $(this).context.tooltipText},track:true,delay:0,showURL:false}).hover(function(){$("body").css("cursor","help")},function(){$("body").css("cursor","auto")});if(this.plus===true){$(b+".tooltip").hover(function(){$("body").css("cursor","wait");a.getGlossary(this,{cmd:"tooltip",q:$(this).text(),cache:true})},function(){$("body").css("cursor","auto")});if($.query.get("cmd")==="search"){$(b+".linktip").hover(function(){$("body").css("cursor","wait");a.getGlossary(this,{cmd:"preview",page:$(this).text(),word:$.query.get("word"),cache:true})},function(){$("body").css("cursor","auto")})}}if($.support.leadingWhitespace!==true){$(b+".tooltip").css({behavior:"url("+SKIN_DIR+"js/ie-css3.htc)"})}},getGlossary:function(b,d,a){var c;$.ajax({url:SCRIPT,type:"GET",cache:true,timeout:2000,dataType:"html",global:false,data:d,async:false,beforeSend:function(){$("body").css("cursor","wait")},success:function(e){c=e},complete:function(e,f){$("body").css("cursor","help");$(b).tooltip({bodyHandler:function(){return c.replace(/<script[^>]*>[^<]+/ig,"")},track:true,delay:0,showURL:false})}})},set_editform:function(d){if(d){d=d+" "}else{d=""}var b=false;if(Modernizr.localstorage){var f=$(d+".edit_form textarea[name=msg]").val();var g=_window.localStorage.getItem(PAGE);var c=JSON.parse(g);if(c){var e=(MODIFIED>c.modified&&c.msg!==f)?"過去に編集したデーターよりもページが新しいようです。復元しますか？":"過去に編集したデーターがあるようです。復元しますか？";if(confirm(e)){$(d+".edit_form textarea[name=msg]").val(c.msg)}}b=true}$(".edit_form input",".edit_form button",".edit_form select",".edit_form textarea").attr("disabled","disabled");this.ajax_apx=false;this.ajax_count=0;this.ajax_tim=0;var a=this;$(d+".edit_form input[name=write]").after('<input type="button" name="add_ajax" value="'+$(".edit_form input[name=preview]").attr("value")+'" accesskey="p" />');$(d+".edit_form input[name=preview]").remove();$(d+".edit_form").prepend('<div class="assistant ui-corner-top ui-widget-header ui-helper-clearfix"></div>');$(d+".edit_form input[name=add_ajax]").click(function(){$("textarea").attr("disabled","disabled");var h=$(".edit_form textarea[name='msg']").height();if(a.ajax_apx){a.ajax_apx=false;$(d+".edit_form #realview_outer").animate({height:"toggle"},function(){$(d+".edit_form textarea[name='msg']").animate({height:h*2});$(d+".edit_form #realview").remove();$(d+".edit_form #realview_outer").remove();$(d+".edit_form #previous").remove();$(d+".edit_form textarea").removeAttr("disabled");$(d+".edit_form #indicator").hide().fadeOut()})}else{if(!a.ajax_apx){$(d+".edit_form textarea[name='msg']").before(['<div id="realview_outer">','<div id="realview"></div>',"</div>"].join("\n")).after('<textarea id="previous" style="display:none;"></textarea>');$(d+".edit_form #indicator").show().fadeIn();$(d+".edit_form #indicator").html('<img src="'+a.image_dir+'spinner.gif" alt="Loading..." />Now Loading...');$(d+".edit_form #previous").val($("textarea#msg").val());$(d+".edit_form #realview_outer").css("height",h/2);$(d+".edit_form #indicator").html("")}a.ajax_apx=true;$(d+".edit_form textarea[name='msg']").animate({height:$(this).height()+$(".edit_form #realview_outer").height()},function(){$(d+".edit_form #realview_outer").animate({height:"toggle"});$(d+".edit_form textarea").removeAttr("disabled")});a.realtime_preview()}return false});$(d+".edit_form textarea[name=msg]").blur(function(){a.realtime_preview()});$(d+".edit_form textarea[name=msg]").mouseup(function(){if($(this).val()!==$("textarea#previous").val()){a.realtime_preview()}});$(d+".edit_form textarea[name=msg]").keypress(function(h){if(Modernizr.localstorage){var i=new Date();_window.localStorage.setItem(PAGE,JSON.stringify({msg:$(this).val(),modified:i.getTime()}))}});$(d+"form").submit(function(h){if(Modernizr.localstorage){localStorage.removeItem(PAGE)}if($("#_edit_form_notimestamp:checked")!==true&&$("#fb_publish:checked")===true){$.ajax({url:"https://graph.facebook.com/bbeckford/feed",type:"post",data:{method:"stream.publish",message:PAGE+"\n"+$("link[rel=canonical]")[0].href},cache:false,dataType:"json",success:function(i){console.log(i.body)},error:function(i){$(d+"input, button, select, textarea").removeAttr("disabled");alert("よきせぬエラーが発生しました。")}})}});this.assistant(false)},show_diff:function(a,b){if(msg===org){return false}else{return diff(a.replace(/^\n+|\n+$/g,"").split("\n"),b.replace(/^\n+|\n+$/g,"").split("\n"))}},diff:function(j,i,g){var e=j.length,b=i.length;if(!g&&e>b){return diff(i,j,true)}var c,a,d=e+1,m=b-e,h=[],f=[];var l=function(p){var w,s,u,n,q,v=h[p-1+d],t=h[p+1+d];if(v>=t){s=v+1;w=s-p;u=f[p-1+d];n={edit:g?"-":"+",arr:i,line:s-1}}else{s=t;w=s-p;u=f[p+1+d];n={edit:g?"+":"-",arr:j,line:w-1}}if(n.line>=0){f[p+d]=u.concat(n)}var r=e-w>b-s?e-w:b-s;for(q=0;q<r&&j[w+q]===i[s+q];++q){f[p+d].push({edit:"=",arr:j,line:w+q})}h[p+d]=s+q;return true};for(a=0;a<e+b+3;++a){h[a]=-1;f[a]=[]}for(a=0;h[m+d]!==b;a++){for(c=-a;c<m;++c){l(c)}for(c=m+a;c>=m;--c){l(c)}}return f[m+d]},realtime_preview:function(h){if(h){h=h+" "}else{h=""}var b=_document.getElementById("msg");var g=_document.getElementById("msg").value;var c=this;if(this.ajax_apx){$(h+"#indicator").html('<img src="'+c.image_dir+'spinner.gif" alt="Loading..." />Now Loading...');$(h+"textarea#previous").val(g);$(h+"textarea").attr("disabled","disabled");if(++this.ajax_count!==1){return}if(_document.selection){var f=_document.selection.createRange();sellen=f.text.length;var a=b.createTextRange();var d=a.text.length;try{a.moveToPoint(f.offsetLeft,f.offsetTop);a.moveEnd("textedit")}catch(i){}endlen=a.text.length;sttlen=d-endlen}else{if(b.setSelectionRange){sttlen=b.selectionStart;endlen=b.value.length-b.selectionEnd;sellen=b.selectionEnd-sttlen}}finlen=g.lastIndexOf("\n",sttlen);g=g.substring(0,finlen)+"\n\n&editmark;\n\n"+g.substring(finlen);$.ajax({url:SCRIPT,type:"post",global:false,data:{cmd:"edit",realview:1,page:PAGE,msg:g,type:"json"},cache:false,dataType:"json",success:function(l){var j=_document.getElementById("realview_outer");var e=_document.getElementById("editmark");if(e){j.scrollTop=e.offsetTop-8}if(c.ajax_count===1){c.ajax_count=0}else{c.ajax_count=0;c.realtime_preview()}$(h+"#indicator").html('<span class="ui-icon ui-icon-clock" style="float:left;"></span>'+l.taketime);var k=l.data.replace(/<script[^>]*>[^<]+/ig,'<span class="scripttag" title="Script tag">[SCRIPT]</span>');$(h+"#realview").html(k);$(h+"textarea").removeAttr("disabled")},error:function(k,e,j){$("#realview").html(['<div class="ui-state-error ui-corner-all" style="padding: 0 .7em;">','<p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>'+e+"</p>","<ul>","<li>readyState:"+k.readyState+"</li>","<li>status:"+k.status+"</li>","<li>statusText:"+k.statusText+"</li>","</ul>","</div>"].join("\n"))}})}},assistant:function(g){var d,h;var k=["sun","cloud","rain","snow","thunder","typhoon","mist","sprinkle","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricornus","aquarius","pisces","sports","baseball","golf","tennis","soccer","ski","basketball","motorsports","pocketbell","train","subway","bullettrain","car","rvcar","bus","ship","airplane","house","building","postoffice","hospital","bank","atm","hotel","cvs","gasstation","parking","signaler","toilet","restaurant","cafe","bar","beer","fastfood","boutique","hairsalon","karaoke","movie","upwardright","carouselpony","music","art","drama","event","ticket","smoking","nosmoking","camera","bag","book","ribbon","present","birthday","telephone","mobilephone","memo","tv","game","cd","heart","spade","diamond","club","eye","ear","rock","scissors","paper","downwardright","upwardleft","foot","shoe","eyeglass","wheelchair","newmoon","moon1","moon2","moon3","fullmoon","dog","cat","yacht","xmas","downwardleft","phoneto","mailto","faxto","info01","info02","mail","by-d","d-point","yen","free","id","key","enter","clear","search","new","flag","freedial","sharp","mobaq","one","two","three","four","five","six","seven","eight","nine","zero","ok","heart01","heart02","heart03","heart04","happy01","angry","despair","sad","wobbly","up","note","spa","cute","kissmark","shine","flair","annoy","punch","bomb","notes","down","sleepy","sign01","sign02","sign03","impact","sweat01","sweat02","dash","sign04","sign05","slate","pouch","pen","shadow","chair","night","soon","on","end","clock","appli01","appli02","t-shirt","moneybag","rouge","denim","snowboard","bell","door","dollar","pc","loveletter","wrench","pencil","crown","ring","sandclock","bicycle","japanesetea","watch","think","confident","coldsweats01","coldsweats02","pout","gawk","lovely","good","bleah","wink","happy02","bearing","catface","crying","weep","ng","clip","copyright","tm","run","secret","recycle","r-mark","danger","ban","empty","pass","full","leftright","updown","school","wave","fuji","clover","cherry","tulip","banana","apple","bud","maple","cherryblossom","riceball","cake","bottle","noodle","bread","snail","chick","penguin","fish","delicious","smile","horse","pig","wine","shock"];var e=["#000000","#003300","#006600","#009900","#00CC00","#00FF00","#330000","#333300","#336600","#339900","#33CC00","#33FF00","#660000","#663300","#666600","#669900","#66CC00","#66FF00","#000033","#003333","#006633","#009933","#00CC33","#00FF33","#330033","#333333","#336633","#339933","#33CC33","#33FF33","#660033","#663333","#666633","#669933","#66CC33","#66FF33","#000066","#003366","#006666","#009966","#00CC66","#00FF66","#330066","#333366","#336666","#339966","#33CC66","#33FF66","#660066","#663366","#666666","#669966","#66CC66","#66FF66","#000099","#003399","#006699","#009999","#00CC99","#00FF99","#330099","#333399","#336699","#339999","#33CC99","#33FF99","#660099","#663399","#666699","#669999","#66CC99","#66FF99","#0000CC","#0033CC","#0066CC","#0099CC","#00CCCC","#00FFCC","#3300CC","#3333CC","#3366CC","#3399CC","#33CCCC","#33FFCC","#6600CC","#6633CC","#6666CC","#6699CC","#66CCCC","#66FFCC","#0000FF","#0033FF","#0066FF","#0099FF","#00CCFF","#00FFFF","#3300FF","#3333FF","#3366FF","#3399FF","#33CCFF","#33FFFF","#6600FF","#6633FF","#6666FF","#6699FF","#66CCFF","#66FFFF","#990000","#993300","#996600","#999900","#99CC00","#99FF00","#CC0000","#CC3300","#CC6600","#CC9900","#CCCC00","#CCFF00","#FF0000","#FF3300","#FF6600","#FF9900","#FFCC00","#FFFF00","#990033","#993333","#996633","#999933","#99CC33","#99FF33","#CC0033","#CC3333","#CC6633","#CC9933","#CCCC33","#CCFF33","#FF0033","#FF3333","#FF6633","#FF9933","#FFCC33","#FFFF33","#990066","#993366","#996666","#999966","#99CC66","#99FF66","#CC0066","#CC3366","#CC6666","#CC9966","#CCCC66","#CCFF66","#FF0066","#FF3366","#FF6666","#FF9966","#FFCC66","#FFFF66","#990099","#993399","#996699","#999999","#99CC99","#99FF99","#CC0099","#CC3399","#CC6699","#CC9999","#CCCC99","#CCFF99","#FF0099","#FF3399","#FF6699","#FF9999","#FFCC99","#FFFF99","#9900CC","#9933CC","#9966CC","#9999CC","#99CCCC","#99FFCC","#CC00CC","#CC33CC","#CC66CC","#CC99CC","#CCCCCC","#CCFFCC","#FF00CC","#FF33CC","#FF66CC","#FF99CC","#FFCCCC","#FFFFCC","#9900FF","#9933FF","#9966FF","#9999FF","#99CCFF","#99FFFF","#CC00FF","#CC33FF","#CC66FF","#CC99FF","#CCCCFF","#CCFFFF","#FF00FF","#FF33FF","#FF66FF","#FF99FF","#FFCCFF","#FFFFFF","#111111","#222222","#333333","#444444","#555555","#666666","#777777","#888888","#999999","#A5A5A5","#AAAAAA","#BBBBBB","#C3C3C3","#CCCCCC","#D2D2D2","#DDDDDD","#EEEEEE","#FFFFFF"];$(".assistant").html(['<ul class="ui-widget pkwk_widget">','<li class="replace ui-button ui-state-default ui-corner-left" title="Bold" name="b"><strong>b</strong></li>','<li class="replace ui-button ui-state-default" title="Italic" name="i" style="font-weight:normal;"><em>i</em></li>','<li class="replace ui-button ui-state-default" title="Strike" name="s" style="font-weight:normal;"><strike>s</strike></li>','<li class="replace ui-button ui-state-default" title="Underline" name="u" style="font-weight:normal;"><span class="underline">u</span></li>','<li class="replace ui-button ui-state-default" title="Code" name="code" style="font-weight:normal;"><span class="ui-icon ui-icon-script"></span></li>','<li class="replace ui-button ui-state-default ui-corner-right" title="Q" name="q" style="font-weight:normal;"><span class="ui-icon ui-icon-comment"></span></li>','<li class="replace ui-button ui-state-default ui-corner-left" title="Link" name="url"><span class="ui-icon ui-icon-link"></span></li>','<li class="replace ui-button ui-state-default" title="Size" name="size">size</li>','<li class="insert ui-button ui-state-default ui-corner-right" title="Color" name="color">color</li>','<li class="insert ui-button ui-state-default ui-corner-left" title="Emoji" name="emoji">☺</li>','<li class="insert ui-button ui-state-default ui-corner-right" title="br" name="br">⏎</li>','<li class="replace ui-button ui-state-default ui-corner-all" title="ncr" name="ncr">&amp;#</li>','<li class="insert ui-button ui-state-default ui-corner-all" title="Help" name="help"><span class="ui-icon ui-icon-help"></span></li>',(typeof(Modernizr.localstorage)!=="undefined")?'<li class="insert ui-state-default ui-corner-all" title="Flush Storage" name="flush"><span class="ui-icon ui-icon-trash"></span></li>':null,'<li class="ui-widget-content ui-corner-all" style="float:right; width:auto;display:none;font-weight:normal;" id="indicator"></li>',"</ul>"].join("\n"));var f='<ul class="ui-widget pkwk_widget ui-helper-clearfix">';for(d=0,h=k.length;d<h;d++){var a=k[d];f+='<li class="ui-button ui-state-default ui-corner-all" title="'+a+'" name="'+a+'"><span class="emoji emoji-'+a+'"></span></li>'}f+="</ul>";$(_document.body).append('<div id="emoji"></div>');$("#emoji").dialog({title:"Emoji",autoOpen:false,bgiframe:true,minWidth:410,height:410,minHeight:410,show:"scale",hide:"scale",buttons:{Close:function(){$(this).dialog("close")}}}).html(f);var l='<ul class="ui-widget pkwk_widget ui-helper-clearfix" id="colors">',c=0;for(d=0,h=e.length;d<h;d++){var b=e[d];l+='<li class="ui-button ui-state-default" title="'+b+'" name="'+b+'"><span class="emoji" style="background-color:'+b+';"></span></li>';c++}l+="</ul>";$(_document.body).append('<div id="color_palette"></div>');$("#color_palette").dialog({title:"Palette",autoOpen:false,bgiframe:true,width:470,height:400,show:"scale",hide:"scale"}).html(l);if(!this.elem){this.elem=$("*[name=msg]")[0]}var m=this;$("*[name=msg]").focus(function(i){m.elem=this});$(".insert").click(function(){var j="";var n=$(m.elem);var o=n.getSelection().text;var i=$(this).attr("name");switch(i){case"help":alert($.i18n("pukiwiki","hint_text1"));break;case"br":j="&br;\n";break;case"emoji":$("#emoji").dialog("open");break;case"color":$("#color_palette").dialog("open");break;case"flush":if(Modernizr.localstorage&&confirm("Flush local strage?")===true){localStorage.removeItem(PAGE)}break;default:j="&("+$(this).attr("name")+");";break}if(j!==""){if(o===""){n.insertAtCaretPos(j)}else{n.replaceSelection(j)}n.focus()}return});$(".replace").click(function(){var q="";var n=$(m.elem);var s=n.getSelection().text;var u=$(this).attr("name");if(s===""||!n){alert($.i18n("pukiwiki","select"));return}switch(u){case"size":var t="100%";var j=prompt($.i18n("pukiwiki","fontsize"),t);if(!j||!j.match(/\d+/)){return}q="&size("+j+"){"+s+"};";break;case"ncr":var o,p;for(o=0,p=s.length;o<p;o++){q+=("&#"+(s.charCodeAt(o))+";")}break;case"b":q="''"+s+"''";break;case"i":q="'''"+s+"'''";break;case"u":q="__"+s+"__";break;case"s":q="%%"+s+"%%";break;case"code":q="@@"+s+"@@";break;case"q":q="@@@"+s+"@@@";break;case"url":var r=prompt($.i18n("pukiwiki","url"),"http://");if(r!==null){q="[["+s+">"+r+"]]"}break}n.replaceSelection(q);n.focus();return});$("#emoji ul li").click(function(){var j=$(m.elem);var n=j.getSelection().text;var i="&("+$(this).attr("name")+");";if(n===""){j.insertAtCaretPos(i)}else{j.replaceSelection(i)}m.elem.focus();return});$("#color_palette ul li").click(function(){var j;var n=$(m.elem);var o=n.getSelection().text;var i=$(this).attr("name");if(o===""||!n){alert($.i18n("pukiwiki","select"));return}if(o.match(/^&color\([^\)]*\)\{.*\};$/)){n.replaceSelection(o.replace(/^(&color\([^\)]*)(\)\{.*\};)$/,"$1,"+i+"$2"))}else{n.replaceSelection("&color("+i+"){"+o+"};")}$("#color_palette").dialog("close");m.elem.focus();return})},set_uploader:function(prefix){if(prefix){prefix=prefix+" "}else{prefix=""}var pass_form;if($(prefix+"input[name=pass]").length!==0){pass_form='<label for="pass">Password:</label><input type="password" name="pass" id="pass" size="8" value="" /><br />'}var params={max_file_size:$(prefix+"input[name=max_file_size]").val(),pcmd:$(prefix+"input[name=pcmd]").val(),plugin:$(prefix+"input[name=plugin]").val(),refer:$(prefix+"input[name=refer]").val(),ajax:"json"};if(params.plugin==="attachref"){params.attachref_no=$(prefix+"input[name=attachref_no]").val();params.attachref_opt=$(prefix+"input[name=attachref_opt]").val();params.digest=$(prefix+"input[name=digest]").val()}var config=(typeof(this.skin.swfupload)!=="object")?{flash_url:SKIN_DIR+"js/swfupload.swf",upload_url:SCRIPT,file_post_name:"attach_file",post_params:params,file_size_limit:params.max_file_size,file_types:"*.*",file_types_description:"All Files",file_upload_limit:10,file_queue_limit:10,debug:DEBUG,button_image_url:IMAGE_DIR+"ajax/swfupload/wdp_buttons_upload_114x29.png",button_width:114,button_height:29,button_placeholder_id:"swfupload_button",button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,moving_average_history_size:40}:this.skin.swfupload;if(params.plugin==="attachref"){config.file_upload_limit=1;config.file_queue_limit=1}params.pass=($("input[name=pass]").length!==0)?$("input[name=pass]").val():"";params.encode_hint=($("input[name=encode_hint]").length!==0)?$(prefix+"input[name=encode_hint]").val():"";$(prefix+".attach_form").html(['<div id="swfupload-control">','<input type="button" id="swfupload_button" />','<p id="swfupload-queuestatus" ></p>','<ol id="swfupload-log" class="ui-widget"></ol>','<button id="execute">Go</button>',"</div>"].join("\n"));$(prefix+"#execute").button({icons:{primary:"ui-icon-check"},disabled:true}).click(function(){$("#swfupload-control").swfupload("startUpload");return false}).css({display:"none"});$(prefix+"#swfupload-control").swfupload(config).bind("fileQueued",function(event,file){var listitem=['<li id="'+file.id+'" class="ui-widget-content ui-corner-all">',"File: <em>"+file.name+"</em> ("+Math.round(file.size/1024)+' KB) <span class="progressvalue" ></span>','<div class="progressbar"></div>','<p class="status"><span style="float: left; margin-right: 0.3em;" class="ui-icon ui-icon-info"></span>Pending</p>','<button class="cancel">Close</button>',"</li>"].join("\n");$(prefix+"#swfupload-log").append(listitem);$(prefix+"li#"+file.id+" button:first").button({icons:{primary:"ui-icon-close"}}).click(function(){var swfu=$.swfupload.getInstance("#swfupload-control");swfu.cancelUpload(file.id);$("#swfupload-log li#"+file.id).slideUp("fast");return false});$(prefix+"#swfupload-log li#"+file.id+" .progressbar").progressbar();$(prefix+"#execute").button({disabled:false}).css({display:""})}).bind("fileQueueError",function(event,file,errorCode,message){var listitem=['<li id="error" class="ui-widget-content ui-state-error ui-corner-all"><em>Error</em>',"<p>",'<span style="float: left; margin-right: 0.3em;" class="ui-icon ui-icon-alert"></span>',"You have attempted to queue too many files.","</p>",'<button class="close" >Close</button>',"</li>"].join("\n");$(prefix+"#swfupload-log").append(listitem);$(prefix+"li#error button").button({icons:{primary:"ui-icon-close"}}).click(function(){$("#swfupload-log li#error").slideUp("fast");return false})}).bind("fileDialogComplete",function(event,numFilesSelected,numFilesQueued){$("#swfupload-queuestatus").text("Files Selected: "+numFilesSelected+" / Queued Files: "+numFilesQueued)}).bind("uploadStart",function(event,file){$("#swfupload-log li#"+file.id).find("p.status").text("Uploading...");$("#swfupload-log li#"+file.id).find("span.progressvalue").text("0%");$("#swfupload-log li#"+file.id).find("span.cancel").hide()}).bind("uploadProgress",function(event,file,bytesLoaded){var percentage=Math.round((bytesLoaded/file.size)*100);$("#swfupload-log li#"+file.id+" .progressbar").progressbar({value:percentage});$("#swfupload-log li#"+file.id).find("span.progressvalue").text(percentage+"%")}).bind("uploadSuccess",function(event,file,serverData){if(params.plugin!=="attachref"){var ret=eval("("+serverData+")");var item=$(prefix+"#swfupload-log li#"+file.id);$(prefix+"#swfupload-log li#"+file.id+" .progressbar").progressbar({value:100});item.find(".progressvalue").text("100%");var pathtofile='<a href="'+SCRIPT+"?plugin=attach&pcmd=open&refer="+PAGE+"&file="+file.name+'" id="view_'+file.id+'"><span style="float: right; margin-right: 0.3em;" class="ui-icon ui-icon-newwin"></span>view &raquo;</a>';item.addClass("success").find("p.status").html(ret.title+" | "+pathtofile);$(prefix+"#swfupload-log li#"+file.id+" a#view_"+file.id).click(function(){var href=$(this).attr("href");_window.open(href);$(prefix).dialog("option","close",function(){location.reload()});return false})}else{location.reload()}}).bind("uploadComplete",function(event,file){$(this).swfupload("startUpload")})},CFCheck:function(){if(typeof(CFInstall)==="object"||$("meta[http-equiv=X-UA-Compatible]")[0].content.match(/chrome/)!==-1){CFInstall.check({mode:"overlay",onmissing:function(){self.iframeWin({title:"Google Chrome Frame",width:820,height:600,url:"http://www.google.com/chromeframe"})}})}},sh:function(a){if(a){a=a+" "}else{a=""}if(typeof(SyntaxHighlighter)==="object"){SyntaxHighlighter.config.clipboardSwf=SKIN_DIR+"js/syntaxhighlighter/scripts/clipboard.swf";SyntaxHighlighter.all()}},linkattrs:function(){var c,a;var b=$("link[rel]");for(c=0,a=b.length;c<a;c++){var d=b[c];switch(d.rel){case"canonical":this.canonical=d.href;break;case"next":this.next=d.href;this.next_title=d.title;break;case"prev":case"previous":this.prev=d.href;this.prev_title=d.title;break;case"up":this.up=d.href;this.up_title=d.title;break;case"index":this.index=d.href;this.index_title=d.title;break;case"alternate":if(d.hreflang==="en"){this.hasEversion=true}break;case"transformation":this.grddltrans=d.href;hasmeta=d.href;break;case"home":hashome=true;this.home=d.href;this.home_title=d.title;break;case"search":hassearch=true;this.search=d.href;this.search_title=d.title;break;case"meta":if(!d.type){hasmeta="meta"}break;case"help":this.help=d.href;this.help_title=d.title;break}}},preptoc:function(c){var b=this.prepHdngs(c);var a=this;this.genTocDiv(b);$(_document).keypress(function(e){var d=e.which;var f=String.fromCharCode(d);if(e.target.nodeName.match(/(input|textarea)/i)!==-1){if(d===27){return false}return true}switch(f){case"?":if(location.href.indexOf("Help")===-1&&confirm("Go to help/search page ?")){location.href=pukiwiki.help}else{alert("This key should bring you our help, i.e. this page :-)")}break;case"<":if(a.prev){location.href=a.prev}break;case"U":if(a.up){location.href=a.up}break;case">":if(a.next){location.href=a.next}break;case"H":if(a.home){location.href=a.home}break;case"I":if(a.index){location.href=a.index}break;case"S":if(a.search){a.ajax_dialog({cmd:"search",page:PAGE,ajax:"json"})}break;case"R":if(a.canonical){location.href=a.canonical}break;case"A":if(PAGE){a.ajax_dialog({cmd:"attach",pcmd:"upload",page:PAGE,ajax:"json"},"",function(){a.set_uploader("div.window")})}break;case"E":if(PAGE){location.href=SCRIPT+"?cmd=edit&page="+PAGE}break;case"F":if(PAGE){a.ajax_dialog({cmd:"freeze",page:PAGE,ajax:"json"})}break;case"C":if(PAGE){a.ajax_dialog({cmd:"source",page:PAGE,ajax:"json"})}break;case"B":if(PAGE){a.ajax_dialog({cmd:"backup",page:PAGE,ajax:"json"})}break;case"D":if(PAGE){a.ajax_dialog({cmd:"diff",page:PAGE,ajax:"json"})}break;case"N":if(PAGE){a.ajax_dialog({cmd:"newpage",page:PAGE,ajax:"json"})}break;default:if(a.toc){if(a.toc.style.display!=="none"){if(d===27||d===47){pukiwiki._hideToc()}}else{if(d===47){$(a.toc).css("top",$(_window).scrollTop()+"px").css("left",$(_window).scrollLeft()+"px").fadeIn("fast")}}}break}return false})},prepHdngs:function(e){if(e){e=e+" "}else{e=""}var c="";var g=$(e+"h2");var d=$(e+".contents ul").removeAttr("class").removeAttr("style");var f='<img src="'+this.image_dir+'toc.png" class="tocpic" title="Table of Contents of this page" alt="Toc" />';var b=this;if(d.length!==0){c="<ol>"+d.html()+"</ol>";g.each(function(h){$(this).html($(this).html()+f)});$(e+"h3").each(function(h){$(this).html($(this).html()+f)})}else{if(g.length!==0){var a=[];g.each(function(i){var j=$(this);var h=j.attr("id");if(!h){j.attr("id","_genid_"+i)}j.html(j.html()+f);a[i]='<li><a href="#'+h+'">'+j.text()+"</a></li>"});c="<ol>"+a.join("\n")+"</ol>"}else{if($.query.get("cmd").match(/list|backup/)!==-1){c='<div style="text-align:center;">'+$("#top").html()+"</div>";$(e+"#top").html($(e+"#top").html()+f)}}}return c},genTocDiv:function(a){this.toc=_document.createElement("div");this.toc.id="poptoc";$(this.toc).addClass("ui-widget ui-corner-all noprint").css("top",0).css("left",0).css("position","absolute").css("z-index",1).html(['<h1><a href="#">'+$("h1#title").text()+'</a><abbr title="Table of Contents">[TOC]</abbr></h1>',a.replace(/href/g,'tabindex="1" href'),this.getNaviLink()].join(""));_document.body.appendChild(this.toc);$(_document).click(this.popToc);this.calcObj(this.toc,300)},calcObj:function(b,d){var c=self.pageXOffset;var a=self.pageYOffset;b.style.visibility="hidden";b.style.display="block";b.width=b.offsetWidth;if(b.width>d){b.width=d;if(!$.browser.safari){b.style.width=d+"px"}}b.height=b.offsetHeight;b.style.display="none";b.style.visibility="visible";if(a){scroll(c,a)}},getNaviLink:function(){var b=function(d,c,e){if(c){return'<a href="'+c+'" title="'+e+'">'+d+"</a>"}else{return'<span style="color:gray;">'+d+"</span>"}};var a=["&lt;&lt;",b("Prev page",this.prev,this.prev_title)," | ",b("Up",this.up,this.up_title)," | ",b("Next page",this.next,this.next_title),"&gt;&gt;","<br />","[ ",b("Home",this.home,this.home_title)," | ",b("Index",this.index,this.index_title)," | ",b("Search",this.search,this.search_title)," | ",b("Help",this.help,this.help_title)," ]"].join("");return(a?"<p class='nav'>"+a+"</p>":"")},popToc:function(a){var b;if(!a){a=event}b=(_window.event)?a.srcElement:a.target;if(a.altKey){pukiwiki._dispToc(a,b,0)}else{if(b.className==="tocpic"){pukiwiki._dispToc(a,b,1)}else{pukiwiki._hideToc(a)}}},setCurPos:function(c,b){var a=c.parentNode;var d=(b===1)?c.getAttribute("id"):(a.getAttribute("id")?a.getAttribute("id"):(a.firstChild.getAttribute?a.firstChild.getAttribute("id"):""));return d},nodeText:function(b){if(typeof(b)!=="object"){return b}var d,c,a,e=b.childNodes;for(c=0,a=e.length;c<a;c++){if(e.item(c).nodeType===3){d+=e.item(c).data}else{if(e.item(c).nodeType===1){d+=this.nodeText(e.item(c))}}}d=d.replace(/^\s*/,"");return d.replace(/\s*$/,"")},_dispToc:function(d,e,c){var i={x:d.clientX+$(_window).scrollLeft(),y:d.clientY+$(_window).scrollTop()};var g={x:d.pageX,y:d.pageY,w:$(_window).width(),h:$(_window).height()};var b=this.toc.height;var a=this.toc.width;var f;if(g.h<b){$(this.toc).css("height",g.h+"px").css("overflow","auto");f=(i.y-g.y)}else{f=((g.h-g.y>b)?i.y:((g.y>b)?(i.y-b):((g.y<g.h/2)?(i.y-g.y):(i.y+g.h-g.y-b))))}$(this.toc).css("top",f+"px").css("left",((g.x<g.w-a)?i.x:(i.x-a))+"px");if(c){pukiwiki.setCurPos(e,c)}$(this.toc).fadeIn("fast")},_hideToc:function(a){$(this.toc).fadeOut("fast")},bad_behavior:function(a){if(a){a=a+" "}else{a=""}if(typeof(BH_NAME)!=="undefined"&&typeof(BH_VALUE)!=="undefined"){$(a+"form").append('<input type="hidden" name="'+BH_NAME+'" value="'+BH_VALUE+'" />')}}};function open_uri(a,b){if(!b){return false}_window.open(a,b);return false}$.fn.serializeObject=function(){var c={};var b=this.serializeArray();$.each(b,function(){if(c[this.name]){if(!c[this.name].push){c[this.name]=[c[this.name]]}c[this.name].push(this.value||"")}else{c[this.name]=this.value||""}});return c};$.fn.disableOnSubmit=function(b){var a=(b===null)?"input[type=submit],input[type=button],input[type=reset],button":b;$(this).find(a).removeAttr("disabled");$(this).submit(function(){$(this).find(a).attr("disabled","disabled")});return this};var ScrollLock={lock:function(){var c=$(_window);var a={width:c.width(),height:c.height(),top:_document.body.scrollTop||_document.documentElement.scrollTop,left:_document.body.scrollLeft||_document.documentElement.scrollLeft};ScrollLock.viewport=a;var b=[a.top+"px",a.left+a.width+"px",a.top+a.height+"px",a.left+"px"];$("body").css({clip:"rect("+b.join(",")+")",position:"absolute",overflow:"hidden",top:-a.top,left:0})},unlock:function(){$("body").css({position:"static",overflow:"",top:0,left:0});var a=ScrollLock.viewport;_window.scrollTo(a.left,a.top)}};var $buoop={vs:{i:7,f:3,o:11,s:5,n:9},reminder:1,onshow:function(){},l:LANG,newwindow:false};if(DEBUG){$buoop.text="When the version of a browser is old, the text which presses for renewal of a browser here is displayed."}else{if((_document.compatMode||"")!=="CSS1Compat"){$buoop.text="Please set native rendering mode."}}$(_document).ready(function(){$.getScript("http://browser-update.org/update.js");if(typeof(GOOGLE_ANALYTICS)!=="undefined"){$.ajaxGA.init(GOOGLE_ANALYTICS,true)}var a;while(a=pkwkBeforeInit.shift()){if(a!=null){a()}}a=null;pukiwiki.init();tzCalculation_LocalTimeZone(location.host,false);while(a=pkwkInit.shift()){if(a!=null){a()}}});$(_window).unload(function(){var a;while(a=pkwkBeforeUnload.shift()){if(a!=null){a()}}a=null;pukiwiki.unload();while(a=pkwkUnload.shift()){if(a!=null){a()}}});_window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){console.log(Array.prototype.slice.call(arguments))}};(function(a){function d(){}for(var b=["error","info","log","warn"],c;c=b.pop();){a[c]=a[c]||d}}(_window.console=_window.console={}));(function(b){var a=b.write;b.write=function(c){log("document.write(): ",arguments);if(/docwriteregexwhitelist/.test(c)){a.apply(b,arguments)}}})(_document);var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(a){this.initSWFUpload(a)}}SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings=b;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(a){delete SWFUpload.instances[this.movieName];throw a}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(a){if(typeof(a)!=="string"||a.match(/^https?:\/\//i)||a.match(/^\//)){return a}var c=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var b=window.location.pathname.lastIndexOf("/");if(b<=0){path="/"}else{path=window.location.pathname.substr(0,b)+"/"}return path+a};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(b,a){this.settings[b]=(this.settings[b]==undefined)?a:this.settings[b]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var a,b;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(a==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var b=this.buildParamString();var a=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var c=this.settings.post_params;var b=[];if(typeof(c)==="object"){for(var a in c){if(c.hasOwnProperty(a)){b.push(encodeURIComponent(a.toString())+"="+encodeURIComponent(c[a].toString()))}}}return b.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var a=null;a=this.getMovieElement();if(a&&typeof(a.CallFunction)==="unknown"){for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(e){}}try{a.parentNode.removeChild(a)}catch(b){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(d){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(b,c,a){if(c==undefined){return(this.settings[b]=a)}else{return(this.settings[b]=c)}};SWFUpload.prototype.getSetting=function(a){if(this.settings[a]!=undefined){return this.settings[a]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelUpload=function(a,b){if(b!==false){b=true}this.callFlash("CancelUpload",[a,b])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};SWFUpload.prototype.getFile=function(a){if(typeof(a)==="number"){return this.callFlash("GetFileByIndex",[a])}else{return this.callFlash("GetFile",[a])}};SWFUpload.prototype.addFileParam=function(a,b,c){return this.callFlash("AddFileParam",[a,b,c])};SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};SWFUpload.prototype.setHTTPSuccess=function(a){if(typeof a==="string"){a=a.replace(" ","").split(",")}this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};SWFUpload.prototype.setButtonImageURL=function(a){if(a==undefined){a=""}this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(c,a){this.settings.button_width=c;this.settings.button_height=a;var b=this.getMovieElement();if(b!=undefined){b.style.width=c+"px";b.style.height=a+"px"}this.callFlash("SetButtonDimensions",[c,a])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};SWFUpload.prototype.setButtonTextPadding=function(b,a){this.settings.button_text_top_padding=a;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,a])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};SWFUpload.prototype.queueEvent=function(b,c){if(c==undefined){c=[]}else{if(!(c instanceof Array)){c=[c]}}var a=this;if(typeof this.settings[b]==="function"){this.eventQueue.push(function(){this.settings[b].apply(this,c)});setTimeout(function(){a.executeNextEvent()},0)}else{if(this.settings[b]!==null){throw"Event handler "+b+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;if(typeof(a)==="function"){a.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(c){var e=/[$]([0-9a-f]{4})/i;var f={};var d;if(c!=undefined){for(var a in c.post){if(c.post.hasOwnProperty(a)){d=a;var b;while((b=e.exec(d))!==null){d=d.replace(b[0],String.fromCharCode(parseInt("0x"+b[1],16)))}f[d]=c.post[a]}}c.post=f}return c};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return false}};SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();if(!a){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(a);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(a){try{if(this.movieElement&&typeof(a.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var c in a){try{if(typeof(a[c])==="function"){a[c]=null}}catch(b){}}}}catch(d){}window.__flash__removeCallback=function(e,f){try{if(e){e[f]=null}}catch(g){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("file_queue_error_handler",[a,c,b])};SWFUpload.prototype.fileDialogComplete=function(b,c,a){this.queueEvent("file_dialog_complete_handler",[b,c,a])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};SWFUpload.prototype.returnUploadStart=function(a){var b;if(typeof this.settings.upload_start_handler==="function"){a=this.unescapeFilePostParams(a);b=this.settings.upload_start_handler.call(this,a)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(b===undefined){b=true}b=!!b;this.callFlash("ReturnUploadStart",[b])};SWFUpload.prototype.uploadProgress=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_progress_handler",[a,c,b])};SWFUpload.prototype.uploadError=function(a,c,b){a=this.unescapeFilePostParams(a);this.queueEvent("upload_error_handler",[a,c,b])};SWFUpload.prototype.uploadSuccess=function(b,a,c){b=this.unescapeFilePostParams(b);this.queueEvent("upload_success_handler",[b,a,c])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};SWFUpload.prototype.debugMessage=function(c){if(this.settings.debug){var a,d=[];if(typeof c==="object"&&typeof c.name==="string"&&typeof c.message==="string"){for(var b in c){if(c.hasOwnProperty(b)){d.push(b+": "+c[b])}}a=d.join("\n")||"";d=a.split("\n");a="EXCEPTION: "+d.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(a)}else{SWFUpload.Console.writeLine(c)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(d){var b,a;try{b=document.getElementById("SWFUpload_Console");if(!b){a=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(a);b=document.createElement("textarea");b.id="SWFUpload_Console";b.style.fontFamily="monospace";b.setAttribute("wrap","off");b.wrap="off";b.style.overflow="auto";b.style.width="700px";b.style.height="350px";b.style.margin="5px";a.appendChild(b)}b.value+=d+"\n";b.scrollTop=b.scrollHeight-b.clientHeight}catch(c){alert("Exception: "+c.name+" Message: "+c.message)}};function tzCalculation_LocalTimeZone(l,q){var k;var s;var o;var r;var m;var t;var p;var n;k=new Date();s=Date.UTC(k.getUTCFullYear(),k.getUTCMonth(),k.getUTCDate(),k.getUTCHours(),k.getUTCMinutes(),k.getUTCSeconds());o=Date.UTC(k.getFullYear(),k.getMonth(),k.getDate(),k.getHours(),k.getMinutes(),k.getSeconds());r=o-s;m=(r/1000)/60;if(0>m){t="-"}else{t="+"}p=m%60;if(p!=0){m-=p;if(0>p){p=Math.abs(p)}}if(0>m){m=Math.abs(m)}n=m/60;if(10>n){t=t+"0"}t=t+n;if(10>p){t=t+"0"}t=t+p;if(q){document.writeln(t)}document.cookie="timezone="+t+"; domain="+l;return t};